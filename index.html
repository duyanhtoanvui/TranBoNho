<!-- <!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TR√ÄN B·ªò NH·ªö - Game Marketplace</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- CSS GI·ªÆ NGUY√äN NH∆Ø C≈® --- */
        :root {
            --bg-gradient-1: #87CEEB; 
            --bg-gradient-2: #E0F7FA; 
            --card-bg: rgba(255, 255, 255, 0.95);
            --text-color: #2c3e50;
            --primary-color: #00a8ff;
            --primary-dark: #0984e3;
            --accent-yellow: #fbc531;
            --accent-pink: #ff7675;
            --nav-bg: rgba(255, 255, 255, 0.9); 
            --font-main: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            --success-color: #2ecc71;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            color: var(--text-color);
            font-family: var(--font-main);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            background-color: #87CEEB;
            background: linear-gradient(180deg, var(--bg-gradient-1) 0%, var(--bg-gradient-2) 100%);
        }

        /* --- NAVBAR STYLES --- */
        .navbar {
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 15px 30px;
            background: var(--nav-bg); 
            backdrop-filter: blur(10px); 
            position: sticky; 
            top: 0;
            z-index: 1000; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
            border-bottom: 1px solid rgba(255,255,255,0.5);
        }

        .logo {
            font-size: 1.5rem; 
            font-weight: 900; 
            color: var(--primary-color); 
            text-transform: uppercase;
            letter-spacing: 1px; 
            text-decoration: none;
            display: flex; 
            align-items: center; 
            gap: 10px;
        }
        .logo i { color: var(--accent-yellow); font-size: 1.8rem; }

        .nav-links { display: flex; gap: 25px; font-weight: 600; align-items: center; }
        .nav-links a { text-decoration: none; color: #555; transition: 0.3s; position: relative; font-size: 1rem; cursor: pointer; }
        .nav-links a:hover, .nav-links a.active { color: var(--primary-color); }
        .nav-links a::after {
            content: ''; position: absolute; width: 0; height: 3px; bottom: -5px; left: 0;
            background: var(--accent-yellow); transition: width 0.3s; border-radius: 2px;
        }
        .nav-links a:hover::after { width: 100%; }

        /* --- CSS DROPDOWN TH·ªÇ LO·∫†I --- */
        .dropdown { position: relative; display: flex; align-items: center; height: 100%; }
        
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #fff;
            min-width: 220px;
            max-height: 400px; 
            overflow-y: auto; 
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            z-index: 1001;
            border-radius: 10px;
            padding: 10px 0;
            top: 100%; 
            left: 0;
            border: 1px solid rgba(0,0,0,0.05);
            margin-top: 10px; 
        }
        .dropdown-content::-webkit-scrollbar { width: 5px; }
        .dropdown-content::-webkit-scrollbar-thumb { background: #ccc; border-radius: 5px; }
        .dropdown-content::before {
            content: ""; position: absolute; top: -15px; left: 0; width: 100%; height: 20px; background: transparent;
        }
        .dropdown-content a {
            color: #333; padding: 12px 20px; text-decoration: none; display: block; font-size: 0.95rem; transition: 0.2s; border-bottom: 1px solid #f5f5f5;
        }
        .dropdown-content a:last-child { border-bottom: none; }
        .dropdown-content a:hover {
            background-color: var(--bg-gradient-2); color: var(--primary-color); padding-left: 25px; 
        }
        .dropdown:hover .dropdown-content { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .nav-actions { display: flex; align-items: center; gap: 15px; }
        
        .search-box {
            position: relative; background: #f1f2f6; border-radius: 30px; padding: 5px 15px;
            display: flex; align-items: center; border: 2px solid transparent; transition: 0.3s;
        }
        .search-box:focus-within { border-color: var(--primary-color); background: #fff; }
        .search-box input {
            border: none; background: transparent; outline: none; padding: 5px; width: 150px; color: #333; font-size: 0.9rem;
        }
        .search-box i { color: #aaa; }

        .icon-btn { font-size: 1.2rem; color: #555; cursor: pointer; position: relative; transition: 0.3s; }
        .icon-btn:hover { color: var(--primary-color); transform: scale(1.1); }
        
        .cart-badge {
            position: absolute; top: -8px; right: -8px; background: var(--accent-pink); color: white;
            font-size: 0.7rem; width: 18px; height: 18px; border-radius: 50%; display: flex; 
            justify-content: center; align-items: center; font-weight: bold;
        }

        .btn-login {
            background: var(--primary-color); color: white; border: none; padding: 8px 20px; 
            border-radius: 20px; font-weight: bold; cursor: pointer; transition: 0.3s;
            box-shadow: 0 4px 10px rgba(0, 168, 255, 0.3);
        }
        .btn-login:hover { background: var(--primary-dark); transform: translateY(-2px); }

        /* --- HERO SECTION --- */
        .hero { text-align: center; padding: 60px 20px 40px; }
        .hero h1 {
            font-size: 3rem; color: var(--primary-color); text-shadow: 3px 3px 0px #fff; margin-bottom: 10px;
        }
        .hero p { background: #fff; display: inline-block; padding: 5px 20px; border-radius: 20px; color: #666; font-weight: 600; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }

        /* --- MAIN CONTAINER & GRID --- */
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        h2 { border-left: 8px solid var(--accent-yellow); padding-left: 20px; margin: 30px 0; text-transform: uppercase; color: var(--primary-color); font-weight: 800; }
        
        .game-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 30px; }
        
        .game-card {
            background: var(--card-bg); border-radius: 20px; overflow: hidden; transition: all 0.3s;
            box-shadow: 0 10px 25px rgba(0, 168, 255, 0.15); position: relative;
            border: 2px solid transparent; display: flex; flex-direction: column;
        }
        .game-card:hover { transform: translateY(-10px); border-color: var(--accent-yellow); }
        
        .price-tag { position: absolute; top: 15px; right: 15px; background: var(--accent-pink); color: #fff; padding: 5px 12px; border-radius: 20px; font-weight: bold; font-size: 0.85rem; z-index: 2; }
        .price-tag.free { background: var(--primary-color); }
        .price-tag.owned { background: var(--success-color); }
        
        .game-thumb { width: 100%; height: 180px; overflow: hidden; }
        .game-thumb img { width: 100%; height: 100%; object-fit: cover; display: block; transition: transform 0.3s; }
        .game-card:hover .game-thumb img { transform: scale(1.05); }

        .game-info { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; }
        .game-title { font-size: 1.3rem; color: var(--primary-color); margin-bottom: 5px; font-weight: 700; }
        .game-desc { font-size: 0.9rem; color: #666; margin-bottom: 15px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        
        .bank-info-display { background: #f0f9ff; padding: 10px; margin-top: 10px; border-radius: 8px; font-size: 0.85rem; color: #555; border-left: 3px solid var(--primary-color); display: none; margin-bottom: 10px;}
        .show-bank { display: block; }

        .card-actions { margin-top: auto; display: flex; gap: 10px; width: 100%; }
        
        .btn-play { 
            flex: 2; padding: 10px; background: var(--accent-yellow); color: #2c3e50; border: none; 
            border-radius: 30px; font-weight: 800; cursor: pointer; transition: 0.2s; box-shadow: 0 3px 0 #e1b12c; text-align: center;
        }
        .btn-play:hover { background: #fcd567; transform: translateY(-2px); }
        .btn-play:active { transform: translateY(2px); box-shadow: none; }

        .btn-secondary {
            flex: 1; padding: 10px; background: #fff; color: var(--primary-color); border: 2px solid var(--primary-color);
            border-radius: 30px; font-weight: bold; cursor: pointer; transition: 0.2s; display: flex; align-items: center; justify-content: center; text-align: center;
        }
        .btn-secondary:hover { background: var(--primary-color); color: white; }
        .btn-secondary.added { background: #ddd; color: #666; border-color: #ddd; cursor: not-allowed; }

        .btn-reset {
            background-color: #ff7675; color: white; border: none; padding: 10px 20px; border-radius: 30px;
            font-weight: bold; cursor: pointer; margin-top: 15px; transition: 0.3s;
        }
        .btn-reset:hover { background-color: #d63031; transform: translateY(-2px); }

        /* --- FORM UPLOAD (NEW) --- */
        .upload-section { background: #fff; padding: 40px; border-radius: 20px; margin-top: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .form-row { display: flex; gap: 20px; margin-bottom: 20px; }
        .form-col { flex: 1; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; color: var(--primary-color); font-weight: 700; font-size: 1rem; }
        input, textarea, select { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #ddd; background: #f9f9f9; outline: none; transition: 0.3s; }
        input:focus, textarea:focus, select:focus { border-color: var(--primary-color); background: #fff; box-shadow: 0 0 5px rgba(0, 168, 255, 0.2); }
        .upload-header { text-align: center; margin-bottom: 30px; }
        .upload-header h1 { color: var(--primary-color); font-size: 2.5rem; }
        .required-mark { color: red; font-weight: bold; }

        /* --- FOOTER --- */
        footer { text-align: center; padding: 40px; margin-top: 60px; color: #fff; background: var(--primary-color); font-weight: bold; }

        /* --- DETAIL PAGE STYLES --- */
        .detail-header { text-align: left; padding-top: 20px; margin-bottom: 30px; }
        .detail-header h1 { font-size: 3rem; color: var(--text-color); text-shadow: none; margin-bottom: 5px; }
        .detail-header p { background: var(--card-bg); padding: 5px 10px; border-radius: 10px; color: #555; font-weight: 600; display: inline-block; }

        .detail-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 30px; align-items: start; }
        .video-player { width: 100%; height: 450px; background: #000; border-radius: 15px; overflow: hidden; box-shadow: 0 10px 20px rgba(0,0,0,0.2); position: relative; }
        .video-player iframe { width: 100%; height: 100%; border: none; }

        .game-specs { background: var(--card-bg); padding: 30px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .game-specs h3 { color: var(--primary-dark); margin-bottom: 15px; border-bottom: 3px solid var(--accent-yellow); padding-bottom: 5px; }
        .spec-item { margin-bottom: 10px; font-size: 0.95rem; }
        .spec-item strong { color: var(--text-color); display: inline-block; width: 110px; }
        
        /* --- RATING STYLES (M·ªöI) --- */
        .rating-box { background: #fff; margin-top: 20px; padding: 20px; border-radius: 15px; text-align: center; border: 2px dashed #eee; }
        .rating-title { font-weight: bold; margin-bottom: 10px; color: #555; }
        .stars-container { display: flex; justify-content: center; gap: 10px; font-size: 2rem; cursor: pointer; }
        .star-icon { color: #ccc; transition: 0.2s; }
        .star-icon:hover, .star-icon.active { color: #f1c40f; transform: scale(1.2); }
        .user-rated-msg { margin-top: 10px; color: var(--success-color); font-weight: bold; font-size: 0.9rem; }

        .story-section { margin-top: 30px; }
        .story-box { background: var(--card-bg); padding: 25px; border-radius: 15px; margin-top: 15px; color: #333; line-height: 1.6; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .gameplay-box { background: var(--card-bg); padding: 25px; border-radius: 15px; margin-top: 15px; color: #333; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .win-loss-list { list-style: none; padding-left: 0; margin-top: 15px; }
        .win-loss-list li { margin-bottom: 10px; display: flex; align-items: flex-start; gap: 10px; }
        .purchase-note { background: #fff3cd; color: #856404; padding: 15px; border-radius: 10px; margin-top: 20px; border: 1px solid #ffeeba; display: flex; align-items: center; gap: 10px; }

        /* --- CSS CHO PH·∫¶N GI·ªöI THI·ªÜU --- */
        .intro-box { background: linear-gradient(to right, #ffffff, #f0f9ff); padding: 25px; border-radius: 15px; margin-top: 25px; border: 1px solid #e1e1e1; border-left: 6px solid var(--primary-color); box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .intro-box h2 { border-left: none; padding-left: 0; margin-top: 0; margin-bottom: 15px; display: flex; align-items: center; gap: 10px; font-size: 1.5rem; }
        .intro-content { font-size: 1.1rem; color: #444; font-weight: 500; }
        .custom-list { margin-left: 20px; margin-bottom: 15px; }
        .custom-list li { margin-bottom: 5px; list-style-type: disc; }
        .content-paragraph { margin-bottom: 15px; }

        /* --- CSS CHO TRANG GI·ªé H√ÄNG (CART PAGE) --- */
        .cart-section { margin-top: 20px; }
        .cart-table { width: 100%; border-collapse: collapse; background: #fff; border-radius: 10px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .cart-table th, .cart-table td { padding: 15px; text-align: left; border-bottom: 1px solid #eee; }
        .cart-table th { background: var(--primary-color); color: white; }
        .cart-item-img { width: 80px; height: 50px; object-fit: cover; border-radius: 5px; }
        .cart-total { text-align: right; margin-top: 20px; font-size: 1.5rem; font-weight: bold; color: var(--text-color); }
        .btn-remove { color: var(--accent-pink); background: none; border: none; cursor: pointer; font-size: 1.2rem; }
        .btn-remove:hover { color: #d63031; }
        .btn-checkout { display: block; width: 100%; max-width: 300px; margin: 30px 0 0 auto; background: var(--success-color); color: white; font-size: 1.2rem; padding: 15px; border: none; border-radius: 50px; font-weight: bold; cursor: pointer; box-shadow: 0 5px 15px rgba(46, 204, 113, 0.4); transition: 0.3s; }
        .btn-checkout:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(46, 204, 113, 0.6); }
        .empty-cart-msg { text-align: center; padding: 50px; background: rgba(255,255,255,0.8); border-radius: 15px; }
        .owned-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; margin-top: 20px; }
        .owned-item { background: #fff; padding: 10px; border-radius: 10px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); border-bottom: 3px solid var(--success-color); }

        /* --- RESPONSIVE --- */
        @media (max-width: 900px) { .detail-grid { grid-template-columns: 1fr; } .video-player { height: 300px; } }
        @media (max-width: 768px) {
            .navbar { flex-direction: column; gap: 15px; padding: 15px; }
            .nav-links { gap: 15px; font-size: 0.9rem; width: 100%; justify-content: center; }
            .nav-actions { width: 100%; justify-content: space-between; }
            .search-box input { width: 100%; }
            .form-row { flex-direction: column; gap: 0; }
        }
    </style>
</head>
<body>

    <div id="app-container">
    </div>

    <footer>
        <p>&copy; 2025 Nh√≥m TR√ÄN B·ªò NH·ªö.</p>
    </footer>

    <script>
        // --- 1. D·ªÆ LI·ªÜU GAME (DATABASE) ƒê√É C·∫¨P NH·∫¨T LINK T·∫¢I ---
        const initialGames = [
            { 
                id: 1, 
                name: "Magician vs. Goblin", 
                desc: "ƒê·∫°i chi·∫øn ·∫£o thu·∫≠t gia v√† qu√°i v·∫≠t Goblin. Game nh·∫≠p vai h√†nh ƒë·ªông.", 
                intro: `B·∫°n c√≥ th·ªÉ s·ªëng s√≥t kh·ªèi b·∫ßy Goblin kh√¥ng?
                
                Magician vs Goblin l√† game h√†nh ƒë·ªông s·ªëng c√≤n nh·ªãp ƒë·ªô nhanh, n∆°i b·∫°n v√†o vai m·ªôt Ph√°p S∆∞ tr·∫ª b·ªã bao v√¢y b·ªüi l≈© Goblin hung h√£n. B·∫°n ch·ªâ c√≥ m·ªôt m√¨nh ‚Äî nh∆∞ng s·ªü h·ªØu ma thu·∫≠t m·∫°nh m·∫Ω. M·ªói gi√¢y l√† m·ªôt tr·∫≠n chi·∫øn sinh t·ªìn khi b·∫°n ph·∫£i v·ª´a n√©, v·ª´a b·∫Øn ph√©p, v·ª´a c·ªë g·∫Øng duy tr√¨ m·∫°ng s·ªëng gi·ªØa s·ªë l∆∞·ª£ng Goblin tƒÉng d·∫ßn theo th·ªùi gian.`,
                price: 50000, 
                bankInfo: "999999 - Techcombank - VO MINH TRIET", 
                img: "GameImage/game1.png", 
                genre: "2D Action, Top-down Shooter, Survival Combat", 
                players: "Single", 
                developer: "V√µ Minh Tri·∫øt", 
                release: "07/11/2025", 
                videoUrl: "https://www.youtube.com/embed/kS1iZw9P5O0",
                downloadUrl: "https://vominhtriet.itch.io/blackmagician-vs-goblin", // LINK GAME 1
                story: `√ù t∆∞·ªüng c·ªët l√µi:
                + Ti√™u di·ªát c√†ng nhi·ªÅu Goblin c√†ng t·ªët.
                + S·ªëng c√†ng l√¢u c√†ng t·ªët.
                + C∆° ch·∫ø ch∆°i nhanh, tr·ª±c quan.

                C·ªët truy·ªán:
                B·∫°n l√† m·ªôt Ph√°p S∆∞ h·ªçc vi·ªác ƒëang th·ª±c t·∫≠p t·∫°i v√πng r·ª´ng ma thu·∫≠t. C√°nh c·ªïng qu√°i v·∫≠t m·ªü ra, nhi·ªám v·ª• c·ªßa b·∫°n l√† c·∫ßm c·ª± ch·ªù vi·ªán binh!`,
                gameplay: `Di chuy·ªÉn: n√∫t di chuy·ªÉn ho·∫∑c chu·ªôt 
                Ng·∫Øm: theo h∆∞·ªõng chu·ªôt.
                B·∫Øn ph√©p: Nh·∫•n/gi·ªØ chu·ªôt tr√°i ‚Üí b·∫Øn Spell.`,
                winCondition: `S·ªëng c√†ng l√¢u c√†ng t·ªët.`,
                lossCondition: "HP = 0."
            },
            { 
                id: 2, 
                name: "Sinh Vi√™n sinh t·ªìn", 
                desc: "S·ªëng s√≥t qua 30 ng√†y c√πng nh·ªØng bi·∫øn c·ªë b·∫•t ng·ªù th·ªùi Sinh vi√™n.", 
                intro: `Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi chi·∫øn tr∆∞·ªùng kh·ªëc li·ªát nh·∫•t: ƒê·∫°i H·ªçc! Kh√¥ng c√≥ s√∫ng ƒë·∫°n, k·∫ª th√π c·ªßa b·∫°n l√† 'Deadline', 'M√¨ t√¥m' v√† 'H·∫øt ti·ªÅn'.
                B·∫°n c√≥ th·ªÉ TR·ª§ t·ªõi ng√†y cu·ªëi c√πng ƒë∆∞·ª£c kh√¥ng?`,
                price: 0, 
                bankInfo: "", 
                img: "GameImage/game2.png", 
                genre: "2D Simulator, Resource management", 
                players: "Single", 
                developer: "V√µ Ng·ªçc B·∫£o Tr√¢n", 
                release: "08/11/2025", 
                videoUrl: "https://www.youtube.com/embed/7rkcFUS7tNI",
                downloadUrl: "https://barotrun.itch.io/sinhvien-sinhton", // LINK GAME 2
                story: `M√¥ ph·ªèng cu·ªôc chi·∫øn sinh t·ªìn ƒë√¥ th·ªã c·ªßa sinh vi√™n nƒÉm nh·∫•t.
                M·ª•c ti√™u: ƒê·∫°t ƒë·∫øn Ng√†y 30 m√† kh√¥ng ƒë·ªÉ ch·ªâ s·ªë Ti·ªÅn, S·ª©c kh·ªèe, ƒê·ªô no <=0 ho·∫∑c Stress >=100.`,
                gameplay: "Game theo l∆∞·ª£t (Turn-based). D√πng chu·ªôt l·ª±a ch·ªçn quy·∫øt ƒë·ªãnh cho c√°c s·ª± ki·ªán h√†ng ng√†y.",
                winCondition: "S·ªëng s√≥t qua 30 ng√†y.",
                lossCondition: `Ti·ªÅn <= 0, S·ª©c kh·ªèe <= 0, ƒê·ªô no <= 0, ho·∫∑c Stress >= 100.`
            },
            { 
                id: 3, 
                name: "Anya's Neo Dodger", 
                desc: "N√© tr√°nh b√†i t·∫≠p Vi T√≠ch Ph√¢n trong th·∫ø gi·ªõi Cyberpunk c√πng ANYA.", 
                intro: "Sinh t·ªìn qua c∆°n √°c m·ªông Vi T√≠ch Ph√¢n trong th·∫ø gi·ªõi Retro-Cyberpunk c√πng ANYA!",
                price: 0, 
                bankInfo: "", 
                img: "GameImage/game3.png", 
                genre: "Arcade Survival, Endless, 8-bit", 
                players: "Single", 
                developer: "Nguy·ªÖn L√™ Ch√≠ T∆∞·ªùng", 
                release: "09/11/2025", 
                videoUrl: "https://www.youtube.com/embed/xqmehhKTZZI",
                downloadUrl: "https://chituong217.itch.io/anyas-neo-dodger", // LINK GAME 3
                story: `Anya b·ªã chuy·ªÉn sinh v√†o th·∫ø gi·ªõi th·ª±c t·∫°i HCMUS. M·ªói ƒë√™m c√¥ ph·∫£i n√© tr√°nh nh·ªØng cu·ªën s√°ch Vi T√≠ch Ph√¢n r∆°i xu·ªëng trong gi·∫•c m∆° Cyberpunk.`,
                gameplay: "D√πng Ph√≠m M≈©i T√™n Tr√°i/Ph·∫£i ƒë·ªÉ di chuy·ªÉn Anya n√© tr√°nh.",
                winCondition: "S·ªëng s√≥t c√†ng l√¢u c√†ng t·ªët.",
                lossCondition: "Va ch·∫°m 3 l·∫ßn v·ªõi s√°ch Vi T√≠ch Ph√¢n."
            },
            { 
                id: 4, 
                name: "ERROR RUN", 
                desc: "Ch·∫°y tr·ªën m√†n h√¨nh xanh ch·∫øt ch√≥c g·ªìm BUG v√† ERROR.", 
                intro: `H√ÉY TR√ÅNH N√â T·∫§T C·∫¢ C√ÅC BUG - ERROR ƒê·ªÇ MANG V·ªÄ ƒêI·ªÇM S·ªê CAO NH·∫§T CHO M√îN C∆† S·ªû L·∫¨P TR√åNH C·ª¶A B·∫†N !!!`,
                price: 20000, 
                bankInfo: "777777 - ACB - VO NGUYEN CONG TRI", 
                img: "GameImage/game4.png", 
                genre: "Endless Runner, Arcade", 
                players: "Single", 
                developer: "V√µ Nguy·ªÖn C√¥ng Tr√≠", 
                release: "10/11/2025", 
                videoUrl: "https://www.youtube.com/embed/6AuqZ9ZINVQ",
                downloadUrl: "https://congtri25ctt6.itch.io/error-run", 
                story: `Sinh vi√™n Tr√≠ b·ªã h√∫t v√†o th·∫ø gi·ªõi m√£ l·ªánh. Ph·∫£i li√™n t·ª•c bay qua c√°c khe h·ªü bug ƒë·ªÉ commit code k·ªãp deadline.`,
                gameplay: `PC: Spacebar/Chu·ªôt tr√°i. Mobile: Ch·∫°m m√†n h√¨nh.`,
                winCondition: `S·ªëng c√†ng l√¢u c√†ng t·ªët, ghi ƒëi·ªÉm cao.`,
                lossCondition: `Va ch·∫°m v√†o c·ªôt l·ªói, tr·∫ßn ho·∫∑c s√†n nh√†.`
            },
            { 
                id: 5, 
                name: "Naruto Adventure", 
                desc: "Nhi·ªám v·ª• Ninja c·∫•p S c√πng Kakashi(?) v√† Naruto.", 
                intro: `Game h√†nh ƒë·ªông platformer 2D. Ch·ªçn Naruto ho·∫∑c Kakashi ƒë·ªÉ b·∫£o v·ªá L√†ng L√° kh·ªèi Sound Ninja.`,
                price: 0, 
                bankInfo: "", 
                img: "GameImage/game5.png", 
                genre: "Adventure, Fighting", 
                players: "Single", 
                developer: "ƒê·ªó Duy Tr∆∞·ªùng", 
                release: "11/11/2025", 
                videoUrl: "https://www.youtube.com/embed/4XScOKO0Y40",
                downloadUrl: "https://truonghhaz.itch.io/naruto-adventure", // LINK GAME 5
                story: `B·∫£o v·ªá L√†ng L√° kh·ªèi Ninja L√†ng √Çm Thanh. Kakashi thi√™n v·ªÅ chi·∫øn thu·∫≠t, Naruto thi√™n v·ªÅ t·∫•n c√¥ng di·ªán r·ªông.`,
                gameplay: `Di chuy·ªÉn: M≈©i t√™n/WASD. T·∫•n c√¥ng: J, K. Tuy·ªát k·ªπ: L, U.`,
                winCondition: `Ti√™u di·ªát h·∫øt ƒë·ªãch ƒë·ªÉ qua m√†n.`,
                lossCondition: `M√°u v·ªÅ 0 ho·∫∑c r∆°i xu·ªëng v·ª±c.`
            },
            { 
                id: 6, 
                name: "D·∫°o Ph·ªë CHILL", 
                desc: "L√°i xe th∆∞ gi√£n c√πng nh·∫°c Lofi trong th·∫ø gi·ªõi si√™u th·ª±c.", 
                intro: `G√°c l·∫°i √¢u lo, b·∫≠t nh·∫°c l√™n v√† t·∫≠n h∆∞·ªüng. Ch·ªâ c√≥ b·∫°n v√† chi·∫øc xe l∆∞·ªõt ƒëi trong m√†n ƒë√™m.`,
                price: 100000, 
                bankInfo: "111111 - Vietcombank - DOAN HOANG VIET", 
                img: "GameImage/game6.png", 
                genre: "Simulation / Hangout", 
                players: "Single", 
                developer: "ƒêo√†n Ho√†ng Vi·ªát", 
                release: "12/10/2025", 
                videoUrl: "https://www.youtube.com/embed/jNlELPjMwOQ",
                downloadUrl: "https://www.roblox.com/games/13217277322/Dao-Pho-Chill", // LINK GAME 6 (ƒê√£ ch·ªânh l·∫°i link Roblox chu·∫©n ƒë·ªÉ m·ªü web)
                story: `M·ªôt th·∫ø gi·ªõi m·ªü ƒë·ªÉ chill, l√°i xe ng·∫Øm c·∫£nh v√† nghe nh·∫°c. Kh√¥ng √°p l·ª±c, kh√¥ng k·∫ª th√π.`,
                gameplay: `Di chuy·ªÉn: WASD. Chu·ªôt: Xoay camera. M: Menu ƒëi·ªán tho·∫°i.`,
                winCondition: "Kh√¥ng c√≥, game ch·ªâ ƒë·ªÉ th∆∞ gi√£n.",
                lossCondition: "Khi t·∫Øt game."
            }
        ];

        // --- H√ÄM L·∫§Y D·ªÆ LI·ªÜU T·ª™ LOCAL STORAGE (L∆ØU TR·ªÆ Vƒ®NH VI·ªÑN) ---
        function getStoredGames() {
            const stored = localStorage.getItem('myCustomGames');
            return stored ? JSON.parse(stored) : [];
        }

        // --- H√ÄM L∆ØU GAME M·ªöI V√ÄO LOCAL STORAGE ---
        function saveCustomGame(newGame) {
            const currentStored = getStoredGames();
            currentStored.push(newGame);
            localStorage.setItem('myCustomGames', JSON.stringify(currentStored));
        }

        // K·∫øt h·ª£p game g·ªëc + game ƒë√£ l∆∞u t·ª´ b·ªô nh·ªõ
        let currentGames = [...initialGames, ...getStoredGames()];
        
        const appContainer = document.getElementById('app-container');
        const formatter = new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' });

        // --- 2. H·ªÜ TH·ªêNG QU·∫¢N L√ù GI·ªé H√ÄNG (STORAGE) ---
        function getCart() { return JSON.parse(localStorage.getItem('cart') || '[]'); }
        function saveCart(cart) { localStorage.setItem('cart', JSON.stringify(cart)); updateCartBadge(); }
        
        function addToCart(gameId) {
            let cart = getCart();
            let library = getLibrary();
            if (library.includes(gameId)) { alert("B·∫°n ƒë√£ s·ªü h·ªØu game n√†y r·ªìi!"); return; }
            if (!cart.includes(gameId)) {
                cart.push(gameId);
                saveCart(cart);
                alert("ƒê√£ th√™m v√†o gi·ªè h√†ng!");
            } else {
                alert("Game n√†y ƒë√£ c√≥ trong gi·ªè h√†ng!");
            }
            if (!getQueryParam('view') && !getQueryParam('game')) {
                const gameGrid = document.getElementById('gameGrid');
                if (gameGrid) renderGames(currentGames, gameGrid);
            }
        }
        
        function removeFromCart(gameId) {
            let cart = getCart();
            cart = cart.filter(id => id !== gameId);
            saveCart(cart);
            renderCartPage();
        }
        
        function getLibrary() { return JSON.parse(localStorage.getItem('library') || '[]'); }
        function saveLibrary(library) { localStorage.setItem('library', JSON.stringify(library)); }

        // --- H√ÄM RESET D·ªÆ LI·ªÜU ---
        function resetLibrary() {
            if(confirm("B·∫°n c√≥ ch·∫Øc mu·ªën X√ìA TO√ÄN B·ªò d·ªØ li·ªáu (Game ƒë√£ mua + Game ƒë√£ ƒëƒÉng)?")) {
                localStorage.removeItem('library');
                localStorage.removeItem('cart');
                localStorage.removeItem('myCustomGames'); // X√≥a c·∫£ game ƒë√£ ƒëƒÉng
                localStorage.removeItem('userRatings');   // X√≥a ƒë√°nh gi√°
                alert("ƒê√£ reset d·ªØ li·ªáu! V·ªÅ trang ch·ªß...");
                window.location.href = window.location.pathname; 
            }
        }

        function updateCartBadge() {
            const badge = document.querySelector('.cart-badge');
            if (badge) {
                const count = getCart().length;
                badge.textContent = count;
                badge.style.display = count > 0 ? 'flex' : 'none';
            }
        }

        // --- H√ÄM THANH TO√ÅN ---
        function processCheckout() {
            const cart = getCart();
            if (cart.length === 0) {
                alert("Gi·ªè h√†ng ƒëang tr·ªëng! H√£y th√™m game v√†o tr∆∞·ªõc khi thanh to√°n.");
                return;
            }

            // T√≠nh t·ªïng ti·ªÅn ƒë·ªÉ hi·ªÉn th·ªã trong confirm
            const allGames = [...initialGames, ...getStoredGames()];
            const cartItemsFull = allGames.filter(g => cart.includes(g.id));
            const total = cartItemsFull.reduce((sum, item) => sum + item.price, 0);
            const totalFormatted = new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(total);

            if (confirm(`X√°c nh·∫≠n thanh to√°n ${cart.length} game?\nT·ªïng c·ªông: ${totalFormatted}`)) {
                let library = getLibrary();
                
                // Th√™m game v√†o th∆∞ vi·ªán
                cart.forEach(id => {
                    if (!library.includes(id)) library.push(id);
                });
                
                saveLibrary(library); // L∆∞u th∆∞ vi·ªán m·ªõi
                saveCart([]);         // X√≥a s·∫°ch gi·ªè h√†ng
                
                alert("Thanh to√°n th√†nh c√¥ng! C·∫£m ∆°n b·∫°n ƒë√£ ·ªßng h·ªô TBN Studio.");
                renderCartPage();     // Load l·∫°i trang ƒë·ªÉ th·∫•y game ƒë√£ mua
                updateCartBadge();    // Reset s·ªë tr√™n icon gi·ªè h√†ng
            }
        }

        // --- H√ÄM ƒê√ÅNH GI√Å (RATING) ---
        function submitRating(gameId, rating) {
            let ratings = JSON.parse(localStorage.getItem('userRatings') || '{}');
            ratings[gameId] = rating;
            localStorage.setItem('userRatings', JSON.stringify(ratings));
            
            // V·∫Ω l·∫°i UI ƒë√°nh gi√°
            alert(`C·∫£m ∆°n b·∫°n ƒë√£ ƒë√°nh gi√° ${rating} sao!`);
            const selectedGame = currentGames.find(g => g.id == gameId);
            if (selectedGame) renderDetailPage(selectedGame);
        }

        function getGameRating(gameId) {
            const ratings = JSON.parse(localStorage.getItem('userRatings') || '{}');
            return ratings[gameId] || 0;
        }

        // --- 3. HELPER FUNCTIONS (FORMAT TEXT) ---
        function formatGameText(text) {
            if (!text) return "";

            let formatted = text
                .replace(/√ù t∆∞·ªüng c·ªët l√µi/g, "<strong>√ù t∆∞·ªüng c·ªët l√µi</strong>")
                .replace(/√ù t∆∞·ªüng trung t√¢m/g, "<strong>√ù t∆∞·ªüng trung t√¢m</strong>")
                .replace(/√ù t∆∞·ªüng:/g, "<strong>√ù t∆∞·ªüng:</strong>")
                .replace(/C·ªët truy·ªán:/g, "<strong>C·ªët truy·ªán:</strong>")
                .replace(/C·ªët truy·ªán(?![^<]*>)/g, "<strong>C·ªët truy·ªán</strong>"); 

            const paragraphs = formatted.split(/\n\s*\n/);
            let html = '';
            
            paragraphs.forEach(para => {
                if (para.trim().includes('+')) {
                    const lines = para.split('\n');
                    let inList = false;
                    
                    lines.forEach(line => {
                        let cleanLine = line.trim();
                        if (cleanLine.startsWith('+')) {
                            if (!inList) { html += '<ul class="custom-list">'; inList = true; }
                            html += `<li>${cleanLine.substring(1).trim()}</li>`;
                        } else {
                            if (inList) { html += '</ul>'; inList = false; }
                            if (cleanLine.length > 0) { html += `<div class="content-paragraph">${line}</div>`; }
                        }
                    });
                    if (inList) html += '</ul>';
                } else {
                    if (para.trim().length > 0) {
                        html += `<div class="content-paragraph">${para.replace(/\n/g, '<br>')}</div>`;
                    }
                }
            });
            return html;
        }

        // --- 4. C√ÅC H√ÄM X·ª¨ L√ù MENU DROPDOWN & L·ªåC GENRE ---
        function getAllGenres() {
            let allGenres = [];
            currentGames.forEach(game => { // D√πng currentGames ƒë·ªÉ l·∫•y c·∫£ genre c·ªßa game m·ªõi
                let genres = game.genre.split(/[,\/]/).map(g => g.trim());
                allGenres.push(...genres);
            });
            return [...new Set(allGenres)].sort();
        }

        function renderGenreDropdown() {
            const dropdown = document.getElementById('genreDropdown');
            if (!dropdown) return;
            const genres = getAllGenres();
            let html = `<a href="#" onclick="filterByGenre('')">‚≠ê T·∫•t c·∫£</a>`;
            genres.forEach(g => {
                html += `<a href="#" onclick="filterByGenre('${g}')">${g}</a>`;
            });
            dropdown.innerHTML = html;
        }

        function filterByGenre(genre) {
            const searchInput = document.getElementById('searchInput');
            if(searchInput) {
                searchInput.value = genre;
                searchInput.dispatchEvent(new Event('input'));
                document.getElementById('gallery-title').scrollIntoView({behavior: "smooth"});
            }
        }

        // --- 5. RENDER C√ÅC TRANG ---
        
        function openCartInNewTab() { window.open(`${window.location.pathname}?view=cart`, '_blank'); }
        function goToCartView() { window.location.href = `${window.location.pathname}?view=cart`; }
        function openGameDetail(gameId) { window.open(`${window.location.pathname}?game=${gameId}`, '_blank'); }
        function goToUploadPage() { window.location.href = `${window.location.pathname}?view=upload`; }
        function getQueryParam(param) { const urlParams = new URLSearchParams(window.location.search); return urlParams.get(param); }

        // === 5.1 TRANG CH·ª¶ ===
        function renderHomePage() {
            appContainer.innerHTML = `
                <nav class="navbar">
                    <a class="logo" href="about.html">
                        <i class="fa-solid fa-gamepad"></i> TBN STUDIO
                    </a>
                    <div class="nav-links">
                        <a href="#" class="active">Trang ch·ªß</a>
                        <a href="#gallery-title">Kh√°m ph√°</a>
                        <div class="dropdown">
                            <a href="#">Th·ªÉ lo·∫°i <i class="fa-solid fa-caret-down" style="font-size: 0.8rem;"></i></a>
                            <div class="dropdown-content" id="genreDropdown"></div>
                        </div>
                        <a href="#">C·ªông ƒë·ªìng</a>
                        <a href="#" onclick="goToUploadPage()" style="color:var(--primary-color);font-weight:bold;">
                            <i class="fa-solid fa-upload"></i> ƒêƒÉng t·∫£i game
                        </a>
                    </div>
                    <div class="nav-actions">
                        <div class="search-box">
                            <input type="text" id="searchInput" placeholder="T√¨m game...">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </div>
                        <div class="icon-btn" onclick="openCartInNewTab()" title="Xem gi·ªè h√†ng">
                            <i class="fa-solid fa-cart-shopping"></i>
                            <span class="cart-badge" style="display:none">0</span>
                        </div>
                        <button class="btn-login" onclick="alert('Ch·ª©c nƒÉng ƒëƒÉng nh·∫≠p ƒëang b·∫£o tr√¨!')">ƒêƒÉng nh·∫≠p</button>
                    </div>
                </nav>

                <div class="hero">
                    <h1>TR√ÄN B·ªò NH·ªö</h1>
                    <p>‚ú® H·ªôi ch·ª£ Game Indie - N∆°i √Ω t∆∞·ªüng th√†nh hi·ªán th·ª±c ‚ú®</p>
                </div>

                <div class="container">
                    <h2 id="gallery-title">üî• Game ƒê·ªÅ Xu·∫•t</h2>
                    <div class="game-grid" id="gameGrid"></div>
                </div>
            `;
            
            const gameGrid = document.getElementById('gameGrid');
            const searchInput = document.getElementById('searchInput');

            renderGames(currentGames, gameGrid);
            updateCartBadge();
            renderGenreDropdown(); 
            
            searchInput.addEventListener('input', function(e) {
                const keyword = e.target.value.toLowerCase();
                const filteredGames = currentGames.filter(game => 
                    game.name.toLowerCase().includes(keyword) || 
                    game.genre.toLowerCase().includes(keyword)
                );
                renderGames(filteredGames, gameGrid);
            });
        }

        // === 5.2 TRANG ƒêƒÇNG T·∫¢I GAME (M·ªöI - ƒê·∫¶Y ƒê·ª¶ TH√îNG TIN) ===
        function renderUploadPage() {
            appContainer.innerHTML = `
                <nav class="navbar">
                    <a class="logo" href="${window.location.pathname}">
                        <i class="fa-solid fa-gamepad"></i> TBN STUDIO
                    </a>
                    <div class="nav-links">
                        <a href="${window.location.pathname}">Trang ch·ªß</a>
                        <a href="#" class="active">ƒêƒÉng t·∫£i</a>
                    </div>
                </nav>

                <div class="container">
                    <div class="upload-section">
                        <div class="upload-header">
                            <h1><i class="fa-solid fa-cloud-arrow-up"></i> ƒêƒÉng t·∫£i Game M·ªõi</h1>
                            <p>Chia s·∫ª s·ª± s√°ng t·∫°o c·ªßa b·∫°n v·ªõi c·ªông ƒë·ªìng</p>
                        </div>
                        <form id="uploadFormContent">
                            <div class="form-row">
                                <div class="form-col">
                                    <label>T√™n Game <span class="required-mark">*</span>:</label>
                                    <input type="text" id="gName" required placeholder="Nh·∫≠p t√™n game...">
                                </div>
                                <div class="form-col">
                                    <label>Gi√° (VNƒê) <span class="required-mark">*</span>:</label>
                                    <input type="number" id="gPrice" placeholder="Nh·∫≠p 0 n·∫øu Mi·ªÖn ph√≠">
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-col">
                                    <label>S·ªë ng∆∞·ªùi ch∆°i <span class="required-mark">*</span>:</label>
                                    <input type="text" id="gPlayers" required placeholder="VD: Single, Multiplayer...">
                                </div>
                                <div class="form-col">
                                    <label>Th·ªÉ lo·∫°i <span class="required-mark">*</span>:</label>
                                    <input type="text" id="gGenre" required placeholder="VD: Action, RPG...">
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-col">
                                    <label>Ng∆∞·ªùi ph√°t tri·ªÉn <span class="required-mark">*</span>:</label>
                                    <input type="text" id="gDev" required placeholder="T√™n t√°c gi·∫£...">
                                </div>
                                <div class="form-col">
                                    <label>Th√¥ng tin Bank (ƒê·ªÉ nh·∫≠n ti·ªÅn):</label>
                                    <input type="text" id="gBank" placeholder="STK - Ng√¢n h√†ng - T√™n ch·ªß th·∫ª">
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Gi·ªõi thi·ªáu ng·∫Øn (Intro) <span class="required-mark">*</span>:</label>
                                <textarea id="gIntro" rows="3" required placeholder="ƒêo·∫°n gi·ªõi thi·ªáu ng·∫Øn g·ªçn ƒë·ªÉ thu h√∫t ng∆∞·ªùi ch∆°i..."></textarea>
                            </div>

                            <div class="form-group">
                                <label>√ù t∆∞·ªüng v√† C·ªët truy·ªán <span class="required-mark">*</span>:</label>
                                <textarea id="gStory" rows="5" required placeholder="M√¥ t·∫£ chi ti·∫øt c·ªët truy·ªán v√† √Ω t∆∞·ªüng game..."></textarea>
                            </div>

                            <div class="form-group">
                                <label>C√°ch ch∆°i (Gameplay) <span class="required-mark">*</span>:</label>
                                <textarea id="gGameplay" rows="3" required placeholder="H∆∞·ªõng d·∫´n ph√≠m b·∫•m, c√°ch ch∆°i..."></textarea>
                            </div>

                            <div class="form-row">
                                <div class="form-col">
                                    <label>ƒêi·ªÅu ki·ªán Th·∫Øng <span class="required-mark">*</span>:</label>
                                    <input type="text" id="gWin" required placeholder="L√†m sao ƒë·ªÉ th·∫Øng?">
                                </div>
                                <div class="form-col">
                                    <label>ƒêi·ªÅu ki·ªán Thua <span class="required-mark">*</span>:</label>
                                    <input type="text" id="gLoss" required placeholder="Khi n√†o th√¨ Game Over?">
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-col">
                                    <label>Thumbnail (·∫¢nh b√¨a) <span class="required-mark">*</span>:</label>
                                    <input type="file" id="gImage" accept="image/*" required>
                                </div>
                                <div class="form-col">
                                    <label>Link Game (Thay cho upload file):</label>
                                    <input type="text" id="gLink" placeholder="D√°n link Itch.io ho·∫∑c Drive v√†o ƒë√¢y...">
                                </div>
                            </div>

                            <button type="submit" class="btn-play" style="width: 250px; margin: 30px auto 0; display: block; font-size: 1.2rem;">
                                <i class="fa-solid fa-paper-plane"></i> ƒêƒÇNG NGAY
                            </button>
                        </form>
                    </div>
                </div>
            `;
            
            document.getElementById('uploadFormContent').addEventListener('submit', handleGameUpload);
            document.title = "ƒêƒÉng t·∫£i Game | TBN Studio";
        }

        function handleGameUpload(e) {
            e.preventDefault();
            // L·∫•y d·ªØ li·ªáu t·ª´ form
            const name = document.getElementById('gName').value;
            const price = parseInt(document.getElementById('gPrice').value) || 0;
            const players = document.getElementById('gPlayers').value;
            const genre = document.getElementById('gGenre').value;
            const developer = document.getElementById('gDev').value;
            const bank = document.getElementById('gBank').value;
            const intro = document.getElementById('gIntro').value;
            const story = document.getElementById('gStory').value;
            const gameplay = document.getElementById('gGameplay').value;
            const winCondition = document.getElementById('gWin').value;
            const lossCondition = document.getElementById('gLoss').value;
            const linkGame = document.getElementById('gLink').value || "#"; // L·∫•y link game
            const fileInput = document.getElementById('gImage');
            
            if (fileInput.files && fileInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const newGame = {
                        id: Date.now(), 
                        name: name, 
                        desc: intro, // D√πng intro l√†m desc ng·∫Øn
                        intro: intro,
                        story: story,
                        gameplay: gameplay,
                        winCondition: winCondition,
                        lossCondition: lossCondition,
                        price: price, 
                        bankInfo: bank,
                        img: e.target.result, 
                        genre: genre, 
                        players: players, 
                        developer: developer, 
                        release: new Date().toLocaleDateString('vi-VN'), // Ng√†y hi·ªán t·∫°i
                        videoUrl: "https://www.youtube.com/embed/n4yK54iF55g?autoplay=1&mute=1", // Video m·∫∑c ƒë·ªãnh
                        downloadUrl: linkGame // L∆∞u link t·∫£i
                    };
                    
                    // Th√™m v√†o m·∫£ng hi·ªán t·∫°i
                    currentGames.unshift(newGame);
                    // L∆ØU V√ÄO LOCAL STORAGE ƒê·ªÇ KH√îNG M·∫§T D·ªÆ LI·ªÜU
                    saveCustomGame(newGame);
                    
                    alert("ƒêƒÉng t·∫£i game th√†nh c√¥ng! D·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c l∆∞u v√†o tr√¨nh duy·ªát.");
                    window.location.href = window.location.pathname; // Quay v·ªÅ trang ch·ªß
                }
                reader.readAsDataURL(fileInput.files[0]);
            }
        }

        // ... [C√ÅC H√ÄM RENDER GAME, CART, DETAIL C≈®] ...
        function renderGames(games, gridElement) {
            gridElement.innerHTML = "";
            const cart = getCart();
            const library = getLibrary();

            if(games.length === 0) {
                gridElement.innerHTML = "<p style='text-align:center; color:#666; grid-column: 1/-1;'>Kh√¥ng t√¨m th·∫•y game n√†o...</p>";
                return;
            }
            games.forEach(game => {
                const isFree = game.price == 0;
                const isOwned = library.includes(game.id);
                const isInCart = cart.includes(game.id);

                let priceDisplay = isFree ? "FREE" : formatter.format(game.price);
                let priceClass = isFree ? "free" : "";
                if (isOwned) { priceDisplay = "OWNED"; priceClass = "owned"; }
                const bankDisplayClass = (!isFree && game.bankInfo) ? "show-bank" : "";

                let buttonHtml = '';
                if (isOwned) {
                      buttonHtml = `
                        <div class="card-actions">
                             <button onclick="openGameDetail(${game.id})" class="btn-secondary" style="flex:1;">Chi ti·∫øt</button>
                             <button onclick="goToCartView()" class="btn-play" style="flex:1; background:var(--success-color); color:white;">ƒê√£ s·ªü h·ªØu</button>
                        </div>`;
                } else if (isFree) {
                      buttonHtml = `
                        <div class="card-actions">
                            <button onclick="openGameDetail(${game.id})" class="btn-play">CH∆†I NGAY</button>
                        </div>`;
                } else {
                    buttonHtml = `
                        <div class="card-actions">
                             <button onclick="openGameDetail(${game.id})" class="btn-play">MUA NGAY</button>
                             <button onclick="addToCart(${game.id})" class="btn-secondary ${isInCart ? 'added' : ''}" title="${isInCart ? 'ƒê√£ trong gi·ªè' : 'Th√™m v√†o gi·ªè'}">
                                <i class="fa-solid ${isInCart ? 'fa-check' : 'fa-cart-plus'}"></i>
                             </button>
                        </div>`;
                }

                const card = document.createElement('div');
                card.className = 'game-card';
                card.innerHTML = `
                    <div class="price-tag ${priceClass}">${priceDisplay}</div>
                    <div class="game-thumb"><img src="${game.img}" alt="${game.name}"></div>
                    <div class="game-info">
                        <h3 class="game-title">${game.name}</h3>
                        <p class="game-desc">${game.desc}</p>
                        <div class="bank-info-display ${bankDisplayClass}">üí≥ CK: ${game.bankInfo}</div>
                        ${buttonHtml}
                    </div>
                `;
                gridElement.appendChild(card);
            });
        }

        // === 5.2 TRANG GI·ªé H√ÄNG (CART PAGE) ===
        function renderCartPage() {
            const cartIds = getCart();
            const libraryIds = getLibrary();
            // C·∫ßn l·∫•y c·∫£ game custom n·∫øu c√≥ trong gi·ªè (load l·∫°i t·ª´ LS ƒë·ªÉ ch·∫Øc ch·∫Øn)
            const allGames = [...initialGames, ...getStoredGames()];
            const cartItemsFull = allGames.filter(g => cartIds.includes(g.id));
            const ownedItemsFull = allGames.filter(g => libraryIds.includes(g.id));

            const total = cartItemsFull.reduce((sum, item) => sum + item.price, 0);

            let cartHtml = '';
            if (cartItemsFull.length === 0) {
                cartHtml = '<div class="empty-cart-msg"><h3>Gi·ªè h√†ng tr·ªëng!</h3><p>H√£y quay l·∫°i trang ch·ªß ƒë·ªÉ t√¨m th√™m game hay nh√©.</p></div>';
            } else {
                cartHtml = `
                    <table class="cart-table">
                        <thead>
                            <tr><th>Game</th><th>Gi√°</th><th>H√†nh ƒë·ªông</th></tr>
                        </thead>
                        <tbody>
                            ${cartItemsFull.map(item => `
                                <tr>
                                    <td style="display:flex; gap:15px; align-items:center;">
                                        <img src="${item.img}" class="cart-item-img">
                                        <strong>${item.name}</strong>
                                    </td>
                                    <td>${formatter.format(item.price)}</td>
                                    <td><button class="btn-remove" onclick="removeFromCart(${item.id})"><i class="fa-solid fa-trash"></i></button></td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                    <div class="cart-total">T·ªïng c·ªông: ${formatter.format(total)}</div>
                    <div style="background: #fff3cd; padding: 15px; margin-top: 20px; border-radius: 10px; border: 1px solid #ffeeba;">
                         <strong><i class="fa-solid fa-circle-info"></i> Th√¥ng tin thanh to√°n:</strong><br>
                         C√°c game trong gi·ªè s·∫Ω ƒë∆∞·ª£c thanh to√°n qua chuy·ªÉn kho·∫£n. Vui l√≤ng nh·∫•n n√∫t b√™n d∆∞·ªõi ƒë·ªÉ x√°c nh·∫≠n ƒë√£ chuy·ªÉn kho·∫£n v√† nh·∫≠n game.
                    </div>
                    <button class="btn-checkout" onclick="processCheckout()"><i class="fa-regular fa-credit-card"></i> THANH TO√ÅN NGAY</button>
                `;
            }

            let ownedHtml = '';
            if (ownedItemsFull.length > 0) {
                ownedHtml = `
                    <h2 style="margin-top:50px; border-color: var(--success-color);">Th∆∞ vi·ªán Game ƒë√£ s·ªü h·ªØu</h2>
                    <div class="owned-list">
                        ${ownedItemsFull.map(item => `
                            <div class="owned-item">
                                <img src="${item.img}" style="width:100%; height:100px; object-fit:cover; border-radius:5px; margin-bottom:10px;">
                                <h4>${item.name}</h4>
                                <a href="${window.location.pathname}?game=${item.id}" style="display:block; margin-top:5px; text-decoration:none; color:var(--primary-color); font-weight:bold;">T·∫£i / Ch∆°i</a>
                            </div>
                        `).join('')}
                    </div>
                `;
            }

            appContainer.innerHTML = `
                <nav class="navbar">
                    <a class="logo" href="${window.location.pathname}">
                        <i class="fa-solid fa-gamepad"></i> TBN STUDIO
                    </a>
                    <div class="nav-links">
                        <a href="${window.location.pathname}">Trang ch·ªß</a>
                        <a href="#" class="active">Gi·ªè h√†ng</a>
                    </div>
                </nav>
                <div class="container cart-section">
                    <h1><i class="fa-solid fa-cart-shopping"></i> Gi·ªè h√†ng c·ªßa b·∫°n</h1>
                    ${cartHtml}
                    ${ownedHtml}

                    <div style="margin-top: 50px; border-top: 1px solid #ccc; padding-top: 20px; text-align: center;">
                        <p style="color: #666; font-style: italic;">Mu·ªën th·ª≠ nghi·ªám l·∫°i t·ª´ ƒë·∫ßu?</p>
                        <button class="btn-reset" onclick="resetLibrary()">
                            <i class="fa-solid fa-rotate-right"></i> Reset tr·∫°ng th√°i ƒë√£ mua & Game ƒë√£ ƒëƒÉng
                        </button>
                    </div>
                </div>
            `;
            document.title = "Gi·ªè h√†ng | TBN Studio";
        }

        // === 5.3 TRANG CHI TI·∫æT (ƒê√É UPDATE N√öT PLAY) ===
        function renderDetailPage(game) {
            const library = getLibrary();
            const isOwned = library.includes(game.id);
            const isFree = game.price == 0;
            const priceDisplay = isFree ? "FREE" : formatter.format(game.price);

            const storyText = formatGameText(game.story || "ƒêang c·∫≠p nh·∫≠t...");
            const gameplayText = formatGameText(game.gameplay || "S·ª≠ d·ª•ng b√†n ph√≠m v√† chu·ªôt.");
            const winText = formatGameText(game.winCondition || "Ho√†n th√†nh m·ª•c ti√™u.");
            const lossText = formatGameText(game.lossCondition || "H·∫øt m·∫°ng.");
            const introText = formatGameText(game.intro || game.desc);
            
            // X·ª≠ l√Ω link t·∫£i (n·∫øu kh√¥ng c√≥ link th√¨ d√πng #)
            const downloadLink = game.downloadUrl || "#";
            const downloadAction = `window.open('${downloadLink}', '_blank')`;

            // X·ª≠ l√Ω Rating
            const currentRating = getGameRating(game.id);
            let ratingHtml = '';
            for(let i=1; i<=5; i++) {
                const activeClass = i <= currentRating ? 'active' : '';
                ratingHtml += `<i class="fa-solid fa-star star-icon ${activeClass}" onclick="submitRating(${game.id}, ${i})"></i>`;
            }

            let mainButtonHtml = '';
            if (isOwned || isFree) {
                mainButtonHtml = `
                    <button onclick="${downloadAction}" 
                            class="btn-play" style="width: 250px; margin-top: 20px; background: var(--primary-color); color: white; box-shadow: 0 4px 0 var(--primary-dark);">
                        <i class="fa-solid fa-download"></i> T·∫¢I V√Ä CH∆†I NGAY
                    </button>`;
            } else {
                mainButtonHtml = `
                    <button onclick="buyNowFromDetail(${game.id})" 
                            class="btn-play" style="width: 250px; margin-top: 20px; background: var(--accent-pink); color: white; box-shadow: 0 4px 0 #d63031;">
                        <i class="fa-solid fa-cart-plus"></i> MUA V√Ä T·∫¢I (${priceDisplay})
                    </button>
                    <p style="margin-top:10px; font-size:0.9rem; color:#666;">*Game s·∫Ω ƒë∆∞·ª£c th√™m v√†o gi·ªè v√† chuy·ªÉn ƒë·∫øn trang thanh to√°n.</p>`;
            }

            appContainer.innerHTML = `
                <nav class="navbar">
                    <a class="logo" href="${window.location.pathname}">
                        <i class="fa-solid fa-gamepad"></i> TBN STUDIO
                    </a>
                    <div class="nav-links">
                        <a href="${window.location.pathname}">Trang ch·ªß</a>
                        <div class="icon-btn" onclick="openCartInNewTab()">
                             <i class="fa-solid fa-cart-shopping"></i>
                             <span class="cart-badge" style="display:none">0</span>
                        </div>
                    </div>
                </nav>

                <div class="container">
                    <div class="detail-header">
                        <h1>${game.name}</h1>
                        <p>T√°c gi·∫£: ${game.developer}</p>
                        ${mainButtonHtml}
                    </div>

                    <div class="detail-grid">
                        <div class="main-content">
                            <div class="video-player">
                                <iframe src="${game.videoUrl}" allow="autoplay; encrypted-media" allowfullscreen></iframe>
                            </div>
                            <div class="intro-box">
                                <h2><i class="fa-regular fa-star" style="color: var(--accent-yellow);"></i> Gi·ªõi thi·ªáu chung</h2>
                                <div class="intro-content">${introText}</div>
                            </div>
                            <div class="story-section">
                                <h2 style="border-left: 8px solid var(--accent-pink);">üìñ C·ªët truy·ªán & √ù t∆∞·ªüng</h2>
                                <div class="story-box">${storyText}</div>
                                <h2 style="margin-top: 30px;">üéÆ H∆∞·ªõng d·∫´n ch∆°i</h2>
                                <div class="gameplay-box">
                                    <strong>C√°ch ƒëi·ªÅu khi·ªÉn:</strong> ${gameplayText}
                                    <ul class="win-loss-list">
                                        <li>
                                            <i class="fa-solid fa-trophy" style="color: gold; font-size: 1.2rem; margin-top: 5px;"></i> 
                                            <div style="flex:1;"><strong>Th·∫Øng:</strong> ${winText}</div>
                                        </li>
                                        <li>
                                            <i class="fa-solid fa-skull" style="color: #ff7675; font-size: 1.2rem; margin-top: 5px;"></i> 
                                            <div style="flex:1;"><strong>Thua:</strong> ${lossText}</div>
                                        </li>
                                    </ul>
                                </div>
                                ${!isFree ? `
                                <div class="purchase-note">
                                    <i class="fa-solid fa-triangle-exclamation" style="font-size: 1.5rem;"></i>
                                    <div>
                                        <strong>L∆∞u √Ω mua game:</strong><br>
                                        Vui l√≤ng chuy·ªÉn kho·∫£n s·ªë ti·ªÅn <strong>${priceDisplay}</strong> ƒë·∫øn STK: <strong>${game.bankInfo}</strong>.
                                    </div>
                                </div>` : ''}
                            </div>
                        </div>

                        <div class="game-specs">
                            <h3>üîç Th√¥ng s·ªë k·ªπ thu·∫≠t</h3>
                            <div class="spec-item"><strong>Th·ªÉ lo·∫°i:</strong> <span>${game.genre}</span></div>
                            <div class="spec-item"><strong>S·ªë ng∆∞·ªùi ch∆°i:</strong> <span>${game.players}</span></div>
                            <div class="spec-item"><strong>Ph√°t tri·ªÉn b·ªüi:</strong> <span>${game.developer}</span></div>
                            <div class="spec-item"><strong>Ng√†y ƒëƒÉng t·∫£i:</strong> <span>${game.release}</span></div>
                            <div class="spec-item"><strong>Gi√° ti·ªÅn:</strong> <span style="color: var(--accent-pink); font-weight:bold;">${priceDisplay}</span></div>
                            <div class="spec-item" style="margin-top:15px; border-top:1px solid #eee; padding-top:10px;">
                                <strong>Tr·∫°ng th√°i:</strong> <br> <span style="color: green; font-weight:bold;">ƒêang ph√°t h√†nh</span>
                            </div>

                            <div class="rating-box">
                                <div class="rating-title">ƒê√°nh gi√° game n√†y:</div>
                                <div class="stars-container">
                                    ${ratingHtml}
                                </div>
                                ${currentRating > 0 ? `<div class="user-rated-msg">B·∫°n ƒë√£ ch·∫•m ${currentRating}/5 sao</div>` : ''}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.title = `${game.name} - Chi ti·∫øt | TBN Studio`;
            updateCartBadge();
        }

        function buyNowFromDetail(gameId) {
            let cart = getCart();
            if(!cart.includes(gameId)) {
                cart.push(gameId);
                saveCart(cart);
            }
            window.location.href = `${window.location.pathname}?view=cart`;
        }

        // === 6. MAIN INIT ===
        document.addEventListener('DOMContentLoaded', function() {
            const gameId = getQueryParam('game');
            const view = getQueryParam('view');

            if (view === 'cart') {
                renderCartPage();
            } else if (view === 'upload') {
                renderUploadPage();
            } else if (gameId) {
                // L·∫•y game t·ª´ danh s√°ch t·ªïng h·ª£p (g·ªëc + custom)
                const selectedGame = currentGames.find(g => g.id == gameId);
                selectedGame ? renderDetailPage(selectedGame) : (alert("Game kh√¥ng t·ªìn t·∫°i!"), renderHomePage());
            } else {
                renderHomePage();
            }
        });
    </script>
</body>
</html> -->

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TR√ÄN B·ªò NH·ªö - Game Marketplace</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- CSS GI·ªÆ NGUY√äN NH∆Ø C≈® --- */
        :root {
            --bg-gradient-1: #87CEEB; 
            --bg-gradient-2: #E0F7FA; 
            --card-bg: rgba(255, 255, 255, 0.95);
            --text-color: #2c3e50;
            --primary-color: #00a8ff;
            --primary-dark: #0984e3;
            --accent-yellow: #fbc531;
            --accent-pink: #ff7675;
            --nav-bg: rgba(255, 255, 255, 0.9); 
            --font-main: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            --success-color: #2ecc71;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            color: var(--text-color);
            font-family: var(--font-main);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            background-color: #87CEEB;
            background: linear-gradient(180deg, var(--bg-gradient-1) 0%, var(--bg-gradient-2) 100%);
        }

        /* --- NAVBAR STYLES --- */
        .navbar {
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 15px 30px;
            background: var(--nav-bg); 
            backdrop-filter: blur(10px); 
            position: sticky; 
            top: 0;
            z-index: 1000; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
            border-bottom: 1px solid rgba(255,255,255,0.5);
        }

        .logo {
            font-size: 1.5rem; 
            font-weight: 900; 
            color: var(--primary-color); 
            text-transform: uppercase;
            letter-spacing: 1px; 
            text-decoration: none;
            display: flex; 
            align-items: center; 
            gap: 10px;
        }
        .logo i { color: var(--accent-yellow); font-size: 1.8rem; }

        .nav-links { display: flex; gap: 25px; font-weight: 600; align-items: center; }
        .nav-links a { text-decoration: none; color: #555; transition: 0.3s; position: relative; font-size: 1rem; cursor: pointer; }
        .nav-links a:hover, .nav-links a.active { color: var(--primary-color); }
        .nav-links a::after {
            content: ''; position: absolute; width: 0; height: 3px; bottom: -5px; left: 0;
            background: var(--accent-yellow); transition: width 0.3s; border-radius: 2px;
        }
        .nav-links a:hover::after { width: 100%; }

        /* --- CSS DROPDOWN TH·ªÇ LO·∫†I --- */
        .dropdown { position: relative; display: flex; align-items: center; height: 100%; }
        
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #fff;
            min-width: 220px;
            max-height: 400px; 
            overflow-y: auto; 
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            z-index: 1001;
            border-radius: 10px;
            padding: 10px 0;
            top: 100%; 
            left: 0;
            border: 1px solid rgba(0,0,0,0.05);
            margin-top: 10px; 
        }
        .dropdown-content::-webkit-scrollbar { width: 5px; }
        .dropdown-content::-webkit-scrollbar-thumb { background: #ccc; border-radius: 5px; }
        .dropdown-content::before {
            content: ""; position: absolute; top: -15px; left: 0; width: 100%; height: 20px; background: transparent;
        }
        .dropdown-content a {
            color: #333; padding: 12px 20px; text-decoration: none; display: block; font-size: 0.95rem; transition: 0.2s; border-bottom: 1px solid #f5f5f5;
        }
        .dropdown-content a:last-child { border-bottom: none; }
        .dropdown-content a:hover {
            background-color: var(--bg-gradient-2); color: var(--primary-color); padding-left: 25px; 
        }
        .dropdown:hover .dropdown-content { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .nav-actions { display: flex; align-items: center; gap: 15px; }
        
        .search-box {
            position: relative; background: #f1f2f6; border-radius: 30px; padding: 5px 15px;
            display: flex; align-items: center; border: 2px solid transparent; transition: 0.3s;
        }
        .search-box:focus-within { border-color: var(--primary-color); background: #fff; }
        .search-box input {
            border: none; background: transparent; outline: none; padding: 5px; width: 150px; color: #333; font-size: 0.9rem;
        }
        .search-box i { color: #aaa; }

        .icon-btn { font-size: 1.2rem; color: #555; cursor: pointer; position: relative; transition: 0.3s; }
        .icon-btn:hover { color: var(--primary-color); transform: scale(1.1); }
        
        .cart-badge {
            position: absolute; top: -8px; right: -8px; background: var(--accent-pink); color: white;
            font-size: 0.7rem; width: 18px; height: 18px; border-radius: 50%; display: flex; 
            justify-content: center; align-items: center; font-weight: bold;
        }

        .btn-login {
            background: var(--primary-color); color: white; border: none; padding: 8px 20px; 
            border-radius: 20px; font-weight: bold; cursor: pointer; transition: 0.3s;
            box-shadow: 0 4px 10px rgba(0, 168, 255, 0.3);
        }
        .btn-login:hover { background: var(--primary-dark); transform: translateY(-2px); }

        /* --- HERO SECTION --- */
        .hero { text-align: center; padding: 60px 20px 40px; }
        .hero h1 {
            font-size: 3rem; color: var(--primary-color); text-shadow: 3px 3px 0px #fff; margin-bottom: 10px;
        }
        .hero p { background: #fff; display: inline-block; padding: 5px 20px; border-radius: 20px; color: #666; font-weight: 600; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }

        /* --- MAIN CONTAINER & GRID --- */
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        h2 { border-left: 8px solid var(--accent-yellow); padding-left: 20px; margin: 30px 0; text-transform: uppercase; color: var(--primary-color); font-weight: 800; }
        
        .game-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 30px; }
        
        .game-card {
            background: var(--card-bg); border-radius: 20px; overflow: hidden; transition: all 0.3s;
            box-shadow: 0 10px 25px rgba(0, 168, 255, 0.15); position: relative;
            border: 2px solid transparent; display: flex; flex-direction: column;
        }
        .game-card:hover { transform: translateY(-10px); border-color: var(--accent-yellow); }
        
        .price-tag { position: absolute; top: 15px; right: 15px; background: var(--accent-pink); color: #fff; padding: 5px 12px; border-radius: 20px; font-weight: bold; font-size: 0.85rem; z-index: 2; }
        .price-tag.free { background: var(--primary-color); }
        .price-tag.owned { background: var(--success-color); }
        
        .game-thumb { width: 100%; height: 180px; overflow: hidden; }
        .game-thumb img { width: 100%; height: 100%; object-fit: cover; display: block; transition: transform 0.3s; }
        .game-card:hover .game-thumb img { transform: scale(1.05); }

        .game-info { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; }
        .game-title { font-size: 1.3rem; color: var(--primary-color); margin-bottom: 5px; font-weight: 700; }
        .game-desc { font-size: 0.9rem; color: #666; margin-bottom: 15px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        
        .bank-info-display { background: #f0f9ff; padding: 10px; margin-top: 10px; border-radius: 8px; font-size: 0.85rem; color: #555; border-left: 3px solid var(--primary-color); display: none; margin-bottom: 10px;}
        .show-bank { display: block; }

        .card-actions { margin-top: auto; display: flex; gap: 10px; width: 100%; }
        
        .btn-play { 
            flex: 2; padding: 10px; background: var(--accent-yellow); color: #2c3e50; border: none; 
            border-radius: 30px; font-weight: 800; cursor: pointer; transition: 0.2s; box-shadow: 0 3px 0 #e1b12c; text-align: center;
        }
        .btn-play:hover { background: #fcd567; transform: translateY(-2px); }
        .btn-play:active { transform: translateY(2px); box-shadow: none; }

        .btn-secondary {
            flex: 1; padding: 10px; background: #fff; color: var(--primary-color); border: 2px solid var(--primary-color);
            border-radius: 30px; font-weight: bold; cursor: pointer; transition: 0.2s; display: flex; align-items: center; justify-content: center; text-align: center;
        }
        .btn-secondary:hover { background: var(--primary-color); color: white; }
        .btn-secondary.added { background: #ddd; color: #666; border-color: #ddd; cursor: not-allowed; }

        .btn-reset {
            background-color: #ff7675; color: white; border: none; padding: 10px 20px; border-radius: 30px;
            font-weight: bold; cursor: pointer; margin-top: 15px; transition: 0.3s;
        }
        .btn-reset:hover { background-color: #d63031; transform: translateY(-2px); }

        /* --- FORM UPLOAD (NEW) --- */
        .upload-section { background: #fff; padding: 40px; border-radius: 20px; margin-top: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .form-row { display: flex; gap: 20px; margin-bottom: 20px; }
        .form-col { flex: 1; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; color: var(--primary-color); font-weight: 700; font-size: 1rem; }
        input, textarea, select { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #ddd; background: #f9f9f9; outline: none; transition: 0.3s; }
        input:focus, textarea:focus, select:focus { border-color: var(--primary-color); background: #fff; box-shadow: 0 0 5px rgba(0, 168, 255, 0.2); }
        .upload-header { text-align: center; margin-bottom: 30px; }
        .upload-header h1 { color: var(--primary-color); font-size: 2.5rem; }
        .required-mark { color: red; font-weight: bold; }

        /* --- FOOTER --- */
        footer { text-align: center; padding: 40px; margin-top: 60px; color: #fff; background: var(--primary-color); font-weight: bold; }

        /* --- DETAIL PAGE STYLES --- */
        .detail-header { text-align: left; padding-top: 20px; margin-bottom: 30px; }
        .detail-header h1 { font-size: 3rem; color: var(--text-color); text-shadow: none; margin-bottom: 5px; }
        .detail-header p { background: var(--card-bg); padding: 5px 10px; border-radius: 10px; color: #555; font-weight: 600; display: inline-block; }

        .detail-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 30px; align-items: start; }
        .video-player { width: 100%; height: 450px; background: #000; border-radius: 15px; overflow: hidden; box-shadow: 0 10px 20px rgba(0,0,0,0.2); position: relative; }
        .video-player iframe { width: 100%; height: 100%; border: none; }

        .game-specs { background: var(--card-bg); padding: 30px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .game-specs h3 { color: var(--primary-dark); margin-bottom: 15px; border-bottom: 3px solid var(--accent-yellow); padding-bottom: 5px; }
        .spec-item { margin-bottom: 10px; font-size: 0.95rem; }
        .spec-item strong { color: var(--text-color); display: inline-block; width: 110px; }
        
        /* --- RATING STYLES --- */
        .rating-box { background: #fff; margin-top: 20px; padding: 20px; border-radius: 15px; text-align: center; border: 2px dashed #eee; }
        .rating-title { font-weight: bold; margin-bottom: 10px; color: #555; }
        .stars-container { display: flex; justify-content: center; gap: 10px; font-size: 2rem; cursor: pointer; }
        .star-icon { color: #ccc; transition: 0.2s; }
        .star-icon:hover, .star-icon.active { color: #f1c40f; transform: scale(1.2); }
        .user-rated-msg { margin-top: 10px; color: var(--success-color); font-weight: bold; font-size: 0.9rem; }

        .story-section { margin-top: 30px; }
        .story-box { background: var(--card-bg); padding: 25px; border-radius: 15px; margin-top: 15px; color: #333; line-height: 1.6; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .gameplay-box { background: var(--card-bg); padding: 25px; border-radius: 15px; margin-top: 15px; color: #333; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .win-loss-list { list-style: none; padding-left: 0; margin-top: 15px; }
        .win-loss-list li { margin-bottom: 10px; display: flex; align-items: flex-start; gap: 10px; }
        .purchase-note { background: #fff3cd; color: #856404; padding: 15px; border-radius: 10px; margin-top: 20px; border: 1px solid #ffeeba; display: flex; align-items: center; gap: 10px; }

        /* --- CSS CHO PH·∫¶N GI·ªöI THI·ªÜU --- */
        .intro-box { background: linear-gradient(to right, #ffffff, #f0f9ff); padding: 25px; border-radius: 15px; margin-top: 25px; border: 1px solid #e1e1e1; border-left: 6px solid var(--primary-color); box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .intro-box h2 { border-left: none; padding-left: 0; margin-top: 0; margin-bottom: 15px; display: flex; align-items: center; gap: 10px; font-size: 1.5rem; }
        .intro-content { font-size: 1.1rem; color: #444; font-weight: 500; }
        .custom-list { margin-left: 20px; margin-bottom: 15px; }
        .custom-list li { margin-bottom: 5px; list-style-type: disc; }
        .content-paragraph { margin-bottom: 15px; }

        /* --- CSS CHO TRANG GI·ªé H√ÄNG --- */
        .cart-section { margin-top: 20px; }
        .cart-table { width: 100%; border-collapse: collapse; background: #fff; border-radius: 10px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .cart-table th, .cart-table td { padding: 15px; text-align: left; border-bottom: 1px solid #eee; }
        .cart-table th { background: var(--primary-color); color: white; }
        .cart-item-img { width: 80px; height: 50px; object-fit: cover; border-radius: 5px; }
        .cart-total { text-align: right; margin-top: 20px; font-size: 1.5rem; font-weight: bold; color: var(--text-color); }
        .btn-remove { color: var(--accent-pink); background: none; border: none; cursor: pointer; font-size: 1.2rem; }
        .btn-remove:hover { color: #d63031; }
        .btn-checkout { display: block; width: 100%; max-width: 300px; margin: 30px 0 0 auto; background: var(--success-color); color: white; font-size: 1.2rem; padding: 15px; border: none; border-radius: 50px; font-weight: bold; cursor: pointer; box-shadow: 0 5px 15px rgba(46, 204, 113, 0.4); transition: 0.3s; }
        .btn-checkout:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(46, 204, 113, 0.6); }
        .empty-cart-msg { text-align: center; padding: 50px; background: rgba(255,255,255,0.8); border-radius: 15px; }
        .owned-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; margin-top: 20px; }
        .owned-item { background: #fff; padding: 10px; border-radius: 10px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); border-bottom: 3px solid var(--success-color); }

        /* --- RESPONSIVE --- */
        @media (max-width: 900px) { .detail-grid { grid-template-columns: 1fr; } .video-player { height: 300px; } }
        @media (max-width: 768px) {
            .navbar { flex-direction: column; gap: 15px; padding: 15px; }
            .nav-links { gap: 15px; font-size: 0.9rem; width: 100%; justify-content: center; }
            .nav-actions { width: 100%; justify-content: space-between; }
            .search-box input { width: 100%; }
            .form-row { flex-direction: column; gap: 0; }
        }
    </style>
</head>
<body>

    <div id="app-container">
    </div>

    <footer>
        <p>&copy; 2025 Nh√≥m TR√ÄN B·ªò NH·ªö.</p>
    </footer>

    <script>
        // --- 1. D·ªÆ LI·ªÜU GAME (DATABASE) ---
        const initialGames = [
            // --- C√ÅC GAME G·ªêC (1-6) - ƒê√É KH√îI PH·ª§C N·ªòI DUNG G·ªêC ---
            { 
                id: 1, 
                name: "Magician vs. Goblin", 
                desc: "ƒê·∫°i chi·∫øn ·∫£o thu·∫≠t gia v√† qu√°i v·∫≠t Goblin. Game nh·∫≠p vai h√†nh ƒë·ªông.", 
                intro: `B·∫°n c√≥ th·ªÉ s·ªëng s√≥t kh·ªèi b·∫ßy Goblin kh√¥ng?
                
                Magician vs Goblin l√† game h√†nh ƒë·ªông s·ªëng c√≤n nh·ªãp ƒë·ªô nhanh, n∆°i b·∫°n v√†o vai m·ªôt Ph√°p S∆∞ tr·∫ª b·ªã bao v√¢y b·ªüi l≈© Goblin hung h√£n. B·∫°n ch·ªâ c√≥ m·ªôt m√¨nh ‚Äî nh∆∞ng s·ªü h·ªØu ma thu·∫≠t m·∫°nh m·∫Ω. M·ªói gi√¢y l√† m·ªôt tr·∫≠n chi·∫øn sinh t·ªìn khi b·∫°n ph·∫£i v·ª´a n√©, v·ª´a b·∫Øn ph√©p, v·ª´a c·ªë g·∫Øng duy tr√¨ m·∫°ng s·ªëng gi·ªØa s·ªë l∆∞·ª£ng Goblin tƒÉng d·∫ßn theo th·ªùi gian.
                
                C√°c quy·∫øt ƒë·ªãnh c·ªßa b·∫°n ƒë·ªÅu quan tr·ªçng !!!
                
                Li·ªáu b·∫°n c√≥ th·ªÉ tr·ª• ƒë·∫øn cu·ªëi tr·∫≠n, hay s·∫Ω b·ªã ƒë√†n Goblin nu·ªët ch·ª≠ng gi·ªØa chi·∫øn tr∆∞·ªùng?`,
                price: 50000, 
                bankInfo: "999999 - Techcombank - VO MINH TRIET", 
                img: "GameImage/game1.png", 
                genre: "2D Action, Top-down Shooter, Survival Combat", 
                players: "Single", 
                developer: "V√µ Minh Tri·∫øt", 
                release: "07/11/2025", 
                videoUrl: "https://www.youtube.com/embed/kS1iZw9P5O0",
                downloadUrl: "https://vominhtriet.itch.io/blackmagician-vs-goblin", 
                story: `√ù t∆∞·ªüng c·ªët l√µi:
                
                + Ti√™u di·ªát c√†ng nhi·ªÅu Goblin c√†ng t·ªët.
                + S·ªëng c√†ng l√¢u c√†ng t·ªët.
                + C∆° ch·∫ø ch∆°i nhanh, tr·ª±c quan, mang t√≠nh ph·∫£n x·∫° cao.
                + To√†n b·ªô h√†nh ƒë·ªông th·ª±c hi·ªán tr·ª±c ti·∫øp trong gameplay kh√¥ng c·∫ßn menu ph·ª©c t·∫°p.

                C·ªët truy·ªán:
                
                B·∫°n l√† m·ªôt Ph√°p S∆∞ h·ªçc vi·ªác ƒëang th·ª±c t·∫≠p t·∫°i v√πng r·ª´ng ma thu·∫≠t. Trong l√∫c thi·ªÅn luy·ªán, m·ªôt c√°nh c·ªïng qu√°i v·∫≠t ƒë·ªôt ng·ªôt m·ªü ra, gi·∫£i ph√≥ng Goblin t·ª´ chi·ªÅu kh√¥ng gian kh√°c.
                
                Nhi·ªám v·ª• c·ªßa b·∫°n ph·∫£i tr·ª±c ti·∫øp c·∫ßm c·ª± v√† ti√™u di·ªát nhi·ªÅu goblin nh·∫•t c√≥ th·ªÉ ƒë·ªÉ ch·ªù vi·ªán binh ƒë·∫øn !`,
                gameplay: `Di chuy·ªÉn: n√∫t di chuy·ªÉn ho·∫∑c chu·ªôt 
                Ng·∫Øm: theo h∆∞·ªõng chu·ªôt.
                B·∫Øn ph√©p: Nh·∫•n/gi·ªØ chu·ªôt tr√°i ‚Üí b·∫Øn Spell.`,
                winCondition: `Kh√¥ng c√≥ ƒëi·ªÅu ki·ªán th·∫Øng c·ªë ƒë·ªãnh. B·∫°n c√†ng s·ªëng l√¢u ‚Üí c√†ng ‚Äúth·∫Øng‚Äù.`,
                lossCondition: "Game Over ngay l·∫≠p t·ª©c khi: Player HP = 0 (b·ªã Goblin t·∫•n c√¥ng qu√° nhi·ªÅu)."
            },
            { 
                id: 2, 
                name: "Sinh Vi√™n sinh t·ªìn", 
                desc: "S·ªëng s√≥t qua 30 ng√†y c√πng nh·ªØng bi·∫øn c·ªë b·∫•t ng·ªù th·ªùi Sinh vi√™n.", 
                intro: `Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi chi·∫øn tr∆∞·ªùng kh·ªëc li·ªát nh·∫•t: ƒê·∫°i H·ªçc! Kh√¥ng c√≥ s√∫ng ƒë·∫°n, k·∫ª th√π c·ªßa b·∫°n l√† 'Deadline', 'M√¨ t√¥m' v√† 'H·∫øt ti·ªÅn'.
                B·∫°n c√≥ th·ªÉ TR·ª§ t·ªõi ng√†y cu·ªëi c√πng ƒë∆∞·ª£c kh√¥ng?
                
                Survival Sinh Vi√™n l√† game m√¥ ph·ªèng qu·∫£n l√Ω t√†i nguy√™n cƒÉng th·∫≥ng, n∆°i b·∫°n v√†o vai sinh vi√™n nƒÉm nh·∫•t c·ªë g·∫Øng s·ªëng s√≥t qua 30 ng√†y ƒë·∫ßu ti√™n v·ªõi m·ªôt kho·∫£n tr·ª£ c·∫•p eo h·∫πp.
                
                M·ªói ng√†y l√† m·ªôt th·ª≠ th√°ch: C√¢n b·∫±ng gi·ªØa vi·ªác ƒÉn u·ªëng, h·ªçc t·∫≠p v√† ki·ªÉm so√°t Stress! M·ªçi l·ª±a ch·ªçn ƒë·ªÅu quan tr·ªçng. B·∫°n s·∫Ω ƒÉn m√¨ g√≥i hay m·∫°o hi·ªÉm mua c∆°m b·ª•i? D√†nh ti·ªÅn s·ª≠a xe hay b·ªè h·ªçc ƒë·ªÉ ng·ªß b√π?
                
                ‚ö†Ô∏è C·∫©n th·∫≠n: Ch·ªâ s·ªë Ti·ªÅn, S·ª©c kh·ªèe, ƒê·ªô no, ho·∫∑c Stress v∆∞·ª£t ng∆∞·ª°ng s·∫Ω d·∫´n ƒë·∫øn Game Over ngay l·∫≠p t·ª©c!
                
                Li·ªáu b·∫°n c√≥ th·ªÉ chi·∫øn th·∫Øng ƒë·ªãnh m·ªánh, hay s·∫Ω ph·∫£i "b·ªè h·ªçc v·ªÅ qu√™" tr∆∞·ªõc Ng√†y 30? Ch∆°i ngay v√† t√¨m c√¢u tr·∫£ l·ªùi!`,
                price: 0, 
                bankInfo: "", 
                img: "GameImage/game2.png", 
                genre: "2D Simulator, Resource management, Visual / Text-driven", 
                players: "Single", 
                developer: "V√µ Ng·ªçc B·∫£o Tr√¢n", 
                release: "08/11/2025", 
                videoUrl: "https://www.youtube.com/embed/7rkcFUS7tNI",
                downloadUrl: "https://barotrun.itch.io/sinhvien-sinhton", 
                story: `√ù t∆∞·ªüng c·ªët l√µi c·ªßa tr√≤ ch∆°i l√† m√¥ ph·ªèng l·∫°i cu·ªôc chi·∫øn sinh t·ªìn ƒë√¥ th·ªã c·ªßa m·ªôt sinh vi√™n nƒÉm nh·∫•t t·∫°i Vi·ªát Nam. Ng∆∞·ªùi ch∆°i ph·∫£i s·ªëng s√≥t qua 30 ng√†y v·ªõi ng√¢n s√°ch h·∫°n h·∫πp, li√™n t·ª•c qu·∫£n l√Ω v√† c√¢n b·∫±ng 4 ch·ªâ s·ªë sinh m·ªánh: Ti·ªÅn, S·ª©c kh·ªèe, ƒê·ªô no, v√† Stress. 

                C·ªët truy·ªán:
                
                B·ªëi c·∫£nh game t·∫≠p trung v√†o nh·ªØng ƒë·ªãa ƒëi·ªÉm quen thu·ªôc (ph√≤ng tr·ªç, qu√°n c∆°m b√¨nh d√¢n, gi·∫£ng ƒë∆∞·ªùng), n∆°i ng∆∞·ªùi ch∆°i ƒë·ªëi m·∫∑t v·ªõi c√°c s·ª± ki·ªán ng·∫´u nhi√™n mang t√≠nh may r·ªßi cao (deadline g·∫•p, h∆∞ xe, tr√∫ng th∆∞·ªüng). To√†n b·ªô c√¢u chuy·ªán ƒë∆∞·ª£c truy·ªÅn t·∫£i qua c√°c l·ª±a ch·ªçn d·ª±a tr√™n vƒÉn b·∫£n.
                
                M·ª•c ti√™u l√† ƒë·∫°t ƒë·∫øn Ng√†y 30 m√† kh√¥ng ƒë·ªÉ b·∫•t k·ª≥ 3 ch·ªâ s·ªë Ti·ªÅn, S·ª©c kh·ªèe, ƒê·ªô no (<=0) ho·∫∑c Stress (>=100).`,
                gameplay: "Tr√≤ ch∆°i di·ªÖn ra theo l∆∞·ª£t, v·ªõi m·ªói l∆∞·ª£t l√† m·ªôt ng√†y. Ng∆∞·ªùi ch∆°i ƒëi·ªÅu khi·ªÉn ho√†n to√†n b·∫±ng chu·ªôt, ƒë∆∞a ra quy·∫øt ƒë·ªãnh th√¥ng qua c√°c N√∫t L·ª±a Ch·ªçn ƒëi k√®m v·ªõi m·ªói s·ª± ki·ªán ng·∫´u nhi√™n ho·∫∑c c·ªë ƒë·ªãnh xu·∫•t hi·ªán h√†ng ng√†y. Sau khi ƒë∆∞a ra quy·∫øt ƒë·ªãnh, c√°c ch·ªâ s·ªë c·ªët l√µi (Ti·ªÅn, S·ª©c kh·ªèe, ƒê·ªô no, Stress) s·∫Ω thay ƒë·ªïi. Nhi·ªám v·ª• c·ªßa b·∫°n l√† qu·∫£n l√Ω v√† gi·ªØ 4 ch·ªâ s·ªë n√†y n·∫±m trong gi·ªõi h·∫°n cho ph√©p (t·ªëi thi·ªÉu 0, t·ªëi ƒëa 100) cho ƒë·∫øn khi ho√†n th√†nh Ng√†y 30.",
                winCondition: "S·ªëng s√≥t qua 30 ng√†y.",
                lossCondition: `Game Over s·∫Ω x·∫£y ra ngay l·∫≠p t·ª©c n·∫øu: Ti·ªÅn <= 0 (Ph√° s·∫£n), S·ª©c kh·ªèe <= 0 (Ki·ªát s·ª©c), ƒê·ªô no <= 0 (Ch·∫øt ƒë√≥i), ho·∫∑c Stress >= 100 (B·ªè h·ªçc v·ªÅ qu√™).`
            },
            { 
                id: 3, 
                name: "Anya's Neo Dodger", 
                desc: "N√© tr√°nh b√†i t·∫≠p Vi T√≠ch Ph√¢n trong th·∫ø gi·ªõi Cyberpunk c√πng ANYA.", 
                intro: "Sinh t·ªìn qua c∆°n √°c m·ªông Vi T√≠ch Ph√¢n trong th·∫ø gi·ªõi Retro-Cyberpunk c√πng ANYA!",
                price: 0, 
                bankInfo: "", 
                img: "GameImage/game3.png", 
                genre: "Arcade Survival, Endless, 8-bit", 
                players: "Single", 
                developer: "Nguy·ªÖn L√™ Ch√≠ T∆∞·ªùng", 
                release: "09/11/2025", 
                videoUrl: "https://www.youtube.com/embed/xqmehhKTZZI",
                downloadUrl: "https://chituong217.itch.io/anyas-neo-dodger", 
                story: `√ù t∆∞·ªüng: 
                
                Do sinh vi√™n 25CTT6 HCMUS ƒëang ƒë·ªëi m·∫∑t v·ªõi k·ª≥ thi Vi T√≠ch Ph√¢n cƒÉng th·∫≥ng, m·ªôt h·ªçc sinh b√≠ ·∫©n trong l·ªõp ƒë√£ x√¢y d·ª±ng game n√†y ƒë·ªÉ gi√∫p c√°c b·∫°n c√πng l·ªõp v√† b·∫£n th√¢n gi·∫£i stress sau nh·ªØng gi·ªù h·ªçc c√†y try-hard Vi T√≠ch Ph√¢n. 
                
                Game l√† n∆°i chuy·ªÉn h√≥a √°p l·ª±c th√†nh m·ªôt th·ª≠ th√°ch gi·∫£i tr√≠ t·ªëc ƒë·ªô cao.
                
                C·ªët truy·ªán:
                
                Anya v·ªën l√† m·ªôt c√¥ b√© ng√¢y th∆°, cute ph√¥ mai que, ƒë·∫øn t·ª´ th·∫ø gi·ªõi anime. M·ªôt ng√†y ƒë·∫πp tr·ªùi, B√ôM! Anya b·ªã chuy·ªÉn sinh th·∫≥ng v√†o th·∫ø gi·ªõi ƒë·ªùi th∆∞·ªùng v√† tr·ªü th√†nh m·ªôt t√¢n sinh vi√™n Khoa h·ªçc T·ª± nhi√™n t·∫°i HCMUS.
                
                Cu·ªôc s·ªëng t∆∞·ªüng ch·ª´ng √™m ƒë·∫πp cho ƒë·∫øn khi c√¥ g·∫∑p K·∫ª Ph·∫£n Di·ªán Vi T√≠ch Ph√¢n. √Åp l·ª±c h·ªçc t·∫≠p, deadline d√≠ ƒë√£ bi·∫øn t√¢m tr√≠ c√¥ th√†nh m·ªôt b√£i chi·∫øn tr∆∞·ªùng.
                
                M·ªói ƒë√™m, Anya ph·∫£i b∆∞·ªõc v√†o c∆°n √°c m·ªông: Trong kh√¥ng gian Retro-Cyberpunk c·ªßa ti·ªÅm th·ª©c, nh·ªØng cu·ªën s√°ch Vi Tich Ph√¢n li√™n t·ª•c r∆°i xu·ªëng Ziczac v·ªõi t·ªëc ƒë·ªô nhanh d·∫ßn, mu·ªën "ƒë√® b·∫πp" c√¥. M·ª•c ti√™u duy nh·∫•t: S·ªëng s√≥t!`,
                gameplay: "D√πng Ph√≠m M≈©i T√™n Tr√°i/Ph·∫£i ƒë·ªÉ di chuy·ªÉn Anya n√© tr√°nh nh·ªØng cu·ªën s√°ch Vi T√≠ch Ph√¢n.",
                winCondition: "S·ªëng s√≥t v√† v∆∞·ª£t qua ƒë∆∞·ª£c k·ª≥ thi Vi T√≠ch Ph√¢n ngo√†i ƒë·ªùi th·ª±c! =))",
                lossCondition: "Va ch·∫°m 3 l·∫ßn v·ªõi s√°ch Vi T√≠ch Ph√¢n v√† b·ªã ki·∫øn th·ª©c ƒë√® b·∫πp s·∫Ω GAME OVER."
            },
            { 
                id: 4, 
                name: "ERROR RUN", 
                desc: "Ch·∫°y tr·ªën m√†n h√¨nh xanh ch·∫øt ch√≥c g·ªìm BUG v√† ERROR.", 
                intro: `H√ÉY TR√ÅNH N√â T·∫§T C·∫¢ C√ÅC BUG - ERROR ƒê·ªÇ MANG V·ªÄ ƒêI·ªÇM S·ªê CAO NH·∫§T CHO M√îN C∆† S·ªû L·∫¨P TR√åNH C·ª¶A B·∫†N !!!

                Li·ªáu b·∫°n c√≥ th·ªÉ ph√° v·ª° k·ª∑ l·ª•c v√† tr·ªü th√†nh "Th√°nh DEADLINE"?`,
                price: 20000, 
                bankInfo: "777777 - ACB - VO NGUYEN CONG TRI", 
                img: "GameImage/game4.png", 
                genre: "Endless Runner, Arcade, Flappy-style", 
                players: "Single", 
                developer: "V√µ Nguy·ªÖn C√¥ng Tr√≠", 
                release: "10/11/2025", 
                videoUrl: "https://www.youtube.com/embed/6AuqZ9ZINVQ",
                downloadUrl: "https://congtri25ctt6.itch.io/error-run", 
                story: `√ù t∆∞·ªüng: 
                
                V·ªõi b·ªëi c·∫£nh g·∫ßn g≈©i v√† h√†i h∆∞·ªõc v·ªÅ cu·ªôc s·ªëng c·ªßa sinh vi√™n CNTT, game kh√¥ng ch·ªâ mang l·∫°i nh·ªØng ph√∫t gi√¢y gi·∫£i tr√≠ (v√† ·ª©c ch·∫ø!) m√† c√≤n l√† m·ªôt s·ª± ƒë·ªìng c·∫£m s√¢u s·∫Øc v·ªõi nh·ªØng ai ƒë√£ t·ª´ng "th·ª©c ƒë√™m ch·∫°y deadline".
                
                H√£y chu·∫©n b·ªã tinh th·∫ßn, gi·ªØ ch·∫∑t ph√≠m Space v√† xem b·∫°n c√≥ th·ªÉ s·ªëng s√≥t bao l√¢u trong th·∫ø gi·ªõi code ƒë·∫ßy l·ªói n√†y!
                
                C·ªët truy·ªán: 
                
                V√†o l√∫c 23h58 ƒë√™m h·∫°n ch√≥t, sau c√∫ nh·∫•n "Build & Run" ƒë·ªãnh m·ªánh, ch√†ng sinh vi√™n Tr√≠ c·ªßa FIT@HCMUS b·∫•t ng·ªù b·ªã h√∫t v√†o th·∫ø gi·ªõi m√£ l·ªánh b·ªüi l·ªói "404 - Hope Not Found" v√† h√≥a th√¢n th√†nh m·ªôt nh√¢n v·∫≠t 8-bit nh·ªè b√©.
                
                ƒê·ªÉ tho√°t kh·ªèi c∆°n √°c m·ªông n√†y v√† n·ªôp b√†i k·ªãp gi·ªù, c·∫≠u ph·∫£i li√™n t·ª•c "spam" ph√≠m Space, ch·∫≠t v·∫≠t l∆∞·ª£n l√°ch qua nh·ªØng khe h·ªü t·ª≠ th·∫ßn ƒë∆∞·ª£c t·∫°o b·ªüi c·∫∑p ngo·∫∑c thi·∫øu, d·∫•u ch·∫•m ph·∫©y ƒëi l·∫°c v√† c√°c v√≤ng l·∫∑p v√¥ t·∫≠n. 
                
                Cu·ªôc ƒëua gi·ªù ƒë√¢y kh√¥ng ch·ªâ l√† sinh t·ªìn m√† c√≤n l√† h√†nh tr√¨nh c·∫£m t·ª≠ t√¨m ƒë∆∞·ªùng ƒë·∫øn c√°nh c·ªïng Moodle th·∫ßn th√°nh ƒë·ªÉ "Commit code" th√†nh c√¥ng, b·ªüi ch·ªâ m·ªôt c√∫ va ch·∫°m nh·ªè v√†o l·ªói (Bug), Tr√≠ s·∫Ω ƒë·ªëi m·∫∑t v·ªõi √°n t·ª≠ ƒë√°ng s·ª£ nh·∫•t ƒë·ªùi sinh vi√™n: tr∆∞·ª£t m√¥n v√† ƒë√≥ng ti·ªÅn h·ªçc l·∫°i!`,
                gameplay: `Tr√™n PC/Laptop: Nh·∫•n ph√≠m Spacebar HO·∫∂C click Chu·ªôt tr√°i ƒë·ªÉ l√†m nh√¢n v·∫≠t bay l√™n.
                
                Tr√™n Mobile/Tablet: Ch·∫°m v√†o b·∫•t k·ª≥ ƒë√¢u tr√™n m√†n h√¨nh ƒë·ªÉ bay l√™n.`,
                winCondition: `Kh√¥ng c√≥ ƒë√≠ch ƒë·∫øn, s·ªëng c√†ng l√¢u c√†ng t·ªët b·∫±ng c√°ch ƒëi·ªÅu khi·ªÉn nh√¢n v·∫≠t bay qua c√°c khe h·ªü gi·ªØa c√°c ch∆∞·ªõng ng·∫°i v·∫≠t. 
                
                M·ªói c·∫∑p ·ªëng l·ªói v∆∞·ª£t qua s·∫Ω cho b·∫°n 1 ƒëi·ªÉm.`,
                lossCondition: `Tuy·ªát ƒë·ªëi kh√¥ng ƒë∆∞·ª£c ch·∫°m v√†o:
                
                + C√°c kh·ªëi l·ªói m√†u ƒë·ªè ("ERROR 404", "CSLT-MAT").
                + Gi·ªõi h·∫°n tr√™n c√πng (tr·∫ßn nh√†) c·ªßa m√†n h√¨nh.
                + Gi·ªõi h·∫°n d∆∞·ªõi c√πng (s√†n nh√†) c·ªßa m√†n h√¨nh.
                
                Va ch·∫°m v√†o b·∫•t c·ª© th·ª© g√¨ k·ªÉ tr√™n ƒë·ªìng nghƒ©a v·ªõi GAME OVER.`
            },
            { 
                id: 5, 
                name: "Naruto Adventure", 
                desc: "Nhi·ªám v·ª• Ninja c·∫•p S c√πng Kakashi(?) v√† Naruto.", 
                intro: `T·ª±a game n√†y l√† m·ªôt tr·∫£i nghi·ªám h√†nh ƒë·ªông platformer 2D Side-Scrolling mang phong c√°ch Arcade, ho√†n h·∫£o cho m·ªôt ng∆∞·ªùi ch∆°i.
                
                M·ª•c ti√™u c·ªßa game l√† cho ph√©p ng∆∞·ªùi ch∆°i ch·ªçn l·ª±a gi·ªØa c√°c huy·ªÅn tho·∫°i: Kakashi, Naruto,‚Ä¶ v√† tham gia v√†o m·ªôt cu·ªôc chi·∫øn t·ªëc ƒë·ªô cao ch·ªëng l·∫°i Sound Ninja, s·ª≠ d·ª•ng c√°c tuy·ªát k·ªπ nh∆∞ Sharingan, Chidori, Rasengan v√† Kage Bunshin ƒë·ªÉ b·∫£o v·ªá Konoha kh·ªèi hi·ªÉm h·ªça.`,
                price: 0, 
                bankInfo: "", 
                img: "GameImage/game5.png", 
                genre: "Adventure, Fighting", 
                players: "Single", 
                developer: "ƒê·ªó Duy Tr∆∞·ªùng", 
                release: "11/11/2025", 
                videoUrl: "https://www.youtube.com/embed/4XScOKO0Y40",
                downloadUrl: "https://truonghhaz.itch.io/naruto-adventure", 
                story: `√ù t∆∞·ªüng trung t√¢m c·ªßa game l√† mang l·∫°i tr·∫£i nghi·ªám chi·∫øn ƒë·∫•u linh ho·∫°t v√† c√° nh√¢n h√≥a. Ng∆∞·ªùi ch∆°i ƒë·ªëi di·ªán v·ªõi l·ª±a ch·ªçn ƒë·ªãnh h√¨nh l·ªëi ch∆°i c·ªßa m√¨nh:
                
                + Kakashi: Ph√π h·ª£p v·ªõi l·ªëi ch∆°i chi·∫øn l∆∞·ª£c, ƒë√≤i h·ªèi s·ª± t√≠nh to√°n th·ªùi ƒëi·ªÉm ch√≠nh x√°c khi s·ª≠ d·ª•ng Sharingan.
                + Naruto: Ph√π h·ª£p v·ªõi l·ªëi ch∆°i c∆∞·ªùng ƒë·ªô cao, t·∫•n c√¥ng tr·ª±c di·ªán, g√¢y s√°t th∆∞∆°ng l·ªõn v√† di·ªán r·ªông b·∫±ng Rasengan.

                Game l√† n∆°i ki·ªÉm tra kh·∫£ nƒÉng l√†m ch·ªß t·ªëc ƒë·ªô ph·∫£n x·∫° v√† b·ªô k·ªπ nƒÉng ƒë·ªôc ƒë√°o c·ªßa ng∆∞·ªùi ch∆°i tr√™n nh·ªØng chi·∫øn tr∆∞·ªùng kh·ªëc li·ªát.
                
                C·ªët truy·ªán: 
                
                B·∫£o v·ªá L√†ng L√°: Sau c√°i ch·∫øt c·ªßa Hokage ƒê·ªá Tam, L√†ng r∆°i v√†o t√¨nh tr·∫°ng b·∫•t ·ªïn, t·∫°o c∆° h·ªôi cho th·∫ø l·ª±c l√≠nh ƒë√°nh thu√™ t√†n b·∫°o l√† Ninja L√†ng √Çm Thanh x√¢m nh·∫≠p. B·∫°n ƒë∆∞·ª£c giao nhi·ªám v·ª• m·∫≠t: L·ª±a ch·ªçn Anh h√πng Kakashi Hatake ho·∫∑c Naruto Uzumaki ƒë·ªÉ th·ª±c hi·ªán nhi·ªám v·ª• ti√™u di·ªát ch√∫ng.`,
                gameplay: `Di chuy·ªÉn: D√πng Ph√≠m M≈©i T√™n Tr√°i/Ph·∫£i ho·∫∑c A/D.
                Nh·∫£y: D√πng Ph√≠m M≈©i T√™n L√™n ho·∫∑c W.
                T·∫•n c√¥ng c∆° b·∫£n: Ph√≠m J (ƒê·∫•m) v√† K (ƒê√°).
                Tuy·ªát K·ªπ ƒê·∫∑c Tr∆∞ng: Ph√≠m L (Chidori n·∫øu l√† Kakashi, Rasengan n·∫øu l√† Naruto).
                Si√™u Tuy·ªát K·ªπ: Ph√≠m U (Sharingan n·∫øu l√† Kakashi, Kage Bunshin n·∫øu l√† Naruto).`,
                winCondition: `Th·∫Øng M√†n : B·∫°n chi·∫øn th·∫Øng m·ªôt m√†n ch∆°i khi ti√™u di·ªát ƒë∆∞·ª£c t·∫•t c·∫£ c√°c ƒë∆°n v·ªã Sound Ninja tr√™n b·∫£n ƒë·ªì. M√†n h√¨nh "STAGE CLEAR!" s·∫Ω xu·∫•t hi·ªán, cho ph√©p b·∫°n chuy·ªÉn ti·∫øp sang Level ti·∫øp theo.
                
                Ho√†n Th√†nh Game: Khi b·∫°n ho√†n th√†nh Level cu·ªëi c√πng, m√†n h√¨nh "GAME COMPLETE!" s·∫Ω xu·∫•t hi·ªán.`,
                lossCondition: `Game k·∫øt th√∫c v√† m√†n h√¨nh "GAME OVER" s·∫Ω xu·∫•t hi·ªán n·∫øu:
                
                + M√°u V·ªÅ 0: Thanh m√°u c·ªßa nh√¢n v·∫≠t ch√≠nh c·∫°n ki·ªát sau khi nh·∫≠n s√°t th∆∞∆°ng t·ª´ k·∫ª ƒë·ªãch.
                + R∆°i V·ª±c: Nh√¢n v·∫≠t r∆°i kh·ªèi gi·ªõi h·∫°n m√†n h√¨nh ch∆°i.`
            },
            { 
                id: 6, 
                name: "D·∫°o Ph·ªë CHILL", 
                desc: "L√°i xe th∆∞ gi√£n c√πng nh·∫°c Lofi trong th·∫ø gi·ªõi si√™u th·ª±c.", 
                intro: `G√°c l·∫°i m·ªçi √¢u lo, b·∫≠t nh·∫°c l√™n v√† t·∫≠n h∆∞·ªüng. 'D·∫°o Ph·ªë CHILL' kh√¥ng c√≥ th·∫Øng thua, kh√¥ng c√≥ k·∫ª ƒë·ªãch, ch·ªâ c√≥ b·∫°n v√† chi·∫øc xe l∆∞·ªõt ƒëi trong m√†n ƒë√™m √™m d·ªãu. M·ªôt li·ªÅu thu·ªëc tinh th·∫ßn ho√†n h·∫£o sau nh·ªØng gi·ªù l√†m vi·ªác cƒÉng th·∫≥ng.`,
                price: 100000, 
                bankInfo: "111111 - Vietcombank - DOAN HOANG VIET", 
                img: "GameImage/game6.png", 
                genre: "Simulation / Hangout", 
                players: "Single", 
                developer: "ƒêo√†n Ho√†ng Vi·ªát", 
                release: "12/10/2025", 
                videoUrl: "https://www.youtube.com/embed/jNlELPjMwOQ",
                downloadUrl: "https://www.roblox.com/games/13217277322/Dao-Pho-Chill", 
                story: `√ù t∆∞·ªüng:
                
                Kh√¥ng c√≥ k·∫ª th√π, kh√¥ng √°p l·ª±c. Ch·ªâ c√≥ b·∫°n, chi·∫øc xe v√† √¢m nh·∫°c trong th√†nh ph·ªë v·ªÅ ƒë√™m.
                "Kh√°m ph√°, chill, ng·∫Øm c·∫£nh v√† tr√≤ chuy·ªán."
                CH√ÄO M·ª™NG ƒê·∫æN V·ªöI TH·∫æ GI·ªöI ‚ÄúKH√ÅC BI·ªÜT‚Äù 
                B∆∞·ªõc v√†o th·∫ø gi·ªõi Open World r·ªông l·ªõn, n∆°i b·∫°n tho√°t kh·ªèi deadline v√† √°p l·ª±c. T·ª± tay c·∫ßm l√°i nh·ªØng chi·∫øc si√™u xe, l∆∞·ª£n l·ªù d∆∞·ªõi √°nh ƒë√®n Neon th√†nh ph·ªë v√† b·∫≠t Mic "t√°m" chuy·ªán c√πng h·ªôi b·∫°n. ƒê√¢y l√† kh√¥ng gian Slow Living d√†nh ri√™ng cho Gen Z.

                C·ªët truy·ªán:

                Trong m·ªôt th·∫ø gi·ªõi n∆°i con ng∆∞·ªùi ƒëang d·∫ßn ƒë√°nh m·∫•t kh·∫£ nƒÉng m∆° m·ªông v√¨ gu·ªìng quay h·ªëi h·∫£ c·ªßa cu·ªôc s·ªëng hi·ªán ƒë·∫°i, b·∫°n v√†o vai m·ªôt l·ªØ kh√°ch v√¥ danh tr·ªü v·ªÅ g√≥c ph·ªë ho√†i ni·ªám mang t√™n 'Ph·ªë nh·ªè'. 
                
                ƒê√¢y l√† n∆°i duy nh·∫•t tr√™n th·∫ø gi·ªõi m√† th·ªùi gian d∆∞·ªùng nh∆∞ b·ªè qu√™n, lu√¥n d·ª´ng l·∫°i ·ªü kho·∫£nh kh·∫Øc nh·∫≠p nho·∫°ng t·ªëi √™m ƒë·ªÅm v·ªõi c∆°n m∆∞a b·ª•i l·∫•t ph·∫•t kh√¥ng bao gi·ªù d·ª©t. 
                
                B·∫°n kh√¥ng c√≥ thanh m√°u, kh√¥ng c√≥ k·∫ª th√π, v√† c≈©ng ch·∫≥ng b·ªã h·ªëi th√∫c b·ªüi th·ªùi gian; suy nghƒ© duy nh·∫•t c·ªßa b·∫°n l√† r·∫£o b∆∞·ªõc th·∫≠t ch·∫≠m tr√™n nh·ªØng con ƒë∆∞·ªùng l√°t ƒë√° ph·ªß r√™u, l·∫Øng nghe ti·∫øng m∆∞a r∆°i t√≠ t√°ch tr√™n chi·∫øc √¥ trong su·ªët v√† ti·∫øng nh·∫°c Jazz du d∆∞∆°ng ph√°t ra t·ª´ nh·ªØng ng·ªçn ƒë√®n ƒë∆∞·ªùng hiu h·∫Øt. 
                
                Tr√™n h√†nh tr√¨nh v√¥ ƒë·ªãnh ·∫•y, b·∫°n s·∫Ω ƒëi t√¨m l·∫°i nh·ªØng 'm·∫£nh v·ª° √°nh s√°ng' ƒëang tr√¥i n·ªïi‚Äîƒë√≥ l√† hi·ªán th√¢n c·ªßa nh·ªØng k·ª∑ ni·ªám h·∫°nh ph√∫c nh·ªè b√© m√† c∆∞ d√¢n th√†nh ph·ªë ƒë√£ v√¥ t√¨nh ƒë√°nh r∆°i v√† l√£ng qu√™n: m·ªôt l√° th∆∞ t√¨nh ch∆∞a bao gi·ªù g·ª≠i, chi·∫øc v√© xem phim c·ªßa m·ªëi t√¨nh ƒë·∫ßu, hay ƒë∆°n gi·∫£n l√† m√πi h∆∞∆°ng c·ªßa ti·ªám b√°nh m√¨ n∆∞·ªõng nƒÉm x∆∞a. 
                
                M·ªói b∆∞·ªõc ch√¢n c·ªßa b·∫°n kh√¥ng ch·ªâ l√† s·ª± di chuy·ªÉn, m√† l√† h√†nh tr√¨nh th·∫Øp s√°ng l·∫°i t·ª´ng g√≥c ph·ªë u t·ªëi, gh√©p l·∫°i nh·ªØng m·∫£nh k√Ω ·ª©c v·ª•n v·ª° ƒë·ªÉ k·ªÉ l√™n m·ªôt c√¢u chuy·ªán c·∫£m ƒë·ªông, s√¢u s·∫Øc v·ªÅ s·ª± ch·ªØa l√†nh v√† nh·∫Øc nh·ªü ng∆∞·ªùi ch∆°i tr√¢n tr·ªçng nh·ªØng ƒëi·ªÅu b√¨nh d·ªã nh·∫•t m√† m√¨nh ƒëang c√≥.`,
                gameplay: `‚å®Ô∏è Di chuy·ªÉn: W, A, S, D ho·∫∑c M≈©i t√™n.
                üëÄ Quan s√°t: Chu·ªôt xoay 360 ƒë·ªô.
                üöó Menu ƒëi·ªán tho·∫°i: Nh·∫•n n√∫t M tr√™n m√†n h√¨nh.`,
                winCondition: "Kh√¥ng c√≥, game ch·ªâ ƒë·ªÉ th∆∞ gi√£n.",
                lossCondition: "Khi t·∫Øt game =))"
            },

            // --- C√ÅC GAME N·ªîI TI·∫æNG (GAME 7-12) ---
            { 
                id: 7, 
                name: "Elden Ring", 
                desc: "Si√™u ph·∫©m h√†nh ƒë·ªông nh·∫≠p vai th·∫ø gi·ªõi m·ªü t·ª´ FromSoftware.", 
                intro: "ƒê·ª©ng l√™n, h·ª°i K·∫ª b·ªã v·∫•y b·∫©n (Tarnished), v√† ƒë·ªÉ √¢n s·ªßng d·∫´n l·ªëi b·∫°n ch·∫°m tay v√†o chi·∫øc nh·∫´n Elden Ring.", 
                price: 999000, 
                bankInfo: "STEAM - STORE", 
                img: "https://placehold.co/600x400?text=Elden+Ring", 
                genre: "Action RPG, Open World, Soulslike", 
                players: "Single, Multiplayer", 
                developer: "FromSoftware Inc.", 
                release: "25/02/2022", 
                videoUrl: "https://www.youtube.com/embed/E3Huy2cdih0", 
                downloadUrl: "https://store.steampowered.com/app/1245620/ELDEN_RING/", 
                story: `V√πng ƒë·∫•t Lands Between t·ª´ng r·ª±c r·ª° d∆∞·ªõi s·ª± cai tr·ªã c·ªßa N·ªØ ho√†ng Marika ƒê·∫•ng Vƒ©nh H·∫±ng. Nh∆∞ng chi·∫øc nh·∫´n Elden Ring ƒë√£ v·ª° v·ª•n... Nh·ªØng ƒë·ª©a con √° th·∫ßn c·ªßa Marika tranh gi√†nh c√°c m·∫£nh v·ª° (Great Runes), g√¢y ra cu·ªôc chi·∫øn tranh t√†n kh·ªëc mang t√™n The Shattering. 
                
                B·∫°n l√† m·ªôt Tarnished (K·∫ª b·ªã h·∫Øt h·ªßi), tr·ªü v·ªÅ t·ª´ c√µi ch·∫øt ƒë·ªÉ bƒÉng qua m√†n s∆∞∆°ng m√π, thu th·∫≠p c√°c m·∫£nh v·ª°, di·ªán ki·∫øn Marika v√† tr·ªü th√†nh Elden Lord m·ªõi.`, 
                gameplay: "Kh√°m ph√° th·∫ø gi·ªõi m·ªü r·ªông l·ªõn, chi·∫øn ƒë·∫•u v·ªõi nh·ªØng con tr√πm kh·ªïng l·ªì, x√¢y d·ª±ng nh√¢n v·∫≠t v·ªõi h√†ng trƒÉm lo·∫°i v≈© kh√≠ v√† ph√©p thu·∫≠t.", 
                winCondition: "ƒê√°nh b·∫°i Elden Beast v√† ch·ªçn k·∫øt th√∫c c·ªßa b·∫°n.", 
                lossCondition: "You Died (Ch·∫øt v√† m·∫•t Runes)." 
            },
            { 
                id: 8, 
                name: "Hollow Knight", 
                desc: "Ki·ªát t√°c Metroidvania v·∫Ω tay ƒë·∫ßy ngh·ªá thu·∫≠t v√† th·ª≠ th√°ch.", 
                intro: "Kh√°m ph√° v∆∞∆°ng qu·ªëc c√¥n tr√πng Hallownest b·ªã l√£ng qu√™n v√† gi·∫£i m√£ nh·ªØng b√≠ ·∫©n c·ªï x∆∞a.", 
                price: 165000, 
                bankInfo: "STEAM - STORE", 
                img: "https://placehold.co/600x400?text=Hollow+Knight", 
                genre: "Metroidvania, Action, Indie", 
                players: "Single", 
                developer: "Team Cherry", 
                release: "24/02/2017", 
                videoUrl: "https://www.youtube.com/embed/UAO2urG23S4", 
                downloadUrl: "https://store.steampowered.com/app/367520/Hollow_Knight/", 
                story: `B√™n d∆∞·ªõi th·ªã tr·∫•n Dirtmouth ƒëi√™u t√†n l√† v∆∞∆°ng qu·ªëc c√¥n tr√πng Hallownest c·ªï ƒë·∫°i ƒë√£ s·ª•p ƒë·ªï. M·ªôt b·ªánh d·ªãch k·ª≥ l·∫° (The Infection) ƒëang bi·∫øn c∆∞ d√¢n th√†nh nh·ªØng x√°c s·ªëng ƒëi√™n lo·∫°n. 
                
                B·∫°n l√† m·ªôt Hi·ªáp sƒ© nh·ªè b√©, v√¥ danh, mang theo thanh Nail c√πn, ƒëi s√¢u v√†o l√≤ng ƒë·∫•t ƒë·ªÉ kh√°m ph√° b√≠ m·∫≠t v·ªÅ Vua Nh·ª£t Nh·∫°t (Pale King) v√† phong ·∫•n ngu·ªìn g·ªëc c·ªßa b·ªánh d·ªãch tr∆∞·ªõc khi n√≥ nu·ªët ch·ª≠ng t·∫•t c·∫£.`, 
                gameplay: "Di chuy·ªÉn kh√©o l√©o (nh·∫£y, l∆∞·ªõt, b√°m t∆∞·ªùng), chi·∫øn ƒë·∫•u b·∫±ng ki·∫øm (Nail) v√† s·ª≠ d·ª•ng b√πa ch√∫ (Charms) ƒë·ªÉ tƒÉng s·ª©c m·∫°nh.", 
                winCondition: "ƒê√°nh b·∫°i The Radiance ho·∫∑c The Hollow Knight.", 
                lossCondition: "H·∫øt m·∫∑t n·∫° (M√°u) v√† quay l·∫°i gh·∫ø ƒë√° g·∫ßn nh·∫•t (m·∫•t Geo)." 
            },
            { 
                id: 9, 
                name: "Hay Day", 
                desc: "Game n√¥ng tr·∫°i vui v·∫ª s·ªë 1 tr√™n di ƒë·ªông. X√¢y d·ª±ng trang tr·∫°i trong m∆° c·ªßa b·∫°n.", 
                intro: "Ch√†o m·ª´ng ƒë·∫øn v·ªõi n√¥ng tr·∫°i tuy·ªát v·ªùi nh·∫•t tr√™n di ƒë·ªông! L√†m quen v·ªõi ƒë·∫•t ƒëai, chƒÉm s√≥c m√πa m√†ng v√† trao ƒë·ªïi h√†ng h√≥a v·ªõi b·∫°n b√® v√† h√†ng x√≥m.", 
                price: 0, 
                bankInfo: "SUPERCELL", 
                img: "https://placehold.co/600x400?text=Hay+Day", 
                genre: "Simulation, Farming, Casual", 
                players: "Single, Multiplayer (Neighborhood)", 
                developer: "Supercell", 
                release: "21/06/2012", 
                videoUrl: "https://www.youtube.com/embed/H5tO9y_5tS4", 
                downloadUrl: "https://supercell.com/en/games/hayday/", 
                story: `B·∫°n nh·∫≠n ƒë∆∞·ª£c m·ªôt b·ª©c th∆∞ t·ª´ ng∆∞·ªùi ch√∫ Greg th√¢n thi·∫øt. √îng ·∫•y ƒë√£ l·ªõn tu·ªïi v√† kh√¥ng th·ªÉ qu√°n xuy·∫øn n·ªïi n√¥ng tr·∫°i c≈© c·ªßa gia ƒë√¨nh n·ªØa, v√¨ v·∫≠y √¥ng mu·ªën trao l·∫°i quy·ªÅn th·ª´a k·∫ø v√† qu·∫£n l√Ω cho b·∫°n. 
                
                N√¥ng tr·∫°i hi·ªán t·∫°i kh√° hoang s∆° v√† b·ª´a b·ªôn, nh∆∞ng v·ªõi s·ª± chƒÉm ch·ªâ v√† √≥c s√°ng t·∫°o, b·∫°n ho√†n to√†n c√≥ th·ªÉ bi·∫øn n√≥ th√†nh m·ªôt thi√™n ƒë∆∞·ªùng n√¥ng nghi·ªáp tr√π ph√∫ nh·∫•t thung l≈©ng. 
                
                C·ªët truy·ªán kh√¥ng ch·ªâ d·ª´ng l·∫°i ·ªü vi·ªác tr·ªìng c√¢y, m√† l√† h√†nh tr√¨nh k·∫øt n·ªëi c·ªông ƒë·ªìng: bu√¥n b√°n v·ªõi c√°c nh√¢n v·∫≠t thƒÉm vi·∫øng, ho√†n th√†nh ƒë∆°n h√†ng xe t·∫£i, t√†u th·ªßy, ph·ª•c v·ª• kh√°ch du l·ªãch t·∫°i Th·ªã Tr·∫•n v√† tham gia c√°c cu·ªôc ƒëua Derby k·ªãch t√≠nh c√πng h·ªôi n√¥ng d√¢n (Neighborhood).`, 
                gameplay: "Thao t√°c ch·∫°m v√† vu·ªët ƒë∆°n gi·∫£n ƒë·ªÉ gieo h·∫°t, thu ho·∫°ch, cho th√∫ ƒÉn. X√¢y d·ª±ng c√°c m√°y s·∫£n xu·∫•t (l√≤ n∆∞·ªõng, m√°y √©p ƒë∆∞·ªùng,...) ƒë·ªÉ t·∫°o ra s·∫£n ph·∫©m v√† b√°n l·∫•y ti·ªÅn v√†ng.", 
                winCondition: "Kh√¥ng c√≥ k·∫øt th√∫c. M·ª•c ti√™u l√† m·ªü r·ªông trang tr·∫°i, l√™n c·∫•p v√† ƒë·∫°t c√°c th√†nh t·ª±u.", 
                lossCondition: "Kh√¥ng c√≥. ƒê√¢y l√† game th∆∞ gi√£n, b·∫°n kh√¥ng th·ªÉ thua." 
            },
            { 
                id: 10, 
                name: "God of War Ragnar√∂k", 
                desc: "H√†nh tr√¨nh s·ª≠ thi c·ªßa Kratos v√† Atreus qua 9 c√µi B·∫Øc √Çu.", 
                intro: "Fimbulwinter ƒëang ƒë·∫øn g·∫ßn. Kratos v√† Atreus ph·∫£i quy·∫øt ƒë·ªãnh s·ªë ph·∫≠n c·ªßa h·ªç tr∆∞·ªõc khi Ragnar√∂k x·∫£y ra.", 
                price: 1200000, 
                bankInfo: "SONY - STEAM", 
                img: "https://placehold.co/600x400?text=God+of+War", 
                genre: "Action-Adventure, Hack and Slash", 
                players: "Single", 
                developer: "Santa Monica Studio", 
                release: "09/11/2022", 
                videoUrl: "https://www.youtube.com/embed/EE-4GvjKcfs", 
                downloadUrl: "https://store.steampowered.com/app/2322010/God_of_War_Ragnark/", 
                story: `Fimbulwinter (M√πa ƒë√¥ng kh·∫Øc nghi·ªát) ƒë√£ bao tr√πm 9 c√µi, b√°o hi·ªáu ng√†y t·∫≠n th·∫ø Ragnar√∂k ƒëang ƒë·∫øn g·∫ßn. Kratos v√† Atreus ph·∫£i h√†nh tr√¨nh qua t·ª´ng th·∫ø gi·ªõi ƒë·ªÉ t√¨m ki·∫øm c√¢u tr·∫£ l·ªùi tr∆∞·ªõc khi c√°c v·ªã th·∫ßn Asgard (Odin, Thor) ph√°t ƒë·ªông chi·∫øn tranh. 
                
                ƒê√¢y kh√¥ng ch·ªâ l√† cu·ªôc chi·∫øn sinh t·ªìn, m√† l√† c√¢u chuy·ªán v·ªÅ s·ª± tr∆∞·ªüng th√†nh, l√≤ng tin v√† s·ª± bu√¥ng b·ªè gi·ªØa hai cha con Chi·∫øn Th·∫ßn.`, 
                gameplay: "Chi·∫øn ƒë·∫•u b·∫°o l·ª±c v·ªõi R√¨u Leviathan v√† Dao Blades of Chaos. Gi·∫£i ƒë·ªë v√† kh√°m ph√° c·ªët truy·ªán s√¢u s·∫Øc.", 
                winCondition: "Ho√†n th√†nh c·ªët truy·ªán ch√≠nh v√† ƒë√°nh b·∫°i Odin.", 
                lossCondition: "H·∫øt m√°u trong combat." 
            },
            { 
                id: 11, 
                name: "League of Legends", 
                desc: "ƒê·∫•u tr∆∞·ªùng tr·∫≠n chi·∫øn tr·ª±c tuy·∫øn nhi·ªÅu ng∆∞·ªùi ch∆°i (MOBA) s·ªë 1 th·∫ø gi·ªõi.", 
                intro: "Ch·ªçn v·ªã t∆∞·ªõng c·ªßa b·∫°n v√† l·∫≠p ƒë·ªôi ƒë·ªÉ ph√° h·ªßy nh√† ch√≠nh ƒë·ªëi ph∆∞∆°ng (Nexus).", 
                price: 0, 
                bankInfo: "RIOT GAMES", 
                img: "https://placehold.co/600x400?text=League+of+Legends", 
                genre: "MOBA, Strategy", 
                players: "Multiplayer (5v5)", 
                developer: "Riot Games", 
                release: "27/10/2009", 
                videoUrl: "https://www.youtube.com/embed/mDYqT0_9VR4", 
                downloadUrl: "https://signup.leagueoflegends.com/", 
                story: `Trong th·∫ø gi·ªõi Runeterra ƒë·∫ßy ma thu·∫≠t v√† xung ƒë·ªôt, c√°c anh h√πng (Champions) t·ª´ nh·ªØng v√πng ƒë·∫•t ƒë·ªëi ngh·ªãch nh∆∞ Demacia c√¥ng l√Ω, Noxus t√†n b·∫°o, hay Ionia huy·ªÅn b√≠... t·∫≠p h·ª£p l·∫°i t·∫°i Summoner's Rift. 
                
                M·ªói tr·∫≠n chi·∫øn l√† m·ªôt cu·ªôc ƒë·∫•u tr√≠ cƒÉng th·∫≥ng ƒë·ªÉ ph√° h·ªßy Nexus ƒë·ªëi ph∆∞∆°ng. C·ªët truy·ªán ƒë∆∞·ª£c m·ªü r·ªông qua t·ª´ng v·ªã t∆∞·ªõng v·ªõi nh·ªØng m·ªëi th√π truy·ªÅn ki·∫øp v√† l√Ω t∆∞·ªüng ri√™ng.`, 
                gameplay: "ƒêi·ªÅu khi·ªÉn t∆∞·ªõng, farm l√≠nh, mua trang b·ªã v√† ph·ªëi h·ª£p ƒë·ªìng ƒë·ªôi giao tranh t·ªïng.", 
                winCondition: "Ph√° h·ªßy nh√† ch√≠nh (Nexus) c·ªßa ƒë·ªãch.", 
                lossCondition: "Nh√† ch√≠nh m√¨nh b·ªã ph√° h·ªßy ho·∫∑c ƒë·∫ßu h√†ng (FF 15)." 
            },
            { 
                id: 12, 
                name: "Minecraft", 
                desc: "Th·∫ø gi·ªõi c·ªßa nh·ªØng kh·ªëi vu√¥ng k·ª≥ di·ªáu. Gi·ªõi h·∫°n l√† tr√≠ t∆∞·ªüng t∆∞·ª£ng c·ªßa b·∫°n.", 
                intro: "X√¢y d·ª±ng m·ªçi th·ª©, t·ª´ ng√¥i nh√† ƒë∆°n s∆° ƒë·∫øn l√¢u ƒë√†i vƒ© ƒë·∫°i nh·∫•t.", 
                price: 750000, 
                bankInfo: "MICROSOFT", 
                img: "https://placehold.co/600x400?text=Minecraft", 
                genre: "Sandbox, Survival", 
                players: "Single, Multiplayer", 
                developer: "Mojang Studios", 
                release: "18/11/2011", 
                videoUrl: "https://www.youtube.com/embed/MmB9b5njVbA", 
                downloadUrl: "https://www.minecraft.net/", 
                story: `Kh√¥ng c√≥ k·ªãch b·∫£n ƒë·ªãnh s·∫µn, b·∫°n t·ªânh d·∫≠y gi·ªØa m·ªôt th·∫ø gi·ªõi hoang s∆° r·ªông l·ªõn. B·∫°n c√≥ th·ªÉ ch·ªçn cu·ªôc s·ªëng b√¨nh y√™n: l√†m ru·ªông, chƒÉn nu√¥i, x√¢y nh√†. 
                
                Ho·∫∑c d·∫•n th√¢n v√†o nguy hi·ªÉm: ch·∫ø t·∫°o v≈© kh√≠, xu·ªëng ƒë·ªãa ng·ª•c (Nether), t√¨m ki·∫øm Stronghold v√† ti√™u di·ªát R·ªìng Ender ƒë·ªÉ gi·∫£i ph√≥ng th·∫ø gi·ªõi The End. C·ªët truy·ªán ch√≠nh l√† h√†nh tr√¨nh s√°ng t·∫°o c·ªßa ri√™ng b·∫°n.`, 
                gameplay: "Ch·∫ø ƒë·ªô Sinh t·ªìn (ki·∫øm ƒÉn, ƒë√°nh qu√°i) ho·∫∑c S√°ng t·∫°o (b·∫•t t·ª≠, full nguy√™n li·ªáu).", 
                winCondition: "ƒê√°nh b·∫°i r·ªìng Ender (tu·ª≥ ch·ªçn).", 
                lossCondition: "H·∫øt m√°u v√† r∆°i ƒë·ªì (Survival)." 
            }
        ];

        // --- H√ÄM L·∫§Y D·ªÆ LI·ªÜU T·ª™ LOCAL STORAGE (L∆ØU TR·ªÆ Vƒ®NH VI·ªÑN) ---
        function getStoredGames() {
            const stored = localStorage.getItem('myCustomGames');
            return stored ? JSON.parse(stored) : [];
        }

        // --- H√ÄM L∆ØU GAME M·ªöI V√ÄO LOCAL STORAGE ---
        function saveCustomGame(newGame) {
            const currentStored = getStoredGames();
            currentStored.push(newGame);
            localStorage.setItem('myCustomGames', JSON.stringify(currentStored));
        }

        // K·∫øt h·ª£p game g·ªëc + game ƒë√£ l∆∞u t·ª´ b·ªô nh·ªõ
        let currentGames = [...initialGames, ...getStoredGames()];
        
        const appContainer = document.getElementById('app-container');
        const formatter = new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' });

        // --- 2. H·ªÜ TH·ªêNG QU·∫¢N L√ù GI·ªé H√ÄNG (STORAGE) ---
        function getCart() { return JSON.parse(localStorage.getItem('cart') || '[]'); }
        function saveCart(cart) { localStorage.setItem('cart', JSON.stringify(cart)); updateCartBadge(); }
        
        function addToCart(gameId) {
            let cart = getCart();
            let library = getLibrary();
            if (library.includes(gameId)) { alert("B·∫°n ƒë√£ s·ªü h·ªØu game n√†y r·ªìi!"); return; }
            if (!cart.includes(gameId)) {
                cart.push(gameId);
                saveCart(cart);
                alert("ƒê√£ th√™m v√†o gi·ªè h√†ng!");
            } else {
                alert("Game n√†y ƒë√£ c√≥ trong gi·ªè h√†ng!");
            }
            if (!getQueryParam('view') && !getQueryParam('game')) {
                const gameGrid = document.getElementById('gameGrid');
                if (gameGrid) renderGames(currentGames, gameGrid);
            }
        }
        
        function removeFromCart(gameId) {
            let cart = getCart();
            cart = cart.filter(id => id !== gameId);
            saveCart(cart);
            renderCartPage();
        }
        
        function getLibrary() { return JSON.parse(localStorage.getItem('library') || '[]'); }
        function saveLibrary(library) { localStorage.setItem('library', JSON.stringify(library)); }

        // --- H√ÄM RESET D·ªÆ LI·ªÜU ---
        function resetLibrary() {
            if(confirm("B·∫°n c√≥ ch·∫Øc mu·ªën X√ìA TO√ÄN B·ªò d·ªØ li·ªáu (Game ƒë√£ mua + Game ƒë√£ ƒëƒÉng)?")) {
                localStorage.removeItem('library');
                localStorage.removeItem('cart');
                localStorage.removeItem('myCustomGames'); // X√≥a c·∫£ game ƒë√£ ƒëƒÉng
                localStorage.removeItem('userRatings');   // X√≥a ƒë√°nh gi√°
                alert("ƒê√£ reset d·ªØ li·ªáu! V·ªÅ trang ch·ªß...");
                window.location.href = window.location.pathname; 
            }
        }

        function updateCartBadge() {
            const badge = document.querySelector('.cart-badge');
            if (badge) {
                const count = getCart().length;
                badge.textContent = count;
                badge.style.display = count > 0 ? 'flex' : 'none';
            }
        }

        // --- H√ÄM THANH TO√ÅN ---
        function processCheckout() {
            const cart = getCart();
            if (cart.length === 0) {
                alert("Gi·ªè h√†ng ƒëang tr·ªëng! H√£y th√™m game v√†o tr∆∞·ªõc khi thanh to√°n.");
                return;
            }

            // T√≠nh t·ªïng ti·ªÅn ƒë·ªÉ hi·ªÉn th·ªã trong confirm
            const allGames = [...initialGames, ...getStoredGames()];
            const cartItemsFull = allGames.filter(g => cart.includes(g.id));
            const total = cartItemsFull.reduce((sum, item) => sum + item.price, 0);
            const totalFormatted = new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(total);

            if (confirm(`X√°c nh·∫≠n thanh to√°n ${cart.length} game?\nT·ªïng c·ªông: ${totalFormatted}`)) {
                let library = getLibrary();
                
                // Th√™m game v√†o th∆∞ vi·ªán
                cart.forEach(id => {
                    if (!library.includes(id)) library.push(id);
                });
                
                saveLibrary(library); // L∆∞u th∆∞ vi·ªán m·ªõi
                saveCart([]);         // X√≥a s·∫°ch gi·ªè h√†ng
                
                alert("Thanh to√°n th√†nh c√¥ng! C·∫£m ∆°n b·∫°n ƒë√£ ·ªßng h·ªô TBN Studio.");
                renderCartPage();     // Load l·∫°i trang ƒë·ªÉ th·∫•y game ƒë√£ mua
                updateCartBadge();    // Reset s·ªë tr√™n icon gi·ªè h√†ng
            }
        }

        // --- H√ÄM ƒê√ÅNH GI√Å (RATING) ---
        function submitRating(gameId, rating) {
            let ratings = JSON.parse(localStorage.getItem('userRatings') || '{}');
            ratings[gameId] = rating;
            localStorage.setItem('userRatings', JSON.stringify(ratings));
            
            // V·∫Ω l·∫°i UI ƒë√°nh gi√°
            alert(`C·∫£m ∆°n b·∫°n ƒë√£ ƒë√°nh gi√° ${rating} sao!`);
            const selectedGame = currentGames.find(g => g.id == gameId);
            if (selectedGame) renderDetailPage(selectedGame);
        }

        function getGameRating(gameId) {
            const ratings = JSON.parse(localStorage.getItem('userRatings') || '{}');
            return ratings[gameId] || 0;
        }

        // --- 3. HELPER FUNCTIONS (FORMAT TEXT) ---
        function formatGameText(text) {
            if (!text) return "";

            let formatted = text
                .replace(/√ù t∆∞·ªüng c·ªët l√µi/g, "<strong>√ù t∆∞·ªüng c·ªët l√µi</strong>")
                .replace(/√ù t∆∞·ªüng trung t√¢m/g, "<strong>√ù t∆∞·ªüng trung t√¢m</strong>")
                .replace(/√ù t∆∞·ªüng:/g, "<strong>√ù t∆∞·ªüng:</strong>")
                .replace(/C·ªët truy·ªán:/g, "<strong>C·ªët truy·ªán:</strong>")
                .replace(/C·ªët truy·ªán(?![^<]*>)/g, "<strong>C·ªët truy·ªán</strong>"); 

            const paragraphs = formatted.split(/\n\s*\n/);
            let html = '';
            
            paragraphs.forEach(para => {
                if (para.trim().includes('+')) {
                    const lines = para.split('\n');
                    let inList = false;
                    
                    lines.forEach(line => {
                        let cleanLine = line.trim();
                        if (cleanLine.startsWith('+')) {
                            if (!inList) { html += '<ul class="custom-list">'; inList = true; }
                            html += `<li>${cleanLine.substring(1).trim()}</li>`;
                        } else {
                            if (inList) { html += '</ul>'; inList = false; }
                            if (cleanLine.length > 0) { html += `<div class="content-paragraph">${line}</div>`; }
                        }
                    });
                    if (inList) html += '</ul>';
                } else {
                    if (para.trim().length > 0) {
                        html += `<div class="content-paragraph">${para.replace(/\n/g, '<br>')}</div>`;
                    }
                }
            });
            return html;
        }

        // --- 4. C√ÅC H√ÄM X·ª¨ L√ù MENU DROPDOWN & L·ªåC GENRE ---
        function getAllGenres() {
            let allGenres = [];
            currentGames.forEach(game => { // D√πng currentGames ƒë·ªÉ l·∫•y c·∫£ genre c·ªßa game m·ªõi
                let genres = game.genre.split(/[,\/]/).map(g => g.trim());
                allGenres.push(...genres);
            });
            return [...new Set(allGenres)].sort();
        }

        function renderGenreDropdown() {
            const dropdown = document.getElementById('genreDropdown');
            if (!dropdown) return;
            const genres = getAllGenres();
            let html = `<a href="#" onclick="filterByGenre('')">‚≠ê T·∫•t c·∫£</a>`;
            genres.forEach(g => {
                html += `<a href="#" onclick="filterByGenre('${g}')">${g}</a>`;
            });
            dropdown.innerHTML = html;
        }

        function filterByGenre(genre) {
            const searchInput = document.getElementById('searchInput');
            if(searchInput) {
                searchInput.value = genre;
                searchInput.dispatchEvent(new Event('input'));
                document.getElementById('gallery-title').scrollIntoView({behavior: "smooth"});
            }
        }

        // --- 5. RENDER C√ÅC TRANG ---
        
        function openCartInNewTab() { window.open(`${window.location.pathname}?view=cart`, '_blank'); }
        function goToCartView() { window.location.href = `${window.location.pathname}?view=cart`; }
        function openGameDetail(gameId) { window.open(`${window.location.pathname}?game=${gameId}`, '_blank'); }
        function goToUploadPage() { window.location.href = `${window.location.pathname}?view=upload`; }
        function getQueryParam(param) { const urlParams = new URLSearchParams(window.location.search); return urlParams.get(param); }

        // === 5.1 TRANG CH·ª¶ ===
        function renderHomePage() {
            appContainer.innerHTML = `
                <nav class="navbar">
                    <a class="logo" href="about.html">
                        <i class="fa-solid fa-gamepad"></i> TBN STUDIO
                    </a>
                    <div class="nav-links">
                        <a href="#" class="active">Trang ch·ªß</a>
                        <a href="#gallery-title">Kh√°m ph√°</a>
                        <div class="dropdown">
                            <a href="#">Th·ªÉ lo·∫°i <i class="fa-solid fa-caret-down" style="font-size: 0.8rem;"></i></a>
                            <div class="dropdown-content" id="genreDropdown"></div>
                        </div>
                        <a href="#">C·ªông ƒë·ªìng</a>
                        <a href="#" onclick="goToUploadPage()" style="color:var(--primary-color);font-weight:bold;">
                            <i class="fa-solid fa-upload"></i> ƒêƒÉng t·∫£i game
                        </a>
                    </div>
                    <div class="nav-actions">
                        <div class="search-box">
                            <input type="text" id="searchInput" placeholder="T√¨m game...">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </div>
                        <div class="icon-btn" onclick="openCartInNewTab()" title="Xem gi·ªè h√†ng">
                            <i class="fa-solid fa-cart-shopping"></i>
                            <span class="cart-badge" style="display:none">0</span>
                        </div>
                        <button class="btn-login" onclick="alert('Ch·ª©c nƒÉng ƒëƒÉng nh·∫≠p ƒëang b·∫£o tr√¨!')">ƒêƒÉng nh·∫≠p</button>
                    </div>
                </nav>

                <div class="hero">
                    <h1>TR√ÄN B·ªò NH·ªö</h1>
                    <p>‚ú® H·ªôi ch·ª£ Game Indie - N∆°i √Ω t∆∞·ªüng th√†nh hi·ªán th·ª±c ‚ú®</p>
                </div>

                <div class="container">
                    <h2 id="gallery-title">üî• Game ƒê·ªÅ Xu·∫•t</h2>
                    <div class="game-grid" id="gameGrid"></div>
                </div>
            `;
            
            const gameGrid = document.getElementById('gameGrid');
            const searchInput = document.getElementById('searchInput');

            renderGames(currentGames, gameGrid);
            updateCartBadge();
            renderGenreDropdown(); 
            
            searchInput.addEventListener('input', function(e) {
                const keyword = e.target.value.toLowerCase();
                const filteredGames = currentGames.filter(game => 
                    game.name.toLowerCase().includes(keyword) || 
                    game.genre.toLowerCase().includes(keyword)
                );
                renderGames(filteredGames, gameGrid);
            });
        }

        // === 5.2 TRANG ƒêƒÇNG T·∫¢I GAME (M·ªöI - ƒê·∫¶Y ƒê·ª¶ TH√îNG TIN) ===
        function renderUploadPage() {
            appContainer.innerHTML = `
                <nav class="navbar">
                    <a class="logo" href="${window.location.pathname}">
                        <i class="fa-solid fa-gamepad"></i> TBN STUDIO
                    </a>
                    <div class="nav-links">
                        <a href="${window.location.pathname}">Trang ch·ªß</a>
                        <a href="#" class="active">ƒêƒÉng t·∫£i</a>
                    </div>
                </nav>

                <div class="container">
                    <div class="upload-section">
                        <div class="upload-header">
                            <h1><i class="fa-solid fa-cloud-arrow-up"></i> ƒêƒÉng t·∫£i Game M·ªõi</h1>
                            <p>Chia s·∫ª s·ª± s√°ng t·∫°o c·ªßa b·∫°n v·ªõi c·ªông ƒë·ªìng</p>
                        </div>
                        <form id="uploadFormContent">
                            <div class="form-row">
                                <div class="form-col">
                                    <label>T√™n Game <span class="required-mark">*</span>:</label>
                                    <input type="text" id="gName" required placeholder="Nh·∫≠p t√™n game...">
                                </div>
                                <div class="form-col">
                                    <label>Gi√° (VNƒê) <span class="required-mark">*</span>:</label>
                                    <input type="number" id="gPrice" placeholder="Nh·∫≠p 0 n·∫øu Mi·ªÖn ph√≠">
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-col">
                                    <label>S·ªë ng∆∞·ªùi ch∆°i <span class="required-mark">*</span>:</label>
                                    <input type="text" id="gPlayers" required placeholder="VD: Single, Multiplayer...">
                                </div>
                                <div class="form-col">
                                    <label>Th·ªÉ lo·∫°i <span class="required-mark">*</span>:</label>
                                    <input type="text" id="gGenre" required placeholder="VD: Action, RPG...">
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-col">
                                    <label>Ng∆∞·ªùi ph√°t tri·ªÉn <span class="required-mark">*</span>:</label>
                                    <input type="text" id="gDev" required placeholder="T√™n t√°c gi·∫£...">
                                </div>
                                <div class="form-col">
                                    <label>Th√¥ng tin Bank (ƒê·ªÉ nh·∫≠n ti·ªÅn):</label>
                                    <input type="text" id="gBank" placeholder="STK - Ng√¢n h√†ng - T√™n ch·ªß th·∫ª">
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Gi·ªõi thi·ªáu ng·∫Øn (Intro) <span class="required-mark">*</span>:</label>
                                <textarea id="gIntro" rows="3" required placeholder="ƒêo·∫°n gi·ªõi thi·ªáu ng·∫Øn g·ªçn ƒë·ªÉ thu h√∫t ng∆∞·ªùi ch∆°i..."></textarea>
                            </div>

                            <div class="form-group">
                                <label>√ù t∆∞·ªüng v√† C·ªët truy·ªán <span class="required-mark">*</span>:</label>
                                <textarea id="gStory" rows="5" required placeholder="M√¥ t·∫£ chi ti·∫øt c·ªët truy·ªán v√† √Ω t∆∞·ªüng game..."></textarea>
                            </div>

                            <div class="form-group">
                                <label>C√°ch ch∆°i (Gameplay) <span class="required-mark">*</span>:</label>
                                <textarea id="gGameplay" rows="3" required placeholder="H∆∞·ªõng d·∫´n ph√≠m b·∫•m, c√°ch ch∆°i..."></textarea>
                            </div>

                            <div class="form-row">
                                <div class="form-col">
                                    <label>ƒêi·ªÅu ki·ªán Th·∫Øng <span class="required-mark">*</span>:</label>
                                    <input type="text" id="gWin" required placeholder="L√†m sao ƒë·ªÉ th·∫Øng?">
                                </div>
                                <div class="form-col">
                                    <label>ƒêi·ªÅu ki·ªán Thua <span class="required-mark">*</span>:</label>
                                    <input type="text" id="gLoss" required placeholder="Khi n√†o th√¨ Game Over?">
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-col">
                                    <label>Thumbnail (·∫¢nh b√¨a) <span class="required-mark">*</span>:</label>
                                    <input type="file" id="gImage" accept="image/*" required>
                                </div>
                                <div class="form-col">
                                    <label>Link Game (Thay cho upload file):</label>
                                    <input type="text" id="gLink" placeholder="D√°n link Itch.io ho·∫∑c Drive v√†o ƒë√¢y...">
                                </div>
                            </div>

                            <button type="submit" class="btn-play" style="width: 250px; margin: 30px auto 0; display: block; font-size: 1.2rem;">
                                <i class="fa-solid fa-paper-plane"></i> ƒêƒÇNG NGAY
                            </button>
                        </form>
                    </div>
                </div>
            `;
            
            document.getElementById('uploadFormContent').addEventListener('submit', handleGameUpload);
            document.title = "ƒêƒÉng t·∫£i Game | TBN Studio";
        }

        function handleGameUpload(e) {
            e.preventDefault();
            // L·∫•y d·ªØ li·ªáu t·ª´ form
            const name = document.getElementById('gName').value;
            const price = parseInt(document.getElementById('gPrice').value) || 0;
            const players = document.getElementById('gPlayers').value;
            const genre = document.getElementById('gGenre').value;
            const developer = document.getElementById('gDev').value;
            const bank = document.getElementById('gBank').value;
            const intro = document.getElementById('gIntro').value;
            const story = document.getElementById('gStory').value;
            const gameplay = document.getElementById('gGameplay').value;
            const winCondition = document.getElementById('gWin').value;
            const lossCondition = document.getElementById('gLoss').value;
            const linkGame = document.getElementById('gLink').value || "#"; // L·∫•y link game
            const fileInput = document.getElementById('gImage');
            
            if (fileInput.files && fileInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const newGame = {
                        id: Date.now(), 
                        name: name, 
                        desc: intro, // D√πng intro l√†m desc ng·∫Øn
                        intro: intro,
                        story: story,
                        gameplay: gameplay,
                        winCondition: winCondition,
                        lossCondition: lossCondition,
                        price: price, 
                        bankInfo: bank,
                        img: e.target.result, 
                        genre: genre, 
                        players: players, 
                        developer: developer, 
                        release: new Date().toLocaleDateString('vi-VN'), // Ng√†y hi·ªán t·∫°i
                        videoUrl: "https://www.youtube.com/embed/n4yK54iF55g?autoplay=1&mute=1", // Video m·∫∑c ƒë·ªãnh
                        downloadUrl: linkGame // L∆∞u link t·∫£i
                    };
                    
                    // Th√™m v√†o m·∫£ng hi·ªán t·∫°i
                    currentGames.unshift(newGame);
                    // L∆ØU V√ÄO LOCAL STORAGE ƒê·ªÇ KH√îNG M·∫§T D·ªÆ LI·ªÜU
                    saveCustomGame(newGame);
                    
                    alert("ƒêƒÉng t·∫£i game th√†nh c√¥ng! D·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c l∆∞u v√†o tr√¨nh duy·ªát.");
                    window.location.href = window.location.pathname; // Quay v·ªÅ trang ch·ªß
                }
                reader.readAsDataURL(fileInput.files[0]);
            }
        }

        // ... [C√ÅC H√ÄM RENDER GAME, CART, DETAIL C≈®] ...
        function renderGames(games, gridElement) {
            gridElement.innerHTML = "";
            const cart = getCart();
            const library = getLibrary();

            if(games.length === 0) {
                gridElement.innerHTML = "<p style='text-align:center; color:#666; grid-column: 1/-1;'>Kh√¥ng t√¨m th·∫•y game n√†o...</p>";
                return;
            }
            games.forEach(game => {
                const isFree = game.price == 0;
                const isOwned = library.includes(game.id);
                const isInCart = cart.includes(game.id);

                let priceDisplay = isFree ? "FREE" : formatter.format(game.price);
                let priceClass = isFree ? "free" : "";
                if (isOwned) { priceDisplay = "OWNED"; priceClass = "owned"; }
                const bankDisplayClass = (!isFree && game.bankInfo) ? "show-bank" : "";

                let buttonHtml = '';
                if (isOwned) {
                      buttonHtml = `
                        <div class="card-actions">
                             <button onclick="openGameDetail(${game.id})" class="btn-secondary" style="flex:1;">Chi ti·∫øt</button>
                             <button onclick="goToCartView()" class="btn-play" style="flex:1; background:var(--success-color); color:white;">ƒê√£ s·ªü h·ªØu</button>
                        </div>`;
                } else if (isFree) {
                      buttonHtml = `
                        <div class="card-actions">
                            <button onclick="openGameDetail(${game.id})" class="btn-play">CH∆†I NGAY</button>
                        </div>`;
                } else {
                    buttonHtml = `
                        <div class="card-actions">
                             <button onclick="openGameDetail(${game.id})" class="btn-play">MUA NGAY</button>
                             <button onclick="addToCart(${game.id})" class="btn-secondary ${isInCart ? 'added' : ''}" title="${isInCart ? 'ƒê√£ trong gi·ªè' : 'Th√™m v√†o gi·ªè'}">
                                <i class="fa-solid ${isInCart ? 'fa-check' : 'fa-cart-plus'}"></i>
                             </button>
                        </div>`;
                }

                const card = document.createElement('div');
                card.className = 'game-card';
                card.innerHTML = `
                    <div class="price-tag ${priceClass}">${priceDisplay}</div>
                    <div class="game-thumb"><img src="${game.img}" alt="${game.name}"></div>
                    <div class="game-info">
                        <h3 class="game-title">${game.name}</h3>
                        <p class="game-desc">${game.desc}</p>
                        <div class="bank-info-display ${bankDisplayClass}">üí≥ CK: ${game.bankInfo}</div>
                        ${buttonHtml}
                    </div>
                `;
                gridElement.appendChild(card);
            });
        }

        // === 5.2 TRANG GI·ªé H√ÄNG (CART PAGE) ===
        function renderCartPage() {
            const cartIds = getCart();
            const libraryIds = getLibrary();
            // C·∫ßn l·∫•y c·∫£ game custom n·∫øu c√≥ trong gi·ªè (load l·∫°i t·ª´ LS ƒë·ªÉ ch·∫Øc ch·∫Øn)
            const allGames = [...initialGames, ...getStoredGames()];
            const cartItemsFull = allGames.filter(g => cartIds.includes(g.id));
            const ownedItemsFull = allGames.filter(g => libraryIds.includes(g.id));

            const total = cartItemsFull.reduce((sum, item) => sum + item.price, 0);

            let cartHtml = '';
            if (cartItemsFull.length === 0) {
                cartHtml = '<div class="empty-cart-msg"><h3>Gi·ªè h√†ng tr·ªëng!</h3><p>H√£y quay l·∫°i trang ch·ªß ƒë·ªÉ t√¨m th√™m game hay nh√©.</p></div>';
            } else {
                cartHtml = `
                    <table class="cart-table">
                        <thead>
                            <tr><th>Game</th><th>Gi√°</th><th>H√†nh ƒë·ªông</th></tr>
                        </thead>
                        <tbody>
                            ${cartItemsFull.map(item => `
                                <tr>
                                    <td style="display:flex; gap:15px; align-items:center;">
                                        <img src="${item.img}" class="cart-item-img">
                                        <strong>${item.name}</strong>
                                    </td>
                                    <td>${formatter.format(item.price)}</td>
                                    <td><button class="btn-remove" onclick="removeFromCart(${item.id})"><i class="fa-solid fa-trash"></i></button></td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                    <div class="cart-total">T·ªïng c·ªông: ${formatter.format(total)}</div>
                    <div style="background: #fff3cd; padding: 15px; margin-top: 20px; border-radius: 10px; border: 1px solid #ffeeba;">
                         <strong><i class="fa-solid fa-circle-info"></i> Th√¥ng tin thanh to√°n:</strong><br>
                         C√°c game trong gi·ªè s·∫Ω ƒë∆∞·ª£c thanh to√°n qua chuy·ªÉn kho·∫£n. Vui l√≤ng nh·∫•n n√∫t b√™n d∆∞·ªõi ƒë·ªÉ x√°c nh·∫≠n ƒë√£ chuy·ªÉn kho·∫£n v√† nh·∫≠n game.
                    </div>
                    <button class="btn-checkout" onclick="processCheckout()"><i class="fa-regular fa-credit-card"></i> THANH TO√ÅN NGAY</button>
                `;
            }

            let ownedHtml = '';
            if (ownedItemsFull.length > 0) {
                ownedHtml = `
                    <h2 style="margin-top:50px; border-color: var(--success-color);">Th∆∞ vi·ªán Game ƒë√£ s·ªü h·ªØu</h2>
                    <div class="owned-list">
                        ${ownedItemsFull.map(item => `
                            <div class="owned-item">
                                <img src="${item.img}" style="width:100%; height:100px; object-fit:cover; border-radius:5px; margin-bottom:10px;">
                                <h4>${item.name}</h4>
                                <a href="${window.location.pathname}?game=${item.id}" style="display:block; margin-top:5px; text-decoration:none; color:var(--primary-color); font-weight:bold;">T·∫£i / Ch∆°i</a>
                            </div>
                        `).join('')}
                    </div>
                `;
            }

            appContainer.innerHTML = `
                <nav class="navbar">
                    <a class="logo" href="${window.location.pathname}">
                        <i class="fa-solid fa-gamepad"></i> TBN STUDIO
                    </a>
                    <div class="nav-links">
                        <a href="${window.location.pathname}">Trang ch·ªß</a>
                        <a href="#" class="active">Gi·ªè h√†ng</a>
                    </div>
                </nav>
                <div class="container cart-section">
                    <h1><i class="fa-solid fa-cart-shopping"></i> Gi·ªè h√†ng c·ªßa b·∫°n</h1>
                    ${cartHtml}
                    ${ownedHtml}

                    <div style="margin-top: 50px; border-top: 1px solid #ccc; padding-top: 20px; text-align: center;">
                        <p style="color: #666; font-style: italic;">Mu·ªën th·ª≠ nghi·ªám l·∫°i t·ª´ ƒë·∫ßu?</p>
                        <button class="btn-reset" onclick="resetLibrary()">
                            <i class="fa-solid fa-rotate-right"></i> Reset tr·∫°ng th√°i ƒë√£ mua & Game ƒë√£ ƒëƒÉng
                        </button>
                    </div>
                </div>
            `;
            document.title = "Gi·ªè h√†ng | TBN Studio";
        }

        // === 5.3 TRANG CHI TI·∫æT (ƒê√É UPDATE N√öT PLAY) ===
        function renderDetailPage(game) {
            const library = getLibrary();
            const isOwned = library.includes(game.id);
            const isFree = game.price == 0;
            const priceDisplay = isFree ? "FREE" : formatter.format(game.price);

            const storyText = formatGameText(game.story || "ƒêang c·∫≠p nh·∫≠t...");
            const gameplayText = formatGameText(game.gameplay || "S·ª≠ d·ª•ng b√†n ph√≠m v√† chu·ªôt.");
            const winText = formatGameText(game.winCondition || "Ho√†n th√†nh m·ª•c ti√™u.");
            const lossText = formatGameText(game.lossCondition || "H·∫øt m·∫°ng.");
            const introText = formatGameText(game.intro || game.desc);
            
            // X·ª≠ l√Ω link t·∫£i (n·∫øu kh√¥ng c√≥ link th√¨ d√πng #)
            const downloadLink = game.downloadUrl || "#";
            const downloadAction = `window.open('${downloadLink}', '_blank')`;

            // X·ª≠ l√Ω Rating
            const currentRating = getGameRating(game.id);
            let ratingHtml = '';
            for(let i=1; i<=5; i++) {
                const activeClass = i <= currentRating ? 'active' : '';
                ratingHtml += `<i class="fa-solid fa-star star-icon ${activeClass}" onclick="submitRating(${game.id}, ${i})"></i>`;
            }

            let mainButtonHtml = '';
            if (isOwned || isFree) {
                mainButtonHtml = `
                    <button onclick="${downloadAction}" 
                            class="btn-play" style="width: 250px; margin-top: 20px; background: var(--primary-color); color: white; box-shadow: 0 4px 0 var(--primary-dark);">
                        <i class="fa-solid fa-download"></i> T·∫¢I V√Ä CH∆†I NGAY
                    </button>`;
            } else {
                mainButtonHtml = `
                    <button onclick="buyNowFromDetail(${game.id})" 
                            class="btn-play" style="width: 250px; margin-top: 20px; background: var(--accent-pink); color: white; box-shadow: 0 4px 0 #d63031;">
                        <i class="fa-solid fa-cart-plus"></i> MUA V√Ä T·∫¢I (${priceDisplay})
                    </button>
                    <p style="margin-top:10px; font-size:0.9rem; color:#666;">*Game s·∫Ω ƒë∆∞·ª£c th√™m v√†o gi·ªè v√† chuy·ªÉn ƒë·∫øn trang thanh to√°n.</p>`;
            }

            appContainer.innerHTML = `
                <nav class="navbar">
                    <a class="logo" href="${window.location.pathname}">
                        <i class="fa-solid fa-gamepad"></i> TBN STUDIO
                    </a>
                    <div class="nav-links">
                        <a href="${window.location.pathname}">Trang ch·ªß</a>
                        <div class="icon-btn" onclick="openCartInNewTab()">
                             <i class="fa-solid fa-cart-shopping"></i>
                             <span class="cart-badge" style="display:none">0</span>
                        </div>
                    </div>
                </nav>

                <div class="container">
                    <div class="detail-header">
                        <h1>${game.name}</h1>
                        <p>T√°c gi·∫£: ${game.developer}</p>
                        ${mainButtonHtml}
                    </div>

                    <div class="detail-grid">
                        <div class="main-content">
                            <div class="video-player">
                                <iframe src="${game.videoUrl}" allow="autoplay; encrypted-media" allowfullscreen></iframe>
                            </div>
                            <div class="intro-box">
                                <h2><i class="fa-regular fa-star" style="color: var(--accent-yellow);"></i> Gi·ªõi thi·ªáu chung</h2>
                                <div class="intro-content">${introText}</div>
                            </div>
                            <div class="story-section">
                                <h2 style="border-left: 8px solid var(--accent-pink);">üìñ C·ªët truy·ªán & √ù t∆∞·ªüng</h2>
                                <div class="story-box">${storyText}</div>
                                <h2 style="margin-top: 30px;">üéÆ H∆∞·ªõng d·∫´n ch∆°i</h2>
                                <div class="gameplay-box">
                                    <strong>C√°ch ƒëi·ªÅu khi·ªÉn:</strong> ${gameplayText}
                                    <ul class="win-loss-list">
                                        <li>
                                            <i class="fa-solid fa-trophy" style="color: gold; font-size: 1.2rem; margin-top: 5px;"></i> 
                                            <div style="flex:1;"><strong>Th·∫Øng:</strong> ${winText}</div>
                                        </li>
                                        <li>
                                            <i class="fa-solid fa-skull" style="color: #ff7675; font-size: 1.2rem; margin-top: 5px;"></i> 
                                            <div style="flex:1;"><strong>Thua:</strong> ${lossText}</div>
                                        </li>
                                    </ul>
                                </div>
                                ${!isFree ? `
                                <div class="purchase-note">
                                    <i class="fa-solid fa-triangle-exclamation" style="font-size: 1.5rem;"></i>
                                    <div>
                                        <strong>L∆∞u √Ω mua game:</strong><br>
                                        Vui l√≤ng chuy·ªÉn kho·∫£n s·ªë ti·ªÅn <strong>${priceDisplay}</strong> ƒë·∫øn STK: <strong>${game.bankInfo}</strong>.
                                    </div>
                                </div>` : ''}
                            </div>
                        </div>

                        <div class="game-specs">
                            <h3>üîç Th√¥ng s·ªë k·ªπ thu·∫≠t</h3>
                            <div class="spec-item"><strong>Th·ªÉ lo·∫°i:</strong> <span>${game.genre}</span></div>
                            <div class="spec-item"><strong>S·ªë ng∆∞·ªùi ch∆°i:</strong> <span>${game.players}</span></div>
                            <div class="spec-item"><strong>Ph√°t tri·ªÉn b·ªüi:</strong> <span>${game.developer}</span></div>
                            <div class="spec-item"><strong>Ng√†y ƒëƒÉng t·∫£i:</strong> <span>${game.release}</span></div>
                            <div class="spec-item"><strong>Gi√° ti·ªÅn:</strong> <span style="color: var(--accent-pink); font-weight:bold;">${priceDisplay}</span></div>
                            <div class="spec-item" style="margin-top:15px; border-top:1px solid #eee; padding-top:10px;">
                                <strong>Tr·∫°ng th√°i:</strong> <br> <span style="color: green; font-weight:bold;">ƒêang ph√°t h√†nh</span>
                            </div>

                            <div class="rating-box">
                                <div class="rating-title">ƒê√°nh gi√° game n√†y:</div>
                                <div class="stars-container">
                                    ${ratingHtml}
                                </div>
                                ${currentRating > 0 ? `<div class="user-rated-msg">B·∫°n ƒë√£ ch·∫•m ${currentRating}/5 sao</div>` : ''}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.title = `${game.name} - Chi ti·∫øt | TBN Studio`;
            updateCartBadge();
        }

        function buyNowFromDetail(gameId) {
            let cart = getCart();
            if(!cart.includes(gameId)) {
                cart.push(gameId);
                saveCart(cart);
            }
            window.location.href = `${window.location.pathname}?view=cart`;
        }

        // === 6. MAIN INIT ===
        document.addEventListener('DOMContentLoaded', function() {
            const gameId = getQueryParam('game');
            const view = getQueryParam('view');

            if (view === 'cart') {
                renderCartPage();
            } else if (view === 'upload') {
                renderUploadPage();
            } else if (gameId) {
                // L·∫•y game t·ª´ danh s√°ch t·ªïng h·ª£p (g·ªëc + custom)
                const selectedGame = currentGames.find(g => g.id == gameId);
                selectedGame ? renderDetailPage(selectedGame) : (alert("Game kh√¥ng t·ªìn t·∫°i!"), renderHomePage());
            } else {
                renderHomePage();
            }
        });
    </script>
</body>
</html>
