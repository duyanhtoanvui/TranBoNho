<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TR√ÄN B·ªò NH·ªö - Game Marketplace</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- CSS RESET & VARIABLES --- */
        :root {
            --bg-gradient-1: #87CEEB; 
            --bg-gradient-2: #E0F7FA; 
            --card-bg: rgba(255, 255, 255, 0.95);
            --text-color: #2c3e50;
            --primary-color: #00a8ff;
            --primary-dark: #0984e3;
            --accent-yellow: #fbc531;
            --accent-pink: #ff7675;
            --nav-bg: rgba(255, 255, 255, 0.9); 
            --font-main: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            color: var(--text-color);
            font-family: var(--font-main);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            background-color: #87CEEB;
            background: linear-gradient(180deg, var(--bg-gradient-1) 0%, var(--bg-gradient-2) 100%);
        }

        /* --- NAVBAR STYLES --- */
        .navbar {
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 15px 30px;
            background: var(--nav-bg); 
            backdrop-filter: blur(10px); 
            position: sticky; 
            top: 0;
            z-index: 1000; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
            border-bottom: 1px solid rgba(255,255,255,0.5);
        }

        .logo {
            font-size: 1.5rem; 
            font-weight: 900; 
            color: var(--primary-color); 
            text-transform: uppercase;
            letter-spacing: 1px; 
            text-decoration: none;
            display: flex; 
            align-items: center; 
            gap: 10px;
        }
        .logo i { color: var(--accent-yellow); font-size: 1.8rem; }

        .nav-links { display: flex; gap: 25px; font-weight: 600; align-items: center; }
        .nav-links a { text-decoration: none; color: #555; transition: 0.3s; position: relative; font-size: 1rem; }
        .nav-links a:hover, .nav-links a.active { color: var(--primary-color); }
        .nav-links a::after {
            content: ''; position: absolute; width: 0; height: 3px; bottom: -5px; left: 0;
            background: var(--accent-yellow); transition: width 0.3s; border-radius: 2px;
        }
        .nav-links a:hover::after { width: 100%; }

        .nav-actions { display: flex; align-items: center; gap: 15px; }
        
        .search-box {
            position: relative; 
            background: #f1f2f6; 
            border-radius: 30px; 
            padding: 5px 15px;
            display: flex; 
            align-items: center; 
            border: 2px solid transparent; 
            transition: 0.3s;
        }
        .search-box:focus-within { border-color: var(--primary-color); background: #fff; }
        .search-box input {
            border: none; background: transparent; outline: none; padding: 5px; width: 150px; 
            color: #333; font-size: 0.9rem;
        }
        .search-box i { color: #aaa; }

        .icon-btn { font-size: 1.2rem; color: #555; cursor: pointer; position: relative; transition: 0.3s; }
        .icon-btn:hover { color: var(--primary-color); transform: scale(1.1); }
        
        .cart-badge {
            position: absolute; top: -8px; right: -8px; background: var(--accent-pink); color: white;
            font-size: 0.7rem; width: 18px; height: 18px; border-radius: 50%; display: flex; 
            justify-content: center; align-items: center; font-weight: bold;
        }

        .btn-login {
            background: var(--primary-color); color: white; border: none; padding: 8px 20px; 
            border-radius: 20px; font-weight: bold; cursor: pointer; transition: 0.3s;
            box-shadow: 0 4px 10px rgba(0, 168, 255, 0.3);
        }
        .btn-login:hover { background: var(--primary-dark); transform: translateY(-2px); }

        /* --- HERO SECTION --- */
        .hero { text-align: center; padding: 60px 20px 40px; }
        .hero h1 {
            font-size: 3rem; color: var(--primary-color); text-shadow: 3px 3px 0px #fff; 
            margin-bottom: 10px;
        }
        .hero p { background: #fff; display: inline-block; padding: 5px 20px; border-radius: 20px; color: #666; font-weight: 600; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }

        /* --- MAIN CONTAINER & GRID --- */
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        h2 { border-left: 8px solid var(--accent-yellow); padding-left: 20px; margin: 30px 0; text-transform: uppercase; color: var(--primary-color); font-weight: 800; }
        
        .game-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 30px; }
        
        .game-card {
            background: var(--card-bg); border-radius: 20px; overflow: hidden; transition: all 0.3s;
            box-shadow: 0 10px 25px rgba(0, 168, 255, 0.15); position: relative;
            border: 2px solid transparent; display: flex; flex-direction: column;
        }
        .game-card:hover { transform: translateY(-10px); border-color: var(--accent-yellow); }
        
        .price-tag { position: absolute; top: 15px; right: 15px; background: var(--accent-pink); color: #fff; padding: 5px 12px; border-radius: 20px; font-weight: bold; font-size: 0.85rem; z-index: 2; }
        .price-tag.free { background: var(--primary-color); }
        
        .game-thumb { width: 100%; height: 180px; overflow: hidden; }
        .game-thumb img { width: 100%; height: 100%; object-fit: cover; display: block; transition: transform 0.3s; }
        .game-card:hover .game-thumb img { transform: scale(1.05); }

        .game-info { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; }
        .game-title { font-size: 1.3rem; color: var(--primary-color); margin-bottom: 5px; font-weight: 700; }
        .game-desc { font-size: 0.9rem; color: #666; margin-bottom: 15px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        
        .btn-play { width: 100%; padding: 10px; background: var(--accent-yellow); color: #2c3e50; border: none; border-radius: 30px; font-weight: 800; cursor: pointer; transition: 0.2s; box-shadow: 0 3px 0 #e1b12c; margin-top: auto; }
        .btn-play:hover { background: #fcd567; transform: translateY(-2px); }
        .btn-play:active { transform: translateY(2px); box-shadow: none; }

        .bank-info-display { background: #f0f9ff; padding: 10px; margin-top: 10px; border-radius: 8px; font-size: 0.85rem; color: #555; border-left: 3px solid var(--primary-color); display: none; }
        .show-bank { display: block; }

        /* --- FORM UPLOAD --- */
        .upload-section { background: #fff; padding: 30px; border-radius: 20px; margin-top: 50px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .form-row { display: flex; gap: 20px; margin-bottom: 15px; }
        .form-col { flex: 1; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; color: var(--primary-color); font-weight: 700; }
        input, textarea { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #ddd; background: #f9f9f9; outline: none; }
        input:focus, textarea:focus { border-color: var(--primary-color); background: #fff; }

        /* --- FOOTER --- */
        footer { text-align: center; padding: 40px; margin-top: 60px; color: #fff; background: var(--primary-color); font-weight: bold; }

        /* --- DETAIL PAGE STYLES --- */
        .detail-header { text-align: left; padding-top: 20px; margin-bottom: 30px; }
        .detail-header h1 { font-size: 3rem; color: var(--text-color); text-shadow: none; margin-bottom: 5px; }
        .detail-header p { background: var(--card-bg); padding: 5px 10px; border-radius: 10px; color: #555; font-weight: 600; display: inline-block; }

        .detail-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 30px; align-items: start; }
        .video-player { width: 100%; height: 450px; background: #000; border-radius: 15px; overflow: hidden; box-shadow: 0 10px 20px rgba(0,0,0,0.2); position: relative; }
        .video-player iframe { width: 100%; height: 100%; border: none; }

        .game-specs { background: var(--card-bg); padding: 30px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .game-specs h3 { color: var(--primary-dark); margin-bottom: 15px; border-bottom: 3px solid var(--accent-yellow); padding-bottom: 5px; }
        .spec-item { margin-bottom: 10px; font-size: 0.95rem; }
        .spec-item strong { color: var(--text-color); display: inline-block; width: 110px; }
        
        .story-section { margin-top: 30px; }
        /* CSS cho ph·∫ßn n·ªôi dung chi ti·∫øt ƒë·ªông */
        .story-box { background: var(--card-bg); padding: 25px; border-radius: 15px; margin-top: 15px; color: #333; line-height: 1.6; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .gameplay-box { background: var(--card-bg); padding: 25px; border-radius: 15px; margin-top: 15px; color: #333; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .win-loss-list { list-style: none; padding-left: 0; margin-top: 15px; }
        .win-loss-list li { margin-bottom: 10px; display: flex; align-items: flex-start; gap: 10px; }
        .purchase-note { background: #fff3cd; color: #856404; padding: 15px; border-radius: 10px; margin-top: 20px; border: 1px solid #ffeeba; display: flex; align-items: center; gap: 10px; }

        /* --- CSS CHO PH·∫¶N GI·ªöI THI·ªÜU --- */
        .intro-box {
            background: linear-gradient(to right, #ffffff, #f0f9ff);
            padding: 25px;
            border-radius: 15px;
            margin-top: 25px;
            border: 1px solid #e1e1e1;
            border-left: 6px solid var(--primary-color);
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .intro-box h2 {
            border-left: none; /* B·ªè border m·∫∑c ƒë·ªãnh c·ªßa h2 c≈© */
            padding-left: 0;
            margin-top: 0;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
        }

        .intro-content {
            font-size: 1.1rem;
            color: #444;
            font-weight: 500;
        }
        
        /* [M·ªöI] CSS cho List t·∫°o t·ª± ƒë·ªông t·ª´ d·∫•u + */
        .custom-list {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        .custom-list li {
            margin-bottom: 5px;
            list-style-type: disc;
        }
        /* [M·ªöI] CSS cho ƒëo·∫°n vƒÉn b·∫£n t√°ch bi·ªát */
        .content-paragraph {
            margin-bottom: 15px;
        }

        /* --- RESPONSIVE --- */
        @media (max-width: 900px) {
            .detail-grid { grid-template-columns: 1fr; }
            .video-player { height: 300px; }
        }
        @media (max-width: 768px) {
            .navbar { flex-direction: column; gap: 15px; padding: 15px; }
            .nav-links { gap: 15px; font-size: 0.9rem; width: 100%; justify-content: center; }
            .nav-actions { width: 100%; justify-content: space-between; }
            .search-box input { width: 100%; }
            .form-row { flex-direction: column; gap: 0; }
        }
    </style>
</head>
<body>

    <div id="app-container">
    </div>

    <footer>
        <p>&copy; 2025 Nh√≥m TR√ÄN B·ªò NH·ªö.</p>
    </footer>

    <script>
        // --- 1. D·ªÆ LI·ªÜU GAME (DATABASE) ---
        const initialGames = [
            { 
                id: 1, 
                name: "Magician vs. Goblin", 
                desc: "ƒê·∫°i chi·∫øn ·∫£o thu·∫≠t gia v√† qu√°i v·∫≠t Goblin. Game nh·∫≠p vai h√†nh ƒë·ªông.", 
                // Intro ri√™ng cho game 1
                intro: `B·∫°n c√≥ th·ªÉ s·ªëng s√≥t kh·ªèi b·∫ßy Goblin kh√¥ng?
                
                Magician vs Goblin l√† game h√†nh ƒë·ªông s·ªëng c√≤n nh·ªãp ƒë·ªô nhanh, n∆°i b·∫°n v√†o vai m·ªôt Ph√°p S∆∞ tr·∫ª b·ªã bao v√¢y b·ªüi l≈© Goblin hung h√£n. B·∫°n ch·ªâ c√≥ m·ªôt m√¨nh ‚Äî nh∆∞ng s·ªü h·ªØu ma thu·∫≠t m·∫°nh m·∫Ω. M·ªói gi√¢y l√† m·ªôt tr·∫≠n chi·∫øn sinh t·ªìn khi b·∫°n ph·∫£i v·ª´a n√©, v·ª´a b·∫Øn ph√©p, v·ª´a c·ªë g·∫Øng duy tr√¨ m·∫°ng s·ªëng gi·ªØa s·ªë l∆∞·ª£ng Goblin tƒÉng d·∫ßn theo th·ªùi gian.
                
                C√°c quy·∫øt ƒë·ªãnh c·ªßa b·∫°n ƒë·ªÅu quan tr·ªçng !!!
                
                Li·ªáu b·∫°n c√≥ th·ªÉ tr·ª• ƒë·∫øn cu·ªëi tr·∫≠n, hay s·∫Ω b·ªã ƒë√†n Goblin nu·ªët ch·ª≠ng gi·ªØa chi·∫øn tr∆∞·ªùng?
                `,
                price: 50000, 
                bankInfo: "999999 - Techcombank - VO MINH TRIET", 
                img: "GameImage/game1.png", 
                genre: "2D Action, Top-down Shooter, Survival Combat", 
                players: "Single", 
                developer: "V√µ Minh Tri·∫øt", 
                release: "07/11/2025", 
                videoUrl: "https://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=1&mute=1",
                story: `√ù t∆∞·ªüng c·ªët l√µi:
                
                + Ti√™u di·ªát c√†ng nhi·ªÅu Goblin c√†ng t·ªët.

                + S·ªëng c√†ng l√¢u c√†ng t·ªët.

                + C∆° ch·∫ø ch∆°i nhanh, tr·ª±c quan, mang t√≠nh ph·∫£n x·∫° cao.

                + To√†n b·ªô h√†nh ƒë·ªông th·ª±c hi·ªán tr·ª±c ti·∫øp trong gameplay kh√¥ng c·∫ßn menu ph·ª©c t·∫°p.

                C·ªët truy·ªán:
                
                B·∫°n l√† m·ªôt Ph√°p S∆∞ h·ªçc vi·ªác ƒëang th·ª±c t·∫≠p t·∫°i v√πng r·ª´ng ma thu·∫≠t. Trong l√∫c thi·ªÅn luy·ªán, m·ªôt c√°nh c·ªïng qu√°i v·∫≠t ƒë·ªôt ng·ªôt m·ªü ra, gi·∫£i ph√≥ng Goblin t·ª´ chi·ªÅu kh√¥ng gian kh√°c.
                
                Nhi·ªám v·ª• c·ªßa b·∫°n ph·∫£i tr·ª±c ti·∫øp c·∫ßm c·ª± v√† ti√™u di·ªát nhi·ªÅu goblin nh·∫•t c√≥ th·ªÉ ƒë·ªÉ ch·ªù vi·ªán binh ƒë·∫øn !`,
                gameplay: `Di chuy·ªÉn: n√∫t di chuy·ªÉn ho·∫∑c chu·ªôt 

                Ng·∫Øm: theo h∆∞·ªõng chu·ªôt.
                
                B·∫Øn ph√©p: Nh·∫•n/gi·ªØ chu·ªôt tr√°i ‚Üí b·∫Øn Spell.`,
                winCondition: `Kh√¥ng c√≥ ƒëi·ªÅu ki·ªán th·∫Øng c·ªë ƒë·ªãnh. B·∫°n c√†ng s·ªëng l√¢u ‚Üí c√†ng ‚Äúth·∫Øng‚Äù.`,
                lossCondition: "Game Over ngay l·∫≠p t·ª©c khi: Player HP = 0 (b·ªã Goblin t·∫•n c√¥ng qu√° nhi·ªÅu)."
            },
            { 
                id: 2, 
                name: "Sinh Vi√™n sinh t·ªìn", 
                desc: "S·ªëng s√≥t qua 30 ng√†y c√πng nh·ªØng bi·∫øn c·ªë b·∫•t ng·ªù th·ªùi Sinh vi√™n.", 
                // Intro ri√™ng cho game 2
                intro: `Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi chi·∫øn tr∆∞·ªùng kh·ªëc li·ªát nh·∫•t: ƒê·∫°i H·ªçc! Kh√¥ng c√≥ s√∫ng ƒë·∫°n, k·∫ª th√π c·ªßa b·∫°n l√† 'Deadline', 'M√¨ t√¥m' v√† 'H·∫øt ti·ªÅn'.
                B·∫°n c√≥ th·ªÉ TR·ª§ t·ªõi ng√†y cu·ªëi c√πng ƒë∆∞·ª£c kh√¥ng?
                
                Survival Sinh Vi√™n l√† game m√¥ ph·ªèng qu·∫£n l√Ω t√†i nguy√™n cƒÉng th·∫≥ng, n∆°i b·∫°n v√†o vai sinh vi√™n nƒÉm nh·∫•t c·ªë g·∫Øng s·ªëng s√≥t qua 30 ng√†y ƒë·∫ßu ti√™n v·ªõi m·ªôt kho·∫£n tr·ª£ c·∫•p eo h·∫πp.
                
                M·ªói ng√†y l√† m·ªôt th·ª≠ th√°ch: C√¢n b·∫±ng gi·ªØa vi·ªác ƒÉn u·ªëng, h·ªçc t·∫≠p v√† ki·ªÉm so√°t Stress! M·ªçi l·ª±a ch·ªçn ƒë·ªÅu quan tr·ªçng. B·∫°n s·∫Ω ƒÉn m√¨ g√≥i hay m·∫°o hi·ªÉm mua c∆°m b·ª•i? D√†nh ti·ªÅn s·ª≠a xe hay b·ªè h·ªçc ƒë·ªÉ ng·ªß b√π?
                
                ‚ö†Ô∏è C·∫©n th·∫≠n: Ch·ªâ s·ªë Ti·ªÅn, S·ª©c kh·ªèe, ƒê·ªô no, ho·∫∑c Stress v∆∞·ª£t ng∆∞·ª°ng s·∫Ω d·∫´n ƒë·∫øn Game Over ngay l·∫≠p t·ª©c!
                
                Li·ªáu b·∫°n c√≥ th·ªÉ chi·∫øn th·∫Øng ƒë·ªãnh m·ªánh, hay s·∫Ω ph·∫£i "b·ªè h·ªçc v·ªÅ qu√™" tr∆∞·ªõc Ng√†y 30? Ch∆°i ngay v√† t√¨m c√¢u tr·∫£ l·ªùi!`,
                price: 0, 
                bankInfo: "", 
                img: "GameImage/game2.png", 
                genre: "2D Simulator, Resource management, Visual / Text-driven", 
                players: "Single", 
                developer: "V√µ Ng·ªçc B·∫£o Tr√¢n", 
                release: "08/11/2025", 
                videoUrl: "https://www.youtube.com/embed/aPgpJMc6mfU?autoplay=1&mute=1",
                story: `√ù t∆∞·ªüng c·ªët l√µi c·ªßa tr√≤ ch∆°i l√† m√¥ ph·ªèng l·∫°i cu·ªôc chi·∫øn sinh t·ªìn ƒë√¥ th·ªã c·ªßa m·ªôt sinh vi√™n nƒÉm nh·∫•t t·∫°i Vi·ªát Nam. Ng∆∞·ªùi ch∆°i ph·∫£i s·ªëng s√≥t qua 30 ng√†y v·ªõi ng√¢n s√°ch h·∫°n h·∫πp, li√™n t·ª•c qu·∫£n l√Ω v√† c√¢n b·∫±ng 4 ch·ªâ s·ªë sinh m·ªánh: Ti·ªÅn, S·ª©c kh·ªèe, ƒê·ªô no, v√† Stress. 
                
                B·ªëi c·∫£nh game t·∫≠p trung v√†o nh·ªØng ƒë·ªãa ƒëi·ªÉm quen thu·ªôc (ph√≤ng tr·ªç, qu√°n c∆°m b√¨nh d√¢n, gi·∫£ng ƒë∆∞·ªùng), n∆°i ng∆∞·ªùi ch∆°i ƒë·ªëi m·∫∑t v·ªõi c√°c s·ª± ki·ªán ng·∫´u nhi√™n mang t√≠nh may r·ªßi cao (deadline g·∫•p, h∆∞ xe, tr√∫ng th∆∞·ªüng). To√†n b·ªô c√¢u chuy·ªán ƒë∆∞·ª£c truy·ªÅn t·∫£i qua c√°c l·ª±a ch·ªçn d·ª±a tr√™n vƒÉn b·∫£n.
                
                M·ª•c ti√™u l√† ƒë·∫°t ƒë·∫øn Ng√†y 30 m√† kh√¥ng ƒë·ªÉ b·∫•t k·ª≥ 3 ch·ªâ s·ªë Ti·ªÅn, S·ª©c kh·ªèe, ƒê·ªô no (<=0) ho·∫∑c Stress (>=100).`,
                gameplay: "Tr√≤ ch∆°i di·ªÖn ra theo l∆∞·ª£t, v·ªõi m·ªói l∆∞·ª£t l√† m·ªôt ng√†y. Ng∆∞·ªùi ch∆°i ƒëi·ªÅu khi·ªÉn ho√†n to√†n b·∫±ng chu·ªôt, ƒë∆∞a ra quy·∫øt ƒë·ªãnh th√¥ng qua c√°c N√∫t L·ª±a Ch·ªçn ƒëi k√®m v·ªõi m·ªói s·ª± ki·ªán ng·∫´u nhi√™n ho·∫∑c c·ªë ƒë·ªãnh xu·∫•t hi·ªán h√†ng ng√†y. Sau khi ƒë∆∞a ra quy·∫øt ƒë·ªãnh, c√°c ch·ªâ s·ªë c·ªët l√µi (Ti·ªÅn, S·ª©c kh·ªèe, ƒê·ªô no, Stress) s·∫Ω thay ƒë·ªïi. Nhi·ªám v·ª• c·ªßa b·∫°n l√† qu·∫£n l√Ω v√† gi·ªØ 4 ch·ªâ s·ªë n√†y n·∫±m trong gi·ªõi h·∫°n cho ph√©p (t·ªëi thi·ªÉu 0, t·ªëi ƒëa 100) cho ƒë·∫øn khi ho√†n th√†nh Ng√†y 30.",
                winCondition: "S·ªëng s√≥t qua 30 ng√†y.",
                lossCondition: `Game Over s·∫Ω x·∫£y ra ngay l·∫≠p t·ª©c n·∫øu: Ti·ªÅn <= 0 (Ph√° s·∫£n), S·ª©c kh·ªèe <= 0 (Ki·ªát s·ª©c), ƒê·ªô no <= 0 (Ch·∫øt ƒë√≥i), ho·∫∑c Stress >= 100 (B·ªè h·ªçc v·ªÅ qu√™).`
            },
            { 
                id: 3, 
                name: "Anya's Neo Dodger", 
                desc: "N√© tr√°nh b√†i t·∫≠p Vi T√≠ch Ph√¢n trong th·∫ø gi·ªõi Cyberpunk c√πng ANYA.", 
                // Intro ri√™ng cho game 3
                intro: "Sinh t·ªìn qua c∆°n √°c m·ªông Vi T√≠ch Ph√¢n trong th·∫ø gi·ªõi Retro-Cyberpunk c√πng ANYA!",
                price: 0, 
                bankInfo: "", 
                img: "GameImage/game3.png", 
                genre: "Arcade Survival, Endless, 8-bit", 
                players: "Single", 
                developer: "Nguy·ªÖn L√™ Ch√≠ T∆∞·ªùng", 
                release: "09/11/2025", 
                videoUrl: "https://www.youtube.com/embed/xqmehhKTZZI",
                story: `√ù t∆∞·ªüng: 
                
                Do sinh vi√™n 25CTT6 HCMUS ƒëang ƒë·ªëi m·∫∑t v·ªõi k·ª≥ thi Vi T√≠ch Ph√¢n cƒÉng th·∫≥ng, m·ªôt h·ªçc sinh b√≠ ·∫©n trong l·ªõp ƒë√£ x√¢y d·ª±ng game n√†y ƒë·ªÉ gi√∫p c√°c b·∫°n c√πng l·ªõp v√† b·∫£n th√¢n gi·∫£i stress sau nh·ªØng gi·ªù h·ªçc c√†y try-hard Vi T√≠ch Ph√¢n. 
                
                Game l√† n∆°i chuy·ªÉn h√≥a √°p l·ª±c th√†nh m·ªôt th·ª≠ th√°ch gi·∫£i tr√≠ t·ªëc ƒë·ªô cao.
                C·ªët truy·ªán:
                Anya v·ªën l√† m·ªôt c√¥ b√© ng√¢y th∆°, cute ph√¥ mai que, ƒë·∫øn t·ª´ th·∫ø gi·ªõi anime. M·ªôt ng√†y ƒë·∫πp tr·ªùi, B√ôM! Anya b·ªã chuy·ªÉn sinh th·∫≥ng v√†o th·∫ø gi·ªõi ƒë·ªùi th∆∞·ªùng v√† tr·ªü th√†nh m·ªôt t√¢n sinh vi√™n Khoa h·ªçc T·ª± nhi√™n t·∫°i HCMUS.
                
                Cu·ªôc s·ªëng t∆∞·ªüng ch·ª´ng √™m ƒë·∫πp cho ƒë·∫øn khi c√¥ g·∫∑p K·∫ª Ph·∫£n Di·ªán Vi T√≠ch Ph√¢n. √Åp l·ª±c h·ªçc t·∫≠p, deadline d√≠ ƒë√£ bi·∫øn t√¢m tr√≠ c√¥ th√†nh m·ªôt b√£i chi·∫øn tr∆∞·ªùng.
                
                M·ªói ƒë√™m, Anya ph·∫£i b∆∞·ªõc v√†o c∆°n √°c m·ªông: Trong kh√¥ng gian Retro-Cyberpunk c·ªßa ti·ªÅm th·ª©c, nh·ªØng cu·ªën s√°ch Vi Tich Ph√¢n li√™n t·ª•c r∆°i xu·ªëng Ziczac v·ªõi t·ªëc ƒë·ªô nhanh d·∫ßn, mu·ªën "ƒë√® b·∫πp" c√¥. M·ª•c ti√™u duy nh·∫•t: S·ªëng s√≥t!
                `,
                gameplay: "D√πng Ph√≠m M≈©i T√™n Tr√°i/Ph·∫£i ƒë·ªÉ di chuy·ªÉn Anya n√© tr√°nh nh·ªØng cu·ªën s√°ch Vi T√≠ch Ph√¢n.",
                winCondition: "S·ªëng s√≥t v√† v∆∞·ª£t qua ƒë∆∞·ª£c k·ª≥ thi Vi T√≠ch Ph√¢n ngo√†i ƒë·ªùi th·ª±c! =))",
                lossCondition: "Va ch·∫°m 3 l·∫ßn v·ªõi s√°ch Vi T√≠ch Ph√¢n v√† b·ªã ki·∫øn th·ª©c ƒë√® b·∫πp s·∫Ω GAME OVER."
            },
            { 
                id: 4, 
                name: "ERROR RUN", 
                desc: "Ch·∫°y tr·ªën m√†n h√¨nh xanh ch·∫øt ch√≥c g·ªìm BUG v√† ERROR.", 
                // Intro ri√™ng cho game 4
                intro: `H√ÉY TR√ÅNH N√â T·∫§T C·∫¢ C√ÅC BUG - ERROR ƒê·ªÇ MANG V·ªÄ ƒêI·ªÇM S·ªê CAO NH·∫§T CHO M√îN C∆† S·ªû L·∫¨P TR√åNH C·ª¶A B·∫†N !!!

                Li·ªáu b·∫°n c√≥ th·ªÉ ph√° v·ª° k·ª∑ l·ª•c v√† tr·ªü th√†nh "Th√°nh DEADLINE"?`,
                price: 20000, 
                bankInfo: "777777 - ACB - VO NGUYEN CONG TRI", 
                img: "GameImage/game4.png", 
                genre: "Endless Runner, Arcade, Flappy-style", 
                players: "Single", 
                developer: "V√µ Nguy·ªÖn C√¥ng Tr√≠", 
                release: "10/11/2025", 
                videoUrl: "https://www.youtube.com/embed/6AuqZ9ZINVQ",
                story: `√ù t∆∞·ªüng: 
                
                V·ªõi b·ªëi c·∫£nh g·∫ßn g≈©i v√† h√†i h∆∞·ªõc v·ªÅ cu·ªôc s·ªëng c·ªßa sinh vi√™n CNTT, game kh√¥ng ch·ªâ mang l·∫°i nh·ªØng ph√∫t gi√¢y gi·∫£i tr√≠ (v√† ·ª©c ch·∫ø!) m√† c√≤n l√† m·ªôt s·ª± ƒë·ªìng c·∫£m s√¢u s·∫Øc v·ªõi nh·ªØng ai ƒë√£ t·ª´ng "th·ª©c ƒë√™m ch·∫°y deadline".
                
                H√£y chu·∫©n b·ªã tinh th·∫ßn, gi·ªØ ch·∫∑t ph√≠m Space v√† xem b·∫°n c√≥ th·ªÉ s·ªëng s√≥t bao l√¢u trong th·∫ø gi·ªõi code ƒë·∫ßy l·ªói n√†y!
                
                C·ªët truy·ªán: 
                
                V√†o l√∫c 23h58 ƒë√™m h·∫°n ch√≥t, sau c√∫ nh·∫•n "Build & Run" ƒë·ªãnh m·ªánh, ch√†ng sinh vi√™n Tr√≠ c·ªßa FIT@HCMUS b·∫•t ng·ªù b·ªã h√∫t v√†o th·∫ø gi·ªõi m√£ l·ªánh b·ªüi l·ªói "404 - Hope Not Found" v√† h√≥a th√¢n th√†nh m·ªôt nh√¢n v·∫≠t 8-bit nh·ªè b√©.
                
                ƒê·ªÉ tho√°t kh·ªèi c∆°n √°c m·ªông n√†y v√† n·ªôp b√†i k·ªãp gi·ªù, c·∫≠u ph·∫£i li√™n t·ª•c "spam" ph√≠m Space, ch·∫≠t v·∫≠t l∆∞·ª£n l√°ch qua nh·ªØng khe h·ªü t·ª≠ th·∫ßn ƒë∆∞·ª£c t·∫°o b·ªüi c·∫∑p ngo·∫∑c thi·∫øu, d·∫•u ch·∫•m ph·∫©y ƒëi l·∫°c v√† c√°c v√≤ng l·∫∑p v√¥ t·∫≠n. 
                
                Cu·ªôc ƒëua gi·ªù ƒë√¢y kh√¥ng ch·ªâ l√† sinh t·ªìn m√† c√≤n l√† h√†nh tr√¨nh c·∫£m t·ª≠ t√¨m ƒë∆∞·ªùng ƒë·∫øn c√°nh c·ªïng Moodle th·∫ßn th√°nh ƒë·ªÉ "Commit code" th√†nh c√¥ng, b·ªüi ch·ªâ m·ªôt c√∫ va ch·∫°m nh·ªè v√†o l·ªói (Bug), Tr√≠ s·∫Ω ƒë·ªëi m·∫∑t v·ªõi √°n t·ª≠ ƒë√°ng s·ª£ nh·∫•t ƒë·ªùi sinh vi√™n: tr∆∞·ª£t m√¥n v√† ƒë√≥ng ti·ªÅn h·ªçc l·∫°i!`,
                gameplay: `Tr√™n PC/Laptop: Nh·∫•n ph√≠m Spacebar HO·∫∂C click Chu·ªôt tr√°i ƒë·ªÉ l√†m nh√¢n v·∫≠t bay l√™n.
                
                Tr√™n Mobile/Tablet: Ch·∫°m v√†o b·∫•t k·ª≥ ƒë√¢u tr√™n m√†n h√¨nh ƒë·ªÉ bay l√™n.`,
                winCondition: `Kh√¥ng c√≥ ƒë√≠ch ƒë·∫øn, s·ªëng c√†ng l√¢u c√†ng t·ªët b·∫±ng c√°ch ƒëi·ªÅu khi·ªÉn nh√¢n v·∫≠t bay qua c√°c khe h·ªü gi·ªØa c√°c ch∆∞·ªõng ng·∫°i v·∫≠t. 
                
                M·ªói c·∫∑p ·ªëng l·ªói v∆∞·ª£t qua s·∫Ω cho b·∫°n 1 ƒëi·ªÉm.`,
                lossCondition: `Tuy·ªát ƒë·ªëi kh√¥ng ƒë∆∞·ª£c ch·∫°m v√†o:
                
                + C√°c kh·ªëi l·ªói m√†u ƒë·ªè ("ERROR 404", "CSLT-MAT").
                
                + Gi·ªõi h·∫°n tr√™n c√πng (tr·∫ßn nh√†) c·ªßa m√†n h√¨nh.
                
                + Gi·ªõi h·∫°n d∆∞·ªõi c√πng (s√†n nh√†) c·ªßa m√†n h√¨nh.
                
                Va ch·∫°m v√†o b·∫•t c·ª© th·ª© g√¨ k·ªÉ tr√™n ƒë·ªìng nghƒ©a v·ªõi GAME OVER.`
            },
            { 
                id: 5, 
                name: "Naruto Adventure", 
                desc: "Nhi·ªám v·ª• Ninja c·∫•p S c√πng Kakashi(?) v√† Naruto.", 
                // Intro ri√™ng cho game 5
                intro: `T·ª±a game n√†y l√† m·ªôt tr·∫£i nghi·ªám h√†nh ƒë·ªông platformer 2D Side-Scrolling mang phong c√°ch Arcade, ho√†n h·∫£o cho m·ªôt ng∆∞·ªùi ch∆°i.
                
                M·ª•c ti√™u c·ªßa game l√† cho ph√©p ng∆∞·ªùi ch∆°i ch·ªçn l·ª±a gi·ªØa c√°c huy·ªÅn tho·∫°i: Kakashi, Naruto,‚Ä¶ v√† tham gia v√†o m·ªôt cu·ªôc chi·∫øn t·ªëc ƒë·ªô cao ch·ªëng l·∫°i Sound Ninja, s·ª≠ d·ª•ng c√°c tuy·ªát k·ªπ nh∆∞ Sharingan, Chidori, Rasengan v√† Kage Bunshin ƒë·ªÉ b·∫£o v·ªá Konoha kh·ªèi hi·ªÉm h·ªça.`,
                price: 0, 
                bankInfo: "", 
                img: "GameImage/game5.png", 
                genre: "Adventure, Fighting", 
                players: "Single", 
                developer: "ƒê·ªó Duy Tr∆∞·ªùng", 
                release: "11/11/2025", 
                videoUrl: "https://www.youtube.com/embed/4XScOKO0Y40",
                story: `√ù t∆∞·ªüng trung t√¢m c·ªßa game l√† mang l·∫°i tr·∫£i nghi·ªám chi·∫øn ƒë·∫•u linh ho·∫°t v√† c√° nh√¢n h√≥a. Ng∆∞·ªùi ch∆°i ƒë·ªëi di·ªán v·ªõi l·ª±a ch·ªçn ƒë·ªãnh h√¨nh l·ªëi ch∆°i c·ªßa m√¨nh:
                
                + Kakashi: Ph√π h·ª£p v·ªõi l·ªëi ch∆°i chi·∫øn l∆∞·ª£c, ƒë√≤i h·ªèi s·ª± t√≠nh to√°n th·ªùi ƒëi·ªÉm ch√≠nh x√°c khi s·ª≠ d·ª•ng Sharingan.

                + Naruto: Ph√π h·ª£p v·ªõi l·ªëi ch∆°i c∆∞·ªùng ƒë·ªô cao, t·∫•n c√¥ng tr·ª±c di·ªán, g√¢y s√°t th∆∞∆°ng l·ªõn v√† di·ªán r·ªông b·∫±ng Rasengan.

                Game l√† n∆°i ki·ªÉm tra kh·∫£ nƒÉng l√†m ch·ªß t·ªëc ƒë·ªô ph·∫£n x·∫° v√† b·ªô k·ªπ nƒÉng ƒë·ªôc ƒë√°o c·ªßa ng∆∞·ªùi ch∆°i tr√™n nh·ªØng chi·∫øn tr∆∞·ªùng kh·ªëc li·ªát.
                
                C·ªët truy·ªán: B·∫£o v·ªá L√†ng L√°: Sau c√°i ch·∫øt c·ªßa Hokage ƒê·ªá Tam, L√†ng r∆°i v√†o t√¨nh tr·∫°ng b·∫•t ·ªïn, t·∫°o c∆° h·ªôi cho th·∫ø l·ª±c l√≠nh ƒë√°nh thu√™ t√†n b·∫°o l√† Ninja L√†ng √Çm Thanh x√¢m nh·∫≠p. B·∫°n ƒë∆∞·ª£c giao nhi·ªám v·ª• m·∫≠t: L·ª±a ch·ªçn Anh h√πng Kakashi Hatake ho·∫∑c Naruto Uzumaki ƒë·ªÉ th·ª±c hi·ªán nhi·ªám v·ª• ti√™u di·ªát ch√∫ng.`,
                gameplay: `Di chuy·ªÉn: D√πng Ph√≠m M≈©i T√™n Tr√°i/Ph·∫£i ho·∫∑c A/D.
                
                Nh·∫£y: D√πng Ph√≠m M≈©i T√™n L√™n ho·∫∑c W.

                T·∫•n c√¥ng c∆° b·∫£n: Ph√≠m J (ƒê·∫•m) v√† K (ƒê√°).

                Tuy·ªát K·ªπ ƒê·∫∑c Tr∆∞ng: Ph√≠m L (Chidori n·∫øu l√† Kakashi, Rasengan n·∫øu l√† Naruto).
                
                Si√™u Tuy·ªát K·ªπ: Ph√≠m U (Sharingan n·∫øu l√† Kakashi, Kage Bunshin n·∫øu l√† Naruto).`,
                winCondition: `Th·∫Øng M√†n : B·∫°n chi·∫øn th·∫Øng m·ªôt m√†n ch∆°i khi ti√™u di·ªát ƒë∆∞·ª£c t·∫•t c·∫£ c√°c ƒë∆°n v·ªã Sound Ninja tr√™n b·∫£n ƒë·ªì. M√†n h√¨nh "STAGE CLEAR!" s·∫Ω xu·∫•t hi·ªán, cho ph√©p b·∫°n chuy·ªÉn ti·∫øp sang Level ti·∫øp theo.
                
                Ho√†n Th√†nh Game: Khi b·∫°n ho√†n th√†nh Level cu·ªëi c√πng, m√†n h√¨nh "GAME COMPLETE!" s·∫Ω xu·∫•t hi·ªán.`,
                lossCondition: `Game k·∫øt th√∫c v√† m√†n h√¨nh "GAME OVER" s·∫Ω xu·∫•t hi·ªán n·∫øu:
                
                + M√°u V·ªÅ 0: Thanh m√°u c·ªßa nh√¢n v·∫≠t ch√≠nh c·∫°n ki·ªát sau khi nh·∫≠n s√°t th∆∞∆°ng t·ª´ k·∫ª ƒë·ªãch.
                
                + R∆°i V·ª±c: Nh√¢n v·∫≠t r∆°i kh·ªèi gi·ªõi h·∫°n m√†n h√¨nh ch∆°i.`
            },
            { 
                id: 6, 
                name: "D·∫°o Ph·ªë CHILL", 
                desc: "L√°i xe th∆∞ gi√£n c√πng nh·∫°c Lofi trong th·∫ø gi·ªõi si√™u th·ª±c.", 
                // Intro ri√™ng cho game 6
                intro: `G√°c l·∫°i m·ªçi √¢u lo, b·∫≠t nh·∫°c l√™n v√† t·∫≠n h∆∞·ªüng. 'D·∫°o Ph·ªë CHILL' kh√¥ng c√≥ th·∫Øng thua, kh√¥ng c√≥ k·∫ª ƒë·ªãch, ch·ªâ c√≥ b·∫°n v√† chi·∫øc xe l∆∞·ªõt ƒëi trong m√†n ƒë√™m √™m d·ªãu. M·ªôt li·ªÅu thu·ªëc tinh th·∫ßn ho√†n h·∫£o sau nh·ªØng gi·ªù l√†m vi·ªác cƒÉng th·∫≥ng.

                `,
                price: 100000, 
                bankInfo: "111111 - Vietcombank - DOAN HOANG VIET", 
                img: "GameImage/game6.png", 
                genre: "Simulation / Hangout", 
                players: "Single", 
                developer: "ƒêo√†n Ho√†ng Vi·ªát", 
                release: "12/10/2025", 
                videoUrl: "https://www.youtube.com/embed/jNlELPjMwOQ",
                story: `√ù t∆∞·ªüng:
                
                Kh√¥ng c√≥ k·∫ª th√π, kh√¥ng √°p l·ª±c. Ch·ªâ c√≥ b·∫°n, chi·∫øc xe v√† √¢m nh·∫°c trong th√†nh ph·ªë v·ªÅ ƒë√™m.

                "Kh√°m ph√°, chill, ng·∫Øm c·∫£nh v√† tr√≤ chuy·ªán."

                CH√ÄO M·ª™NG ƒê·∫æN V·ªöI TH·∫æ GI·ªöI ‚ÄúKH√ÅC BI·ªÜT‚Äù 

                B∆∞·ªõc v√†o th·∫ø gi·ªõi Open World r·ªông l·ªõn, n∆°i b·∫°n tho√°t kh·ªèi deadline v√† √°p l·ª±c. T·ª± tay c·∫ßm l√°i nh·ªØng chi·∫øc si√™u xe, l∆∞·ª£n l·ªù d∆∞·ªõi √°nh ƒë√®n Neon th√†nh ph·ªë v√† b·∫≠t Mic "t√°m" chuy·ªán c√πng h·ªôi b·∫°n. ƒê√¢y l√† kh√¥ng gian Slow Living d√†nh ri√™ng cho Gen Z.

                C·ªët truy·ªán:

                Trong m·ªôt th·∫ø gi·ªõi n∆°i con ng∆∞·ªùi ƒëang d·∫ßn ƒë√°nh m·∫•t kh·∫£ nƒÉng m∆° m·ªông v√¨ gu·ªìng quay h·ªëi h·∫£ c·ªßa cu·ªôc s·ªëng hi·ªán ƒë·∫°i, b·∫°n v√†o vai m·ªôt l·ªØ kh√°ch v√¥ danh tr·ªü v·ªÅ g√≥c ph·ªë ho√†i ni·ªám mang t√™n 'Ph·ªë nh·ªè'. 
                
                ƒê√¢y l√† n∆°i duy nh·∫•t tr√™n th·∫ø gi·ªõi m√† th·ªùi gian d∆∞·ªùng nh∆∞ b·ªè qu√™n, lu√¥n d·ª´ng l·∫°i ·ªü kho·∫£nh kh·∫Øc nh·∫≠p nho·∫°ng t·ªëi √™m ƒë·ªÅm v·ªõi c∆°n m∆∞a b·ª•i l·∫•t ph·∫•t kh√¥ng bao gi·ªù d·ª©t. 
                
                B·∫°n kh√¥ng c√≥ thanh m√°u, kh√¥ng c√≥ k·∫ª th√π, v√† c≈©ng ch·∫≥ng b·ªã h·ªëi th√∫c b·ªüi th·ªùi gian; suy nghƒ© duy nh·∫•t c·ªßa b·∫°n l√† r·∫£o b∆∞·ªõc th·∫≠t ch·∫≠m tr√™n nh·ªØng con ƒë∆∞·ªùng l√°t ƒë√° ph·ªß r√™u, l·∫Øng nghe ti·∫øng m∆∞a r∆°i t√≠ t√°ch tr√™n chi·∫øc √¥ trong su·ªët v√† ti·∫øng nh·∫°c Jazz du d∆∞∆°ng ph√°t ra t·ª´ nh·ªØng ng·ªçn ƒë√®n ƒë∆∞·ªùng hiu h·∫Øt. 
                
                Tr√™n h√†nh tr√¨nh v√¥ ƒë·ªãnh ·∫•y, b·∫°n s·∫Ω ƒëi t√¨m l·∫°i nh·ªØng 'm·∫£nh v·ª° √°nh s√°ng' ƒëang tr√¥i n·ªïi‚Äîƒë√≥ l√† hi·ªán th√¢n c·ªßa nh·ªØng k·ª∑ ni·ªám h·∫°nh ph√∫c nh·ªè b√© m√† c∆∞ d√¢n th√†nh ph·ªë ƒë√£ v√¥ t√¨nh ƒë√°nh r∆°i v√† l√£ng qu√™n: m·ªôt l√° th∆∞ t√¨nh ch∆∞a bao gi·ªù g·ª≠i, chi·∫øc v√© xem phim c·ªßa m·ªëi t√¨nh ƒë·∫ßu, hay ƒë∆°n gi·∫£n l√† m√πi h∆∞∆°ng c·ªßa ti·ªám b√°nh m√¨ n∆∞·ªõng nƒÉm x∆∞a. 
                
                M·ªói b∆∞·ªõc ch√¢n c·ªßa b·∫°n kh√¥ng ch·ªâ l√† s·ª± di chuy·ªÉn, m√† l√† h√†nh tr√¨nh th·∫Øp s√°ng l·∫°i t·ª´ng g√≥c ph·ªë u t·ªëi, gh√©p l·∫°i nh·ªØng m·∫£nh k√Ω ·ª©c v·ª•n v·ª° ƒë·ªÉ k·ªÉ l√™n m·ªôt c√¢u chuy·ªán c·∫£m ƒë·ªông, s√¢u s·∫Øc v·ªÅ s·ª± ch·ªØa l√†nh v√† nh·∫Øc nh·ªü ng∆∞·ªùi ch∆°i tr√¢n tr·ªçng nh·ªØng ƒëi·ªÅu b√¨nh d·ªã nh·∫•t m√† m√¨nh ƒëang c√≥.

                `,
                gameplay: `‚å®Ô∏è Di chuy·ªÉn: W, A, S, D ho·∫∑c M≈©i t√™n.
                
                üëÄ Quan s√°t: Chu·ªôt xoay 360 ƒë·ªô.

                üöó Menu ƒëi·ªán tho·∫°i: Nh·∫•n n√∫t M tr√™n m√†n h√¨nh.`,
                winCondition: "Kh√¥ng c√≥, game ch·ªâ ƒë·ªÉ th∆∞ gi√£n.",
                lossCondition: "Khi t·∫Øt game =))"
            }
        ];

        let currentGames = [...initialGames];
        const appContainer = document.getElementById('app-container');
        const formatter = new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' });

        // --- H√ÄM X·ª¨ L√ù VƒÇN B·∫¢N M·ªöI (FORMAT TEXT) ---
        // H√†m n√†y s·∫Ω:
        // 1. In ƒë·∫≠m c√°c t·ª´ kh√≥a quan tr·ªçng
        // 2. T√°ch vƒÉn b·∫£n th√†nh c√°c ƒëo·∫°n (paragraph) d·ª±a tr√™n 2 d·∫•u xu·ªëng d√≤ng (\n\n)
        // 3. N·∫øu trong ƒëo·∫°n c√≥ d√≤ng b·∫Øt ƒë·∫ßu b·∫±ng "+", n√≥ s·∫Ω gom l·∫°i th√†nh danh s√°ch <ul>
        // 4. N·∫øu l√† vƒÉn b·∫£n th∆∞·ªùng, n√≥ s·∫Ω b·ªçc trong <div class="content-paragraph"> v√† gi·ªØ l·∫°i c√°c d·∫•u xu·ªëng d√≤ng ƒë∆°n (<br>)
        function formatGameText(text) {
            if (!text) return "";

            // B∆Ø·ªöC 1: In ƒë·∫≠m c√°c t·ª´ kh√≥a c·ª• th·ªÉ tr∆∞·ªõc khi x·ª≠ l√Ω ƒëo·∫°n
            // Replace c√°c c·ª•m d√†i tr∆∞·ªõc ƒë·ªÉ tr√°nh tr√πng l·∫∑p
            let formatted = text
                .replace(/√ù t∆∞·ªüng c·ªët l√µi/g, "<strong>√ù t∆∞·ªüng c·ªët l√µi</strong>")
                .replace(/√ù t∆∞·ªüng trung t√¢m/g, "<strong>√ù t∆∞·ªüng trung t√¢m</strong>")
                .replace(/√ù t∆∞·ªüng:/g, "<strong>√ù t∆∞·ªüng:</strong>")
                .replace(/C·ªët truy·ªán:/g, "<strong>C·ªët truy·ªán:</strong>")
                // Fallback n·∫øu c√≥ C·ªët truy·ªán ƒë·ª©ng m·ªôt m√¨nh
                .replace(/C·ªët truy·ªán(?![^<]*>)/g, "<strong>C·ªët truy·ªán</strong>"); 

            // B∆Ø·ªöC 2: T√°ch c√°c ƒëo·∫°n l·ªõn b·∫±ng 2 d·∫•u xu·ªëng d√≤ng (empty line)
            const paragraphs = formatted.split(/\n\s*\n/);
            
            let html = '';
            
            paragraphs.forEach(para => {
                // Ki·ªÉm tra xem ƒëo·∫°n n√†y c√≥ ch·ª©a d·∫•u + (bullet point) kh√¥ng
                if (para.trim().includes('+')) {
                    // N·∫øu c√≥, x·ª≠ l√Ω t·ª´ng d√≤ng
                    const lines = para.split('\n');
                    let inList = false;
                    
                    lines.forEach(line => {
                        let cleanLine = line.trim();
                        if (cleanLine.startsWith('+')) {
                            // B·∫Øt ƒë·∫ßu m·ªôt danh s√°ch n·∫øu ch∆∞a c√≥
                            if (!inList) {
                                html += '<ul class="custom-list">';
                                inList = true;
                            }
                            // Th√™m item, b·ªè d·∫•u + ƒëi
                            html += `<li>${cleanLine.substring(1).trim()}</li>`;
                        } else {
                            // N·∫øu g·∫∑p d√≤ng kh√¥ng ph·∫£i list, ƒë√≥ng list c≈© l·∫°i
                            if (inList) {
                                html += '</ul>';
                                inList = false;
                            }
                            // Hi·ªÉn th·ªã d√≤ng text th∆∞·ªùng trong kh·ªëi n√†y
                            if (cleanLine.length > 0) {
                                html += `<div class="content-paragraph">${line}</div>`;
                            }
                        }
                    });
                    // ƒê√≥ng th·∫ª ul n·∫øu c√≤n m·ªü
                    if (inList) html += '</ul>';
                } else {
                    // N·∫øu l√† ƒëo·∫°n vƒÉn b·∫£n th∆∞·ªùng (kh√¥ng c√≥ list)
                    if (para.trim().length > 0) {
                        // Thay th·∫ø d·∫•u xu·ªëng d√≤ng ƒë∆°n (\n) th√†nh <br> ƒë·ªÉ gi·ªØ ƒë·ªãnh d·∫°ng
                        html += `<div class="content-paragraph">${para.replace(/\n/g, '<br>')}</div>`;
                    }
                }
            });
            
            return html;
        }

        // --- 2. H√ÄM RENDER TRANG CH·ª¶ (HOMEPAGE) ---
        function renderHomePage() {
            appContainer.innerHTML = `
                <nav class="navbar">
                    <a class="logo" href="about.html" target="_blank">
                        <i class="fa-solid fa-gamepad"></i> TBN STUDIO
                    </a>
                    
                    <div class="nav-links">
                        <a href="#" class="active">Trang ch·ªß</a>
                        <a href="#gallery-title">Kh√°m ph√°</a>
                        <a href="#">Th·ªÉ lo·∫°i <i class="fa-solid fa-caret-down" style="font-size: 0.8rem;"></i></a>
                        <a href="#">C·ªông ƒë·ªìng</a>
                        <a href="#uploadForm" id="uploadNavBtn" style="color:#00a8ff;font-weight:bold;">
                            <i class="fa-solid fa-upload"></i> ƒêƒÉng t·∫£i game
                        </a>
                    </div>

                    <div class="nav-actions">
                        <div class="search-box">
                            <input type="text" id="searchInput" placeholder="T√¨m game...">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </div>
                        <div class="icon-btn" onclick="alert('Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng!')">
                            <i class="fa-solid fa-cart-shopping"></i>
                            <span class="cart-badge">0</span>
                        </div>
                        <button class="btn-login" onclick="alert('Ch·ª©c nƒÉng ƒëƒÉng nh·∫≠p ƒëang b·∫£o tr√¨!')">ƒêƒÉng nh·∫≠p</button>
                    </div>
                </nav>

                <div class="hero">
                    <h1>TR√ÄN B·ªò NH·ªö</h1>
                    <p>‚ú® H·ªôi ch·ª£ Game Indie - N∆°i √Ω t∆∞·ªüng th√†nh hi·ªán th·ª±c ‚ú®</p>
                </div>

                <div class="container">
                    <h2 id="gallery-title">üî• Game ƒê·ªÅ Xu·∫•t</h2>
                    <div class="game-grid" id="gameGrid"></div>

                    <h2>üöÄ ƒêƒÉng Game M·ªõi</h2>
                    <div class="upload-section" id="uploadForm">
                        <form id="uploadFormContent">
                            <div class="form-row">
                                <div class="form-col">
                                    <label>T√™n Game:</label>
                                    <input type="text" id="gName" required placeholder="T√™n game...">
                                </div>
                                <div class="form-col">
                                    <label>Gi√° (VNƒê):</label>
                                    <input type="number" id="gPrice" placeholder="0 = Free">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>M√¥ t·∫£:</label>
                                <textarea id="gDesc" rows="2" required placeholder="M√¥ t·∫£ ng·∫Øn v·ªÅ game..."></textarea>
                            </div>
                            <div class="form-group">
                                <label>Th√¥ng tin Bank (N·∫øu b√°n):</label>
                                <textarea id="gBank" rows="1" placeholder="STK nh·∫≠n ti·ªÅn..."></textarea>
                            </div>
                            <div class="form-group">
                                <label>·∫¢nh b√¨a:</label>
                                <input type="file" id="gImage" accept="image/*" required>
                            </div>
                            <button type="submit" class="btn-play" style="width: 200px; margin: 0 auto; display: block;">ƒêƒÉng ngay</button>
                        </form>
                    </div>
                </div>
            `;
            
            const gameGrid = document.getElementById('gameGrid');
            const uploadForm = document.getElementById('uploadFormContent');
            const searchInput = document.getElementById('searchInput');
            const uploadNavBtn = document.getElementById("uploadNavBtn");

            renderGames(currentGames, gameGrid);
            
            uploadNavBtn.addEventListener("click", function(e){
                e.preventDefault();
                document.getElementById("uploadForm").scrollIntoView({behavior: "smooth"});
            });

            searchInput.addEventListener('input', function(e) {
                const keyword = e.target.value.toLowerCase();
                const filteredGames = currentGames.filter(game => 
                    game.name.toLowerCase().includes(keyword)
                );
                renderGames(filteredGames, gameGrid);
            });

            uploadForm.addEventListener('submit', handleGameUpload);
        }

        function renderGames(games, gridElement) {
            gridElement.innerHTML = "";
            if(games.length === 0) {
                gridElement.innerHTML = "<p style='text-align:center; color:#666; grid-column: 1/-1;'>Kh√¥ng t√¨m th·∫•y game n√†o...</p>";
                return;
            }
            games.forEach(game => {
                const isFree = game.price == 0;
                const priceDisplay = isFree ? "FREE" : formatter.format(game.price);
                const priceClass = isFree ? "free" : "";
                const bankDisplayClass = (!isFree && game.bankInfo) ? "show-bank" : "";

                const card = document.createElement('div');
                card.className = 'game-card';
                card.innerHTML = `
                    <div class="price-tag ${priceClass}">${priceDisplay}</div>
                    <div class="game-thumb"><img src="${game.img}" alt="${game.name}"></div>
                    <div class="game-info">
                        <h3 class="game-title">${game.name}</h3>
                        <p class="game-desc">${game.desc}</p>
                        <div class="bank-info-display ${bankDisplayClass}">üí≥ CK: ${game.bankInfo}</div>
                        <button onclick="openGameDetail(${game.id})" class="btn-play">
                            ${isFree ? 'CH∆†I NGAY' : 'MUA NGAY'}
                        </button>
                    </div>
                `;
                gridElement.appendChild(card);
            });
        }
        
        function handleGameUpload(e) {
            e.preventDefault();
            const name = document.getElementById('gName').value;
            const desc = document.getElementById('gDesc').value;
            const price = parseInt(document.getElementById('gPrice').value) || 0;
            const bank = document.getElementById('gBank').value;
            const fileInput = document.getElementById('gImage');
            
            if (fileInput.files && fileInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const newGame = {
                        id: Date.now(), name: name, desc: desc, price: price, bankInfo: bank,
                        img: e.target.result, 
                        genre: "Indie", players: "1", developer: "C·ªông ƒë·ªìng", release: new Date().toLocaleDateString('vi-VN'),
                        videoUrl: "https://www.youtube.com/embed/n4yK54iF55g?autoplay=1&mute=1",
                        intro: desc,
                        story: "N·ªôi dung ƒëang ƒë∆∞·ª£c t√°c gi·∫£ c·∫≠p nh·∫≠t...",
                        gameplay: "Li√™n h·ªá t√°c gi·∫£ ƒë·ªÉ bi·∫øt th√™m chi ti·∫øt.",
                        winCondition: "Ch∆∞a x√°c ƒë·ªãnh.",
                        lossCondition: "Ch∆∞a x√°c ƒë·ªãnh."
                    };
                    currentGames.unshift(newGame);
                    renderHomePage(); 
                    alert("ƒêƒÉng t·∫£i game th√†nh c√¥ng!");
                }
                reader.readAsDataURL(fileInput.files[0]);
            }
        }


        // --- 3. H√ÄM RENDER CHI TI·∫æT GAME (DETAIL PAGE) - ƒê√É C·∫¨P NH·∫¨T ---
        function openGameDetail(gameId) {
            window.open(`${window.location.pathname}?game=${gameId}`, '_blank');
        }

        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }
        
        function renderDetailPage(game) {
            const isFree = game.price == 0;
            const priceDisplay = isFree ? "FREE" : formatter.format(game.price);

            // X·ª≠ l√Ω vƒÉn b·∫£n b·∫±ng h√†m formatGameText ƒë·ªÉ hi·ªÉn th·ªã ƒë·∫πp
            const storyText = formatGameText(game.story || "ƒêang c·∫≠p nh·∫≠t...");
            const gameplayText = formatGameText(game.gameplay || "S·ª≠ d·ª•ng b√†n ph√≠m v√† chu·ªôt.");
            const winText = formatGameText(game.winCondition || "Ho√†n th√†nh m·ª•c ti√™u.");
            const lossText = formatGameText(game.lossCondition || "H·∫øt m·∫°ng.");
            const introText = formatGameText(game.intro || game.desc);

            appContainer.innerHTML = `
                <nav class="navbar">
                    <a class="logo" href="about.html" target="_blank">
                        <i class="fa-solid fa-gamepad"></i> TBN STUDIO
                    </a>
                    <div class="nav-links">
                        <a href="${window.location.pathname}">Trang ch·ªß</a>
                        <a href="#">Kh√°m ph√°</a>
                    </div>
                </nav>

                <div class="container">
                    <div class="detail-header">
                        <h1>${game.name}</h1>
                        <p>T√°c gi·∫£: ${game.developer}</p>
                        <button onclick="alert('${isFree ? 'B·∫Øt ƒë·∫ßu ch∆°i ngay!' : 'ƒê√£ mua game! Vui l√≤ng chuy·ªÉn kho·∫£n: ' + game.bankInfo}')" 
                                class="btn-play" style="width: 200px; margin-top: 20px; background: ${isFree ? 'var(--primary-color)' : 'var(--accent-pink)'}; box-shadow: 0 3px 0 ${isFree ? 'var(--primary-dark)' : '#d63031'}; color: white;">
                            ${isFree ? 'CH∆†I NGAY' : 'MUA V√Ä T·∫¢I'}
                        </button>
                    </div>

                    <div class="detail-grid">
                        <div class="main-content">
                            <div class="video-player">
                                <iframe src="${game.videoUrl}" allow="autoplay; encrypted-media" allowfullscreen></iframe>
                            </div>

                            <div class="intro-box">
                                <h2><i class="fa-regular fa-star" style="color: var(--accent-yellow);"></i> Gi·ªõi thi·ªáu chung</h2>
                                <div class="intro-content">
                                    ${introText}
                                </div>
                            </div>
                            <div class="story-section">
                                <h2 style="border-left: 8px solid var(--accent-pink);">üìñ C·ªët truy·ªán & √ù t∆∞·ªüng</h2>
                                <div class="story-box">
                                    ${storyText}
                                </div>

                                <h2 style="margin-top: 30px;">üéÆ H∆∞·ªõng d·∫´n ch∆°i</h2>
                                <div class="gameplay-box">
                                    <strong>C√°ch ƒëi·ªÅu khi·ªÉn:</strong> ${gameplayText}
                                    
                                    <ul class="win-loss-list">
                                        <li>
                                            <i class="fa-solid fa-trophy" style="color: gold; font-size: 1.2rem; margin-top: 5px;"></i> 
                                            <div style="flex:1;">
                                                <strong>Th·∫Øng:</strong> ${winText}
                                            </div>
                                        </li>
                                        <li>
                                            <i class="fa-solid fa-skull" style="color: #ff7675; font-size: 1.2rem; margin-top: 5px;"></i> 
                                            <div style="flex:1;">
                                                <strong>Thua:</strong> ${lossText}
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                
                                ${!isFree ? `
                                <div class="purchase-note">
                                    <i class="fa-solid fa-triangle-exclamation" style="font-size: 1.5rem;"></i>
                                    <div>
                                        <strong>L∆∞u √Ω mua game:</strong><br>
                                        Vui l√≤ng chuy·ªÉn kho·∫£n s·ªë ti·ªÅn <strong>${priceDisplay}</strong> ƒë·∫øn STK: <strong>${game.bankInfo}</strong>.
                                    </div>
                                </div>` : ''}
                            </div>
                        </div>

                        <div class="game-specs">
                            <h3>üîç Th√¥ng s·ªë k·ªπ thu·∫≠t</h3>
                            <div class="spec-item"><strong>Th·ªÉ lo·∫°i:</strong> <span>${game.genre}</span></div>
                            <div class="spec-item"><strong>S·ªë ng∆∞·ªùi ch∆°i:</strong> <span>${game.players}</span></div>
                            <div class="spec-item"><strong>Ph√°t tri·ªÉn b·ªüi:</strong> <span>${game.developer}</span></div>
                            <div class="spec-item"><strong>Ng√†y ƒëƒÉng t·∫£i:</strong> <span>${game.release}</span></div>
                            <div class="spec-item"><strong>Gi√° ti·ªÅn:</strong> <span style="color: var(--accent-pink); font-weight:bold;">${priceDisplay}</span></div>
                            
                            <div class="spec-item" style="margin-top:15px; border-top:1px solid #eee; padding-top:10px;">
                                <strong>Tr·∫°ng th√°i:</strong> <br> <span style="color: green; font-weight:bold;">ƒêang ph√°t h√†nh</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.title = `${game.name} - Chi ti·∫øt | TBN Studio`;
        }

        // --- 4. KH·ªûI CH·∫†Y (MAIN) ---
        document.addEventListener('DOMContentLoaded', function() {
            const gameId = getQueryParam('game');
            if (gameId) {
                const selectedGame = currentGames.find(g => g.id == gameId);
                selectedGame ? renderDetailPage(selectedGame) : (alert("Game kh√¥ng t·ªìn t·∫°i!"), renderHomePage());
            } else {
                renderHomePage();
            }
        });
    </script>
</body>
</html>
